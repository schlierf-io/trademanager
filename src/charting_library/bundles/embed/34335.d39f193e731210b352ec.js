(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[34335],{981193:e=>{e.exports={container:"container-Mtq7m9Yl","intent-default":"intent-default-Mtq7m9Yl",focused:"focused-Mtq7m9Yl",readonly:"readonly-Mtq7m9Yl",disabled:"disabled-Mtq7m9Yl","with-highlight":"with-highlight-Mtq7m9Yl",grouped:"grouped-Mtq7m9Yl","adjust-position":"adjust-position-Mtq7m9Yl","first-row":"first-row-Mtq7m9Yl","first-col":"first-col-Mtq7m9Yl",stretch:"stretch-Mtq7m9Yl","font-size-medium":"font-size-medium-Mtq7m9Yl","font-size-large":"font-size-large-Mtq7m9Yl","no-corner-top-left":"no-corner-top-left-Mtq7m9Yl","no-corner-top-right":"no-corner-top-right-Mtq7m9Yl","no-corner-bottom-right":"no-corner-bottom-right-Mtq7m9Yl","no-corner-bottom-left":"no-corner-bottom-left-Mtq7m9Yl","size-small":"size-small-Mtq7m9Yl","size-medium":"size-medium-Mtq7m9Yl","size-large":"size-large-Mtq7m9Yl","intent-success":"intent-success-Mtq7m9Yl","intent-warning":"intent-warning-Mtq7m9Yl","intent-danger":"intent-danger-Mtq7m9Yl","intent-primary":"intent-primary-Mtq7m9Yl","border-none":"border-none-Mtq7m9Yl","border-thin":"border-thin-Mtq7m9Yl","border-thick":"border-thick-Mtq7m9Yl",highlight:"highlight-Mtq7m9Yl",shown:"shown-Mtq7m9Yl"}},484684:e=>{e.exports={"inner-slot":"inner-slot-yJbunXPO",interactive:"interactive-yJbunXPO",icon:"icon-yJbunXPO","inner-middle-slot":"inner-middle-slot-yJbunXPO","before-slot":"before-slot-yJbunXPO","after-slot":"after-slot-yJbunXPO"}},358089:e=>{e.exports={input:"input-oiYdY6I4","with-start-slot":"with-start-slot-oiYdY6I4","with-end-slot":"with-end-slot-oiYdY6I4"}},733319:e=>{e.exports={loader:"loader-PZ4hqS2H",static:"static-PZ4hqS2H",item:"item-PZ4hqS2H","tv-button-loader":"tv-button-loader-PZ4hqS2H",medium:"medium-PZ4hqS2H",small:"small-PZ4hqS2H",black:"black-PZ4hqS2H",white:"white-PZ4hqS2H",gray:"gray-PZ4hqS2H",primary:"primary-PZ4hqS2H","loader-initial":"loader-initial-PZ4hqS2H","loader-appear":"loader-appear-PZ4hqS2H"}},776324:(e,t,n)=>{"use strict";n.d(t,{setup:()=>u,insert:()=>d,replace:()=>h,exact:()=>p,exclude:()=>m,remove:()=>f,create:()=>y,put:()=>S,rename:()=>b,changeDescription:()=>g,share:()=>_,reducer:()=>v,createCrossTabSyncMiddleware:()=>E,getListsMap:()=>w,getListById:()=>L,getListIds:()=>I});var r=n(826300),s=n(199669),o=n(340958),i=n(559986);const a={lists:{ids:[],byId:{}},timestamp:null};function c(e,t){e.lists.ids.push(t.id),e.lists.byId[t.id]={id:t.id,name:t.name,description:t.description,symbols:[...t.symbols],shared:t.shared}}const l=(0,r.createSlice)({name:"custom-lists",initialState:a,reducers:{setup:(e,t)=>{const{lists:n,timestamp:r}=t.payload,s={lists:{ids:[],byId:{}},timestamp:null};for(const e of n)c(s,e);return s.timestamp=r,s},insert:(e,t)=>{const{id:n,symbols:r,before:s}=t.payload,{lists:a}=e,c=a.byId[n];if(void 0===c)return;const l=new Set(r);let u;if(void 0!==s&&l.has(s)){u=i.LIST_START;for(let e=c.symbols.indexOf(s);e>=0;--e)if(!l.has(c.symbols[e])){u=c.symbols[e];break}}const d=c.symbols.filter((e=>!l.has(e))),h=(0,i.getTargetIndex)(d,s,u)
;void 0===h?d.push(...l):d.splice(h,0,...l),(0,o.equalArrays)(d,c.symbols)||(c.symbols=d)},replace:(e,t)=>{const{id:n,current:r,next:s}=t.payload,{lists:o}=e,i=o.byId[n];if(void 0===i)return;if(r===s)return;let a=!1,c=!1;const l=[];for(const e of i.symbols){if(e===s){c=!0;break}e===r?(l.push(s),a=!0):l.push(e)}a&&!c&&(i.symbols=l)},exact:(e,t)=>{const{id:n,symbols:r}=t.payload,{lists:s}=e,i=s.byId[n];if(void 0===i)return;const a=[...new Set(r)];(0,o.equalArrays)(a,i.symbols)||(i.symbols=a)},exclude:(e,t)=>{const{id:n,symbols:r}=t.payload,{lists:s}=e,i=s.byId[n];if(void 0===i)return;const a=new Set(r),c=i.symbols.filter((e=>!a.has(e)));(0,o.equalArrays)(c,i.symbols)||(i.symbols=c)},remove:(e,t)=>{const{id:n}=t.payload,{lists:r}=e;if(void 0===r.byId[n])return;const s=r.ids.filter((e=>e!==n));r.ids=s,delete r.byId[n]},create:(e,t)=>{const{id:n,name:r,symbols:s}=t.payload,{lists:o}=e;void 0===o.byId[n]&&c(e,{id:n,name:r,symbols:s,shared:!1,description:null})},put:(e,t)=>{const{id:n,name:r,description:s,symbols:o,shared:i}=t.payload,{lists:a}=e;void 0===a.byId[n]?c(e,{id:n,name:r,description:s,symbols:o,shared:i}):a.byId[n]={id:n,name:r,description:s,shared:i,symbols:[...o]}},rename:(e,t)=>{const{id:n,name:r}=t.payload,{lists:s}=e,o=s.byId[n];void 0!==o&&o.name!==r&&(o.name=r)},changeDescription:(e,t)=>{const{id:n,description:r}=t.payload,{lists:s}=e,o=s.byId[n];void 0!==o&&o.description!==r&&(o.description=r)},share:(e,t)=>{const{id:n,shared:r}=t.payload,{lists:s}=e,o=s.byId[n];void 0!==o&&o.shared!==r&&(o.shared=r)}}}),{setup:u,insert:d,replace:h,exact:p,exclude:m,remove:f,create:y,put:S,rename:b,changeDescription:g,share:_}=l.actions,{reducer:v}=l;function E(e,t,n=l){return(0,s.createCrossTabSyncMiddleware)({id:e,channel:t,event:"custom-list-cross-tab-sync",filter:e=>function(e,t){return t.actions.setup.match(e)||t.actions.insert.match(e)||t.actions.exclude.match(e)||t.actions.exact.match(e)||t.actions.replace.match(e)||t.actions.remove.match(e)||t.actions.create.match(e)||t.actions.put.match(e)||t.actions.rename.match(e)||t.actions.changeDescription.match(e)||t.actions.share.match(e)}(e,n)})}function w(e){return e.lists.byId}function L(e,t){var n;return null!==(n=w(e)[t])&&void 0!==n?n:null}function I(e){return e.lists.ids}},402952:(e,t,n)=>{"use strict";function r(e="default"){switch(e){case"default":return"primary";case"stroke":return"secondary"}}function s(e="primary"){switch(e){case"primary":return"brand";case"success":return"green";case"default":return"gray";case"danger":return"red"}}function o(e="m"){switch(e){case"s":return"xsmall";case"m":return"small";case"l":return"large"}}n.d(t,{getVariantByAppearance:()=>r,getColorByIntent:()=>s,convertSize:()=>o})},638990:(e,t,n)=>{"use strict";n.d(t,{Button:()=>a});var r=n(50959),s=n(915812),o=n(402952);function i(e){const{intent:t,size:n,appearance:r,useFullWidth:s,icon:i,...a}=e;return{...a,color:(0,o.getColorByIntent)(t),size:(0,o.convertSize)(n),variant:(0,o.getVariantByAppearance)(r),stretch:s,startIcon:i}}function a(e){return r.createElement(s.SquareButton,{...i(e)
})}},938886:(e,t,n)=>{"use strict";n.d(t,{Button:()=>r.Button,AnchorButton:()=>s.AnchorButton});var r=n(638990),s=n(541016)},452395:(e,t,n)=>{"use strict";n.d(t,{ControlSkeleton:()=>b,InputClasses:()=>f});var r=n(50959),s=n(497754),o=n(650151),i=n(662929),a=n(8626),c=n(301792),l=n(307754);var u=n(981193),d=n.n(u);function h(e){let t="";return 0!==e&&(1&e&&(t=s(t,d()["no-corner-top-left"])),2&e&&(t=s(t,d()["no-corner-top-right"])),4&e&&(t=s(t,d()["no-corner-bottom-right"])),8&e&&(t=s(t,d()["no-corner-bottom-left"]))),t}function p(e,t,n,r){const{removeRoundBorder:o,className:i,intent:a="default",borderStyle:c="thin",size:u,highlight:p,disabled:m,readonly:f,stretch:y,noReadonlyStyles:S,isFocused:b}=e,g=h(null!=o?o:(0,l.getGroupCellRemoveRoundBorders)(n));return s(d().container,d()[`intent-${a}`],d()[`border-${c}`],u&&d()[`size-${u}`],g,p&&d()["with-highlight"],m&&d().disabled,f&&!S&&d().readonly,b&&d().focused,y&&d().stretch,t&&d().grouped,!r&&d()["adjust-position"],n.isTop&&d()["first-row"],n.isLeft&&d()["first-col"],i)}function m(e,t){const{highlight:n,highlightRemoveRoundBorder:r}=e;if(!n)return d().highlight;const o=h(null!=r?r:(0,l.getGroupCellRemoveRoundBorders)(t));return s(d().highlight,d().shown,o)}const f={FontSizeMedium:(0,o.ensureDefined)(d()["font-size-medium"]),FontSizeLarge:(0,o.ensureDefined)(d()["font-size-large"])},y={passive:!1};function S(e,t){const{style:n,id:s,role:o,onFocus:l,onBlur:u,onMouseOver:d,onMouseOut:h,onMouseDown:f,onMouseUp:S,onKeyDown:b,onClick:g,tabIndex:_,startSlot:v,middleSlot:E,endSlot:w,onWheel:L,onWheelNoPassive:I=null}=e,{isGrouped:T,cellState:C,disablePositionAdjustment:A=!1}=(0,r.useContext)(c.ControlGroupContext),D=function(e,t=null,n){const s=(0,r.useRef)(null),o=(0,r.useRef)(null),i=(0,r.useCallback)((()=>{if(null===s.current||null===o.current)return;const[e,t,n]=o.current;null!==t&&s.current.addEventListener(e,t,n)}),[]),a=(0,r.useCallback)((()=>{if(null===s.current||null===o.current)return;const[e,t,n]=o.current;null!==t&&s.current.removeEventListener(e,t,n)}),[]),c=(0,r.useCallback)((e=>{a(),s.current=e,i()}),[]);return(0,r.useEffect)((()=>(o.current=[e,t,n],i(),a)),[e,t,n]),c}("wheel",I,y);return r.createElement("span",{style:n,id:s,role:o,className:p(e,T,C,A),tabIndex:_,ref:(0,i.useMergedRefs)([t,D]),onFocus:l,onBlur:u,onMouseOver:d,onMouseOut:h,onMouseDown:f,onMouseUp:S,onKeyDown:b,onClick:g,onWheel:L,...(0,a.filterDataProps)(e),...(0,a.filterAriaProps)(e)},v,E,w,r.createElement("span",{className:m(e,C)}))}S.displayName="ControlSkeleton";const b=r.forwardRef(S)},514420:(e,t,n)=>{"use strict";n.d(t,{BeforeSlot:()=>a,StartSlot:()=>c,MiddleSlot:()=>l,EndSlot:()=>u,AfterSlot:()=>d});var r=n(50959),s=n(497754),o=n(484684),i=n.n(o);function a(e){const{className:t,children:n}=e;return r.createElement("span",{className:s(i()["before-slot"],t)},n)}function c(e){const{className:t,interactive:n=!0,icon:o=!1,children:a}=e;return r.createElement("span",{className:s(i()["inner-slot"],n&&i().interactive,o&&i().icon,t)},a)}function l(e){const{className:t,children:n}=e
;return r.createElement("span",{className:s(i()["inner-slot"],i()["inner-middle-slot"],t)},n)}function u(e){const{className:t,interactive:n=!0,icon:o=!1,children:a}=e;return r.createElement("span",{className:s(i()["inner-slot"],n&&i().interactive,o&&i().icon,t)},a)}function d(e){const{className:t,children:n}=e;return r.createElement("span",{className:s(i()["after-slot"],t)},n)}},521040:(e,t,n)=>{"use strict";n.d(t,{InputControl:()=>b});var r=n(50959),s=n(497754),o=n(8626),i=n(763341),a=n(151057),c=n(662929),l=n(207357),u=n(405964),d=n(633750),h=n(452395),p=n(514420),m=n(358089),f=n.n(m);function y(e){return!(0,o.isAriaAttribute)(e)&&!(0,o.isDataAttribute)(e)}function S(e){const{id:t,title:n,role:i,tabIndex:a,placeholder:c,name:l,type:u,value:d,defaultValue:m,draggable:S,autoComplete:b,autoFocus:g,maxLength:_,min:v,max:E,step:w,pattern:L,inputMode:I,onSelect:T,onFocus:C,onBlur:A,onKeyDown:D,onKeyUp:k,onKeyPress:M,onChange:O,onDragStart:P,size:B="medium",className:x,inputClassName:R,disabled:F,readonly:N,containerTabIndex:Y,startSlot:q,endSlot:H,reference:W,containerReference:U,onContainerFocus:z,...V}=e,K=(0,o.filterProps)(V,y),G={...(0,o.filterAriaProps)(V),...(0,o.filterDataProps)(V),id:t,title:n,role:i,tabIndex:a,placeholder:c,name:l,type:u,value:d,defaultValue:m,draggable:S,autoComplete:b,autoFocus:g,maxLength:_,min:v,max:E,step:w,pattern:L,inputMode:I,onSelect:T,onFocus:C,onBlur:A,onKeyDown:D,onKeyUp:k,onKeyPress:M,onChange:O,onDragStart:P};return r.createElement(h.ControlSkeleton,{...K,disabled:F,readonly:N,tabIndex:Y,className:s(f().container,x),size:B,ref:U,onFocus:z,startSlot:q,middleSlot:r.createElement(p.MiddleSlot,null,r.createElement("input",{...G,className:s(f().input,R,q&&f()["with-start-slot"],H&&f()["with-end-slot"]),disabled:F,readOnly:N,ref:W})),endSlot:H})}function b(e){e=(0,l.useControl)(e);const{disabled:t,autoSelectOnFocus:n,tabIndex:s=0,onFocus:o,onBlur:h,reference:p,containerReference:m=null}=e,f=(0,r.useRef)(null),y=(0,r.useRef)(null),[b,g]=(0,u.useFocus)(),_=t?void 0:b?-1:s,v=t?void 0:b?s:-1,{isMouseDown:E,handleMouseDown:w,handleMouseUp:L}=(0,d.useIsMouseDown)(),I=(0,i.createSafeMulticastEventHandler)(g.onFocus,(function(e){n&&!E.current&&(0,a.selectAllContent)(e.currentTarget)}),o),T=(0,i.createSafeMulticastEventHandler)(g.onBlur,h),C=(0,r.useCallback)((e=>{f.current=e,p&&("function"==typeof p&&p(e),"object"==typeof p&&(p.current=e))}),[f,p]);return r.createElement(S,{...e,isFocused:b,containerTabIndex:_,tabIndex:v,onContainerFocus:function(e){y.current===e.target&&null!==f.current&&f.current.focus()},onFocus:I,onBlur:T,reference:C,containerReference:(0,c.useMergedRefs)([y,m]),onMouseDown:w,onMouseUp:L})}},207357:(e,t,n)=>{"use strict";n.d(t,{useControl:()=>o});var r=n(763341),s=n(405964);function o(e){const{onFocus:t,onBlur:n,intent:o,highlight:i,disabled:a}=e,[c,l]=(0,s.useFocus)(void 0,a),u=(0,r.createSafeMulticastEventHandler)(a?void 0:l.onFocus,t),d=(0,r.createSafeMulticastEventHandler)(a?void 0:l.onBlur,n);return{...e,intent:o||(c?"primary":"default"),highlight:null!=i?i:c,onFocus:u,
onBlur:d}}},405964:(e,t,n)=>{"use strict";n.d(t,{useFocus:()=>s});var r=n(50959);function s(e,t){const[n,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&n&&s(!1)}),[t,n]);const o={onFocus:(0,r.useCallback)((function(t){void 0!==e&&e.current!==t.target||s(!0)}),[e]),onBlur:(0,r.useCallback)((function(t){void 0!==e&&e.current!==t.target||s(!1)}),[e])};return[n,o]}},640027:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>s});var r=n(50959);const s=()=>{const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},633750:(e,t,n)=>{"use strict";n.d(t,{useIsMouseDown:()=>s});var r=n(50959);function s(){const e=(0,r.useRef)(!1),t=(0,r.useCallback)((()=>{e.current=!0}),[e]),n=(0,r.useCallback)((()=>{e.current=!1}),[e]);return{isMouseDown:e,handleMouseDown:t,handleMouseUp:n}}},662929:(e,t,n)=>{"use strict";n.d(t,{useMergedRefs:()=>o});var r=n(50959),s=n(551080);function o(e){return(0,r.useCallback)((0,s.mergeRefs)(e),e)}},612247:(e,t,n)=>{"use strict";n.d(t,{Loader:()=>l});var r,s=n(50959),o=n(497754),i=n(745269),a=n(733319),c=n.n(a);!function(e){e[e.Initial=0]="Initial",e[e.Appear=1]="Appear",e[e.Active=2]="Active"}(r||(r={}));class l extends s.PureComponent{constructor(e){super(e),this._stateChangeTimeout=null,this.state={state:r.Initial}}render(){const{className:e,color:t="black",size:n="medium",staticPosition:r}=this.props,i=o(c().item,c()[t],c()[n]);return s.createElement("span",{className:o(c().loader,r&&c().static,this._getStateClass(),e)},s.createElement("span",{className:i}),s.createElement("span",{className:i}),s.createElement("span",{className:i}))}componentDidMount(){this.setState({state:r.Appear}),this._stateChangeTimeout=setTimeout((()=>{this.setState({state:r.Active})}),2*i.dur)}componentWillUnmount(){this._stateChangeTimeout&&(clearTimeout(this._stateChangeTimeout),this._stateChangeTimeout=null)}_getStateClass(){switch(this.state.state){case r.Initial:return c()["loader-initial"];case r.Appear:return c()["loader-appear"];default:return""}}}},151057:(e,t,n)=>{"use strict";function r(e){null!==e&&e.setSelectionRange(0,e.value.length)}n.d(t,{selectAllContent:()=>r})},763341:(e,t,n)=>{"use strict";function r(...e){return t=>{for(const n of e)void 0!==n&&n(t)}}n.d(t,{createSafeMulticastEventHandler:()=>r})},531327:(e,t,n)=>{"use strict";function r(e){return s()?0:o()?46:Math.min(Math.max(e,46),450)}n.d(t,{getWidgetBarPadding:()=>r,isWidgetBarFullscreen:()=>s});const s=()=>!window.matchMedia("screen and (min-width: 768px)").matches,o=()=>!window.matchMedia("screen and (min-width: 1280px)").matches},314308:(e,t,n)=>{"use strict";function r(e,t,n,r,s){function o(s){if(e>s.timeStamp)return;const o=s.target;void 0!==n&&null!==t&&null!==o&&o.ownerDocument===r&&(t.contains(o)||n(s))}return s.click&&r.addEventListener("click",o,!1),s.mouseDown&&r.addEventListener("mousedown",o,!1),s.touchEnd&&r.addEventListener("touchend",o,!1),s.touchStart&&r.addEventListener("touchstart",o,!1),()=>{r.removeEventListener("click",o,!1),r.removeEventListener("mousedown",o,!1),
r.removeEventListener("touchend",o,!1),r.removeEventListener("touchstart",o,!1)}}n.d(t,{addOutsideEventListener:()=>r})},575658:(e,t,n)=>{"use strict";n.d(t,{setFixedBodyState:()=>a});var r=n(76107),s=n(531327);let o=0,i=!1;function a(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++o){const e=(0,r.getCSSProperty)(t,"overflow"),s=(0,r.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,r.setStyle)(n,"right",`${(0,r.getScrollbarWidth)()}px`),t.style.paddingRight=`${s+(0,r.getScrollbarWidth)()}px`,i=!0),t.classList.add("i-no-scroll")}else if(!e&&o>0&&0==--o&&(t.classList.remove("i-no-scroll"),i)){(0,r.setStyle)(n,"right","0px");let e=0;e=n?(0,s.getWidgetBarPadding)((0,r.getContentWidth)(n)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,r.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",i=!1}}},237037:(e,t,n)=>{"use strict";function r(e,t=!1){if(e&&e.startsWith("exchange-"))return function(e,t=!1){const n=window.pro,r=n.getProduct(e);return!!n.isProductDefined(r)&&(t?!!r.idc_service_codes_delay:!!r.idc_service_codes)}(e,t);const n=(e||"").toLowerCase();return window.pro.getIDCExchanges(t).includes(n)}n.d(t,{isIDCExchange:()=>r})},526225:(e,t,n)=>{"use strict";n.d(t,{syncUserData:()=>u,syncUserConversionData:()=>d});var r=n(272001),s=n(345848),o=n(890740),i=n(152198);const a=(0,r.getLogger)("User.Sync");function c(e){return`${e}_${window.user&&window.user.username||""}`}function l(e,t,n){n!==window.user.pro_plan&&(window.user.pro_plan=n,window.user.is_pro=Boolean(n),(0,s.trackEvent)("Sync User Data","Different Pro Plan",c(e))),t!==window.is_authenticated&&(window.is_authenticated=t,window.loginStateChange.fire(),(0,s.trackEvent)("Sync User Data","Different Auth",c(e)))}async function u(e){try{l(e,!0,(await(0,i.getProPlanDetailsForUser)()).pro_plan)}catch(t){!function(e,t){403===t.status&&["not_authenticated","login_required"].includes(t.type||"")?l(e,!1,void 0):a.logError(t.message)}(e,t)}}async function d(e){const t=await(0,o.fetch)("/gopro/"),n=await t.json();return l(e,n.is_authenticated,n.user.pro_plan),n}},658583:(e,t,n)=>{"use strict";n.d(t,{handleJSON:()=>s,isDesktopWatchlistAvailable:()=>o});var r=n(638456);function s(e){return e.ok?204===e.status?Promise.resolve():e.json():e.json().then((e=>{const t=new Error(e.detail||"not ok");throw e.code&&(t.name=`ApiError:${e.code}`),t}))}function o(e){return Boolean((0,r.isDesktopApp)()&&e&&"getActiveWatchlistId"in e&&"onActiveWatchlistIdChange"in e)}},722840:(e,t,n)=>{"use strict";n.d(t,{quoteSessionAdapters:()=>h});var r=n(650151),s=n(947809),o=n(696828),i=n(113911),a=n(237037),c=n(833813),l=n(778016),u=n(837657);class d{constructor(e,t,n="watchlist"){this._symbolDataHandlers=new Map,this._fastSymbols=new Set,this._subscribedSymbols=new Set,this._subscriptionSet=new Set,this._cancelSubscriptionSet=new Set,this._quoteSessionDataHandler=e=>{const t=(0,r.ensureDefined)(e.symbolname),{filtered:n,keepSubscription:s}=this._applyDataFilters(e);s||this._unsubscribeSymbols([t]),
this._setSymbolDataCache(t,n);const o=this._symbolDataHandlers.get(t);o&&o(n)},this._clientId=e,this._quoteSession=(0,s.getQuoteSessionInstance)(n),this._lastSymbolData=t||new Map}destroy(){const e=Array.from(this._subscribedSymbols);this._unsubscribeSymbols(e)}addFastSymbol(e){this._fastSymbols.has(e)||!this._subscribedSymbols.has(e)||(0,u.isSeparatorItem)(e)||(this._fastSymbols.add(e),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols)))}removeFastSymbol(e){this._fastSymbols.has(e)&&(this._fastSymbols.delete(e),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols)))}addSymbolDataHandler(e,t){(0,u.isSeparatorItem)(e)||this._symbolDataHandlers.set(e,t)}removeSymbolDataHandler(e){this._symbolDataHandlers.delete(e)}addToSubscriptionSet(e){e.forEach((e=>{(0,u.isSeparatorItem)(e)||this._subscriptionSet.add(e)}))}clearSubscriptionSet(){this._subscriptionSet.clear()}addToCancelSubscriptionSet(e){e.forEach((e=>{(0,u.isSeparatorItem)(e)||this._cancelSubscriptionSet.add(e)}))}commitSubscriptionChanges(){Array.from(this._subscriptionSet).forEach((e=>{this._cancelSubscriptionSet.has(e)&&(this._subscriptionSet.delete(e),this._cancelSubscriptionSet.delete(e))})),this._subscribeSymbols(Array.from(this._subscriptionSet)),this._subscriptionSet.clear(),this._unsubscribeSymbols(Array.from(this._cancelSubscriptionSet)),this._cancelSubscriptionSet.clear(),this._quoteSession.setFastSymbols(this._clientId,Array.from(this._fastSymbols))}getLastSymbolData(e){return this._lastSymbolData.get(e)}_subscribeSymbols(e){this._quoteSession.subscribe(this._clientId,e,this._quoteSessionDataHandler),e.forEach((e=>this._subscribedSymbols.add(e)))}_unsubscribeSymbols(e){this._quoteSession.unsubscribe(this._clientId,e,this._quoteSessionDataHandler),e.forEach((e=>{this._subscribedSymbols.delete(e)}))}_setSymbolDataCache(e,t){var n;const r=(null===(n=this._lastSymbolData.get(e))||void 0===n?void 0:n.values)||{};this._lastSymbolData.set(e,{...t,values:{...r,...t.values}})}_applyDataFilters(e){{const t=()=>(0,l.enabled)(c.ProductFeatures.IDC_AVAILABLE_DELAY),n=e=>({...e,status:"sf_data",values:{}});if((e=>(0,i.isSfQuoteData)(e)||(0,a.isIDCExchange)((0,o.getExchange)((0,r.ensureDefined)(e.symbolname)),!0))(e)&&!t())return{filtered:n(e),keepSubscription:!1}}return{filtered:e,keepSubscription:!0}}}const h=new class{constructor(){this._adaptersMap=new Map,this._lastSymbolData=new Map}destroy(){this._adaptersMap.forEach((e=>{e.forEach((e=>e.destroy()))})),this._lastSymbolData.clear()}get(e,t="watchlist"){let n;const r=this._adaptersMap.get(e);if(r){const s=r.get(t);s?n=s:(n=new d(e,this._lastSymbolData,t),r.set(t,n))}else{n=new d(e,this._lastSymbolData,t);const r=new Map;r.set(t,n),this._adaptersMap.set(e,r)}return n}}},850935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{selectNextAvailableSymbol:()=>s,showContextMenu:()=>o,initWidget:()=>i,updateWidget:()=>a,updateWidgetOptions:()=>c,selectAllSymbols:()=>l,addOrUpdateSymbolList:()=>u,removeSymbolList:()=>d,setSymbolLists:()=>h,selectHotlist:()=>p,updatePosition:()=>m,
updateBulkPositions:()=>f,updateActiveList:()=>y});var r=n(189086);const s=(e,t,n,s)=>({type:r.SELECT_NEXT_AVAILABLE_SYMBOL,widgetId:e,currentSymbol:t,keyboardAction:n,cancelSetOnChart:s}),o=(e,t,n,s)=>({type:r.SHOW_CONTEXT_MENU,symbol:t,position:S(n),widgetId:e,size:s}),i=(e,t,n,s)=>({type:r.INIT_WIDGET,options:s,id:e,columns:n,tickerType:t}),a=(e,t)=>({type:r.UPDATE_WIDGET,widgetId:e,widget:t}),c=(e,t)=>({type:r.UPDATE_WIDGET_OPTIONS,widgetId:e,options:t}),l=e=>({type:r.SELECT_ALL_SYMBOLS,widgetId:e}),u=e=>({type:r.ADD_OR_UPDATE_SYMBOL_LIST,symbolList:e}),d=e=>({type:r.REMOVE_SYMBOL_LIST,id:e}),h=e=>({type:r.SET_SYMBOL_LISTS,symbolLists:e}),p=(e,t,n)=>({type:r.SELECT_HOTLIST,widgetId:e,exchange:t,group:n}),m=(e,t)=>({type:r.UPDATE_POSITIONS,symbol:e,position:t}),f=e=>({type:r.UPDATE_BULK_POSITIONS,map:e}),y=e=>({type:r.UPDATE_ACTIVE_LIST,id:e});function S(e){var t;const n=null===(t=e.touches)||void 0===t?void 0:t.map((e=>({clientX:e.clientX,clientY:e.clientY})));return{clientX:e.clientX,clientY:e.clientY,touches:n,attachToXBy:e.attachToXBy,attachToYBy:e.attachToYBy,boxHeight:e.boxHeight}}},217525:(e,t,n)=>{"use strict";n.d(t,{SET_IS_AUTHENTICATED:()=>i,authReducer:()=>c,watchAuth:()=>l});var r=n(254773),s=n(336349),o=n(776324);const i="AUTH__SET_IS_AUTHENTICATED";function a(e){return{type:i,isAuthenticated:e}}function c(e=Boolean(window.is_authenticated),t){return t.type===i?t.isAuthenticated:e}function*l(){const e=(0,r.eventChannel)((e=>{const t={};return window.loginStateChange.subscribe(t,(()=>e(window.is_authenticated))),()=>window.loginStateChange.unsubscribeAll(t)}));try{for(;;){const t=yield(0,s.take)(e);yield(0,s.put)((0,o.setup)({lists:[],timestamp:Date.now(),silent:!0})),yield(0,s.put)(a(t))}}finally{e.close()}}},189086:(e,t,n)=>{"use strict";n.d(t,{SELECT_NEXT_AVAILABLE_SYMBOL:()=>s,UPDATE_POSITIONS:()=>o,UPDATE_BULK_POSITIONS:()=>i,INIT_WIDGET:()=>a,SHOW_CONTEXT_MENU:()=>c,UPDATE_WIDGET:()=>l,UPDATE_WIDGET_OPTIONS:()=>u,SELECT_ALL_SYMBOLS:()=>d,ADD_OR_UPDATE_SYMBOL_LIST:()=>h,SET_SYMBOL_LISTS:()=>p,REMOVE_SYMBOL_LIST:()=>m,SELECT_HOTLIST:()=>f,UPDATE_ACTIVE_LIST:()=>y});const r=(0,n(66889).createActionTypeFactory)("WATCHLISTS"),s=r("SELECT_NEXT_AVAILABLE_SYMBOL"),o=r("UPDATE_POSITIONS"),i=r("UPDATE_BULK_POSITIONS"),a=r("INIT_WIDGET"),c=r("SHOW_CONTEXT_MENU"),l=r("UPDATE_WIDGET"),u=r("UPDATE_WIDGET_OPTIONS"),d=r("SELECT_ALL_SYMBOLS"),h=r("ADD_OR_UPDATE_SYMBOL_LIST"),p=r("SET_SYMBOL_LISTS"),m=r("REMOVE_SYMBOL_LIST"),f=r("SELECT_HOTLIST"),y=r("UPDATE_ACTIVE_LIST")},958613:(e,t,n)=>{"use strict";n.d(t,{isHotListId:()=>s,createSymbolListId:()=>o,hotListsSelector:()=>i});const r="###HOT###";function s(e){return"string"==typeof e&&0===e.indexOf(r)}function o(e,t){return r+`${e}.${t}`}const i=e=>{var t,n;return null!==(n=null===(t=e.hotLists)||void 0===t?void 0:t.lists)&&void 0!==n?n:null}},910865:(e,t,n)=>{"use strict";n.d(t,{getMarkedLists:()=>a,getMarkedListByColor:()=>c,getListSymbolsByColor:()=>l});var r=n(377145),s=n(797035),o=n(916611),i=n(396121);const a=(0,
r.createSelector)([o.getMarkedListsState],(e=>{const t=[];if(null!==e)for(const n of s.LIST_COLORS){const r=(0,s.getListByColor)(e,n);null!==r&&t.push((0,i.makeMarkedListFromRecord)(r))}return t})),c=(0,r.createSelector)([o.getMarkedListsState,(e,t)=>t],((e,t)=>{if(null===e)return null;const n=(0,s.getListByColor)(e,t);return null===n?null:(0,i.makeMarkedListFromRecord)(n)})),l=(0,r.createSelector)([c],(e=>{var t;return null!==(t=null==e?void 0:e.symbols)&&void 0!==t?t:null}))},396121:(e,t,n)=>{"use strict";n.d(t,{getColoredListTitle:()=>o,makeMarkedListFromRecord:()=>i,getSortByColorComparator:()=>a});var r=n(797035),s=n(777754);function o(e){return{[r.ListColor.Red]:s.t(null,void 0,n(97525)),[r.ListColor.Green]:s.t(null,void 0,n(971464)),[r.ListColor.Orange]:s.t(null,void 0,n(141393)),[r.ListColor.Purple]:s.t(null,void 0,n(53171)),[r.ListColor.Blue]:s.t(null,void 0,n(992447)),[r.ListColor.Cyan]:s.t(null,void 0,n(240527)),[r.ListColor.Pink]:s.t(null,void 0,n(816786))}[e]}function i(e){return{type:"colored",id:e.color,color:e.color,symbols:e.symbols,name:e.name||o(e.color),description:e.description,shared:e.shared}}function a(e){const t=-1===e?-1/0:1/0;return(n,r)=>{const s=c(n,t),o=c(r,t);return s===o?0:e*(s-o)}}function c(e,t){return null===e?t:r.LIST_COLORS.indexOf(e)}},38506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addWatchlistSymbolsThunk:()=>A,createWatchlistThunk:()=>w,getActiveWatchlistThunk:()=>O,getCustomWatchlistsThunk:()=>L,putCustomWatchlistsThunk:()=>I,removeWatchlistSymbolsThunk:()=>D,removeWatchlistThunk:()=>k,renameWatchlistThunk:()=>T,replaceWatchlistSymbolsThunk:()=>C,setActiveWatchlistThunk:()=>M,symbolListRepositorySaga:()=>_,validateWatchListSymbols:()=>v});var r=n(336349),s=n(776324),o=n(777754),i=n(564894),a=n(261309),c=n(850935),l=n(272001),u=n(779923),d=n(462282),h=n(15814),p=n(826939),m=n(497200);function*f(){for(yield(0,r.put)((0,m.asAction)(O(null)));;){yield(0,r.take)([s.remove,s.setup]);const e=yield(0,r.select)();null===(0,h.getCurrentViewableListByWidgetId)(e,p.WATCHLIST_WIDGET_ID)&&(yield(0,r.put)((0,m.asAction)(O(null))))}}var y=n(217525),S=n(586584),b=n(795394);const g=(0,l.getLogger)("Platform.Model.SymbolLists");function*_(){yield(0,r.fork)(y.watchAuth),yield(0,r.fork)(f)}function v(e){return new Promise((t=>{(0,b.resolveSymbolNameForAllDistinct)(e).then((e=>{t(e)}))}))}function E(e,t,r){(0,u.showWarning)({title:t||o.t(null,void 0,n(33115)),text:e},r)}function w(e){const t=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(n,r)=>{try{const r=await t.createWatchList(e);return null===r?null:(n((0,s.create)({id:r.id,name:r.name,symbols:r.symbols})),r.id)}catch(e){return E(e.message),null}}}const L=(0,d.respectLatest)((function(e){const t=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(n,r)=>{try{const r=await(0,d.respectAbort)(e,t.getCustomWatchLists());n((0,s.setup)({lists:r.map((e=>({id:e.id,name:e.name,description:e.description,symbols:e.symbols,shared:e.shared}))),timestamp:Date.now()}))}catch(e){(0,d.skipAbortError)(e)}}}));function I(e,t){
const n=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(r,o)=>{try{const o=await(0,d.respectAbort)(e,n.putWatchList(t));r((0,s.put)({id:o.id,name:o.name,description:o.description,symbols:o.symbols,shared:o.shared}))}catch(e){(0,d.rethrowAbortError)(e),E(e.message)}}}function T(e,t,n){const r=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(o,i)=>{o((0,s.rename)({id:t.id,name:n})),await(0,d.respectAbort)(e,r.renameWatchList(t,n))}}function C(e,t,r,c){const l=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(i,a)=>{if("custom"===t.type)if(r.length>1e3){const e=o.t(null,void 0,n(847746));E(o.t(null,void 0,n(66596)).format({number:1e3.toString()}),e,c)}else i((0,s.exact)({id:t.id,symbols:r})),await(0,d.respectAbort)(e,l.replaceSymbols(t,r));else g.logWarn("Trying to modify not a custom watchlist")}}function A(e,t,n,r){const o=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(i,a)=>{if("custom"===t.type){i((0,s.insert)({id:t.id,symbols:n}));try{await(0,d.respectAbort)(e,o.addSymbols(t,n))}catch(e){if((0,d.isAbortError)(e))throw e;const o=t.symbols.filter((e=>!n.includes(e)));i((0,s.exact)({id:t.id,symbols:o})),E(e.message,void 0,r)}}else g.logWarn("Trying to modify not a custom watchlist")}}function D(e,t,n){const r=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(o,i)=>{o((0,s.exclude)({id:t.id,symbols:n})),await(0,d.respectAbort)(e,r.removeSymbols(t,n))}}function k(e,t){const n=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(r,o)=>{await(0,d.respectAbort)(e,n.removeWatchList(t)),r((0,s.remove)({id:t.id}))}}function M(e,t){const n=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(r,s)=>{r((0,c.updateActiveList)(t)),await(0,d.respectAbort)(e,n.setActive(t))}}const O=(0,d.respectLatest)((function(e){const t=(0,i.service)(a.SYMBOL_LIST_REPOSITORY_BACKEND_SERVICE);return async(n,r)=>{try{const r=await(0,d.respectAbort)(e,t.getActive());if("custom"!==r.type){const t=(0,S.getMarkedSymbolsListServiceInstance)();t.isInited()||await(0,d.respectAbort)(e,new Promise((e=>{t.onInit(e)})))}else"custom"===r.type&&(r.symbols=await(0,d.respectAbort)(e,v(r.symbols))),n((0,s.put)({id:r.id,name:r.name,description:r.description,symbols:r.symbols,shared:r.shared}));n((0,c.updateActiveList)("custom"===r.type?r.id:r.color))}catch(e){(0,d.skipAbortError)(e)}}}))},497200:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{asAction:()=>r})},15814:(e,t,n)=>{"use strict";n.r(t),n.d(t,{columnsSelector:()=>v,currentHotListSelector:()=>M,getCurrentViewableListByWidgetId:()=>k,getCustomListById:()=>A,getCustomLists:()=>I,getCustomListsMap:()=>C,getCustomListsState:()=>d,getGlobalActiveID:()=>f,getGlobalActiveSymbolList:()=>D,getIsReadyCustomLists:()=>T,highlightedSymbolsSelector:()=>_,isAuthenticatedSelector:()=>h,isLoadingSelector:()=>O,makeGetIsContainedByMultiSelection:()=>B,positionSelector:()=>P,scrollToIdSelector:()=>b,selectedSymbolsSelector:()=>S,shouldDisplayPositionsSelector:()=>L,sortingSelector:()=>g,
tickerTypeSelector:()=>E,widgetOptionsSelector:()=>w,widgetSelector:()=>y});var r=n(377145),s=n(650151),o=n(776324),i=n(797035),a=n(916611),c=n(396121),l=n(958613);function u(e){return{type:"custom",id:e.id,name:e.name,description:e.description,symbols:e.symbols,shared:e.shared}}function d(e){return e.customLists}const h=e=>e.isAuthenticated,p=e=>e.widgets,m=(e,t)=>t,f=e=>e.activeSymbolList,y=(0,r.createSelector)([p,m],((e,t)=>e[t]||{})),S=(0,r.createSelector)(y,(e=>e.selectedSymbols||[])),b=(0,r.createSelector)(y,(e=>e.scrollToId)),g=(0,r.createSelector)(y,(e=>e.sorting||null)),_=(0,r.createSelector)(y,(e=>e.highlightedSymbols||null)),v=(0,r.createSelector)(y,(e=>e.columns)),E=(0,r.createSelector)(y,(e=>e.tickerType)),w=(0,r.createSelector)(y,(e=>e.options||{})),L=(0,r.createSelector)([w,h],((e,t)=>e.shouldDisplayPositions&&t)),I=(0,r.createSelector)(d,(e=>(0,o.getListIds)(e).map((t=>u((0,s.ensureNotNull)((0,o.getListById)(e,t))))))),T=(0,r.createSelector)([d],(e=>null!==e.timestamp)),C=(0,r.createSelector)([d],o.getListsMap),A=(0,r.createSelector)([d,(e,t)=>t],((e,t)=>{const n=(0,o.getListById)(e,t);return null===n?null:u(n)})),D=(0,r.createSelector)([d,a.getMarkedListsState,f],((e,t,n)=>{if(null===n)return null;if(null!==t&&(0,i.isListColor)(n)){const e=(0,i.getListByColor)(t,n);return null===e?null:(0,c.makeMarkedListFromRecord)(e)}{const t=(0,o.getListById)(e,n);return null===t?null:u(t)}})),k=(0,r.createSelector)([l.hotListsSelector,d,a.getMarkedListsState,p,m],((e,t,n,r,s)=>{var a;const d=r[s];if(void 0===d)return null;const h=d.listId;if(null===h)return null;if(null!==n&&(0,i.isListColor)(h)){const e=(0,i.getListByColor)(n,h);return null===e?null:(0,c.makeMarkedListFromRecord)(e)}if((0,l.isHotListId)(h))return null!==(a=null==e?void 0:e[h])&&void 0!==a?a:null;const p=(0,o.getListById)(t,h);return null!==p?u(p):null}));function M(e,t){const n=k(e,t);return"hot"!==(null==n?void 0:n.type)?null:n}const O=(0,r.createSelector)([y,k],((e,t)=>null===t||e.isLoading||!1)),P=(0,r.createSelector)([e=>e.positions,(e,t)=>t],((e,t)=>e[t]));function B(){const e=(0,r.createSelector)([(e,t)=>t.widgetId,e=>e.widgets],((e,t)=>t[e])),t=(0,r.createSelector)(e,(e=>e.selectedSymbols||[])),n=(0,r.createSelector)(t,(e=>new Set(e)));return(0,r.createSelector)([n,(e,t)=>t.symbol],((e,t)=>e.size>1&&e.has(t)))}},456746:(e,t,n)=>{"use strict";n.d(t,{isValidSeparatorItem:()=>b,separatorValToDisplayVal:()=>g,convertToSeparatorName:()=>_,buildUniqueName:()=>v,canUseMultipleLists:()=>E,isImportDataValid:()=>w,createSaveRenameDialog:()=>L,sortSymbols:()=>T,getTranslatedListTitle:()=>D,compareSymbols:()=>k,toPositionRecord:()=>M,isEqualRecords:()=>O,hasDuplicates:()=>P,getSymbolFromList:()=>B,findNextAvailableSymbol:()=>x,trackRemoveEvent:()=>R,openSymbolPage:()=>F,createConfirmRemoveText:()=>N});var r=n(650151),s=n(777754),o=n(87476),i=n(779923),a=n(575816),c=n(722840),l=n(120379),u=n(837657);if(45206!=n.j)var d=n(173777);var h=n(345848),p=n(494966),m=n(222255),f=n(396121),y=n(586584),S=n(795394);function b(e){return(0,u.isSeparatorItem)(e)}
function g(e){return e.replace(d.SEPARATOR_PREFIX,"")}function _(e){return d.SEPARATOR_PREFIX+e}function v(e,t,n=!0){const r=new Set(e),s=n?" 1":"";if(!r.has(t+s))return t+s;let o=2,i="";for(;o<=2e3&&(i=`${t} ${o}`,r.has(i));)o+=1;return i}function E(){return o.enabled("multiple_watchlists")&&window.user&&Boolean(window.user.is_pro)}function w(e){return"string"==typeof e&&!/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/.test(e)&&!/^[\r\n\t,]*$/.test(e)}function L(e,t,r){return()=>new Promise((o=>{(0,i.showRename)({title:e,initValue:t,text:s.t(null,void 0,n(83796))+":",maxLength:128,onRename:({newValue:e,dialogClose:t})=>{o(e),t()}},r)}))}function I(e){return e.replace("âˆ’","-")}function T(e,t,n,s,o){const i=function(e){const t=[],n=[];e.forEach(((e,t)=>{(0,u.isSeparatorItem)(e)&&n.push(t)}));let r=0;n.forEach((n=>{t.push({values:e.slice(r,n),separator:e[n]}),r=n+1}));const s=n[n.length-1],o=e.slice(s+1);return o.length>0&&t.push({values:o,separator:null}),t}(t);return i.forEach((t=>{t.values.sort(((t,i)=>{if("flag"===n){const e=(0,y.getMarkedSymbolsListServiceInstance)().getSymbolColor(t),n=(0,y.getMarkedSymbolsListServiceInstance)().getSymbolColor(i);return(0,f.getSortByColorComparator)(s)(e,n)}const u=c.quoteSessionAdapters.get(e).getLastSymbolData(t),d=c.quoteSessionAdapters.get(e).getLastSymbolData(i),h=C(u),m=C(d),S=(e,t)=>{if(!e||"flag"===n)return;var r;return"error"===e.status?void 0:o===a.TickerType.Description&&"short_name"===n?(r=e.values,(0,l.getTranslatedSymbolDescription)(r)||(0,p.safeShortName)(t)):e.values[n]},b=S(u,t),g=S(d,i);return function(e,t){const n=-1===t?-1/0:1/0;return(s,o,i,a)=>{if("rchp"!==e){if(void 0===s&&void 0===o)return 0;if(void 0===s)return-t;if(void 0===o)return t}switch(e){case"short_name":return t*(s===o?0:(0,r.ensure)(s)<(0,r.ensure)(o)?-1:1);case"rchp":return i!==a?i>a?-1:1:(i||(s=void 0),a||(o=void 0),A(s,o,t,n));case"last_price":case"change":case"change_percent":return A(s,o,t,n);case"volume":{const e=(0,r.ensure)(s)>=1e100?n:Number(s),i=(0,r.ensure)(o)>=1e100?n:Number(o);return t*(e-i)}default:return(0,r.ensure)(s)>(0,r.ensure)(o)?-1:1}}}(n,s)(b,g,h,m)}))})),function(e){const t=[];return e.forEach((({values:e,separator:n})=>{t.push(...e),null!==n&&t.push(n)})),t}(i)}function C(e){if(!e)return!1;const t="pre_market"===e.values.current_session,n="post_market"===e.values.current_session;return t||n}function A(e,t,n,r){let s=parseFloat(I(String(e))),o=parseFloat(I(String(t)));return s=isNaN(s)?r:s,o=isNaN(o)?r:o,n*(s-o)}function D(e){return"colored"===e.type?e.name||(0,f.getColoredListTitle)(e.color):e.name}function k(e,t){return e===t||(0,p.safeShortName)(e)===t}function M(e){return{symbol:e.symbol,side:e.side,qty:e.qty,avgPrice:e.avgPrice}}function O(e,t){return e===t||void 0!==e&&void 0!==t&&(e.side===t.side&&e.qty===t.qty&&e.avgPrice===t.avgPrice&&e.symbol===t.symbol)}function P(e){const t=new Map;for(let n=0;n<e.length;n++){const s=e[n].toUpperCase(),o=(0,p.safeShortName)(s);if(t.has(o)){const e=(0,r.ensureDefined)(t.get(o));if(e.has(s)||e.has(o)||s===o)return!0;e.add(s),t.set(o,e)
}else t.set(o,new Set([s]))}return!1}function B(e,t){if(t.includes(e))return e}function x(e,t,n){const r="next"===n;for(let n=e;r?n<t.length:n>=0;r?n++:n--)if(!(0,u.isSeparatorItem)(t[n])&&n!==e)return t[n];for(let n=r?0:t.length-1;r?n<e:n>e;r?n++:n--)if(!(0,u.isSeparatorItem)(t[n]))return t[n]}function R(e){e?(0,h.trackEvent)("Watchlist","Multi select","Remove"):(0,h.trackEvent)("Watchlist","Remove")}function F(e,t){(0,S.snapshoter)().getSnapshot(e,new Set(["type","exchange","typespecs"])).then((n=>{if("error"!==n.status){const{type:r,exchange:s,typespecs:o}=n.values;window.open((0,m.getSymbolPagePath)({proName:e,type:r,typespecs:o,exchange:s})),t&&t()}}))}function N(e){return s.t(null,{plural:"Do you really want to delete {count} selected symbols?",context:"symbols_and_drawings_count",count:e,replace:{count:e.toString()}},n(222045))}},837657:(e,t,n)=>{"use strict";n.d(t,{isSeparatorItem:()=>s});var r=n(173777);function s(e){return(0,r.isSeparatorItem)(e)}},66889:(e,t,n)=>{"use strict";function r(e){return t=>e+"__"+t}n.d(t,{createActionTypeFactory:()=>r})},951292:(e,t,n)=>{"use strict";n.d(t,{useOutsideEvent:()=>o});var r=n(50959),s=n(314308);function o(e){const{click:t,mouseDown:n,touchEnd:o,touchStart:i,handler:a,reference:c,ownerDocument:l=document}=e,u=(0,r.useRef)(null),d=(0,r.useRef)(new CustomEvent("timestamp").timeStamp);return(0,r.useLayoutEffect)((()=>{const e={click:t,mouseDown:n,touchEnd:o,touchStart:i},r=c?c.current:u.current;return(0,s.addOutsideEventListener)(d.current,r,a,l,e)}),[t,n,o,i,a]),c||u}},733410:(e,t,n)=>{"use strict";n.d(t,{KeyCode:()=>r,KeyboardListener:()=>o,makeKeyboardListener:()=>i});var r,s=n(50959);!function(e){e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(r||(r={}));class o{constructor(){this._handlers=new Map}registerHandlers(e){Object.keys(e).forEach((t=>{const n=parseInt(t);let r=e[n];if(Array.isArray(r)||(r=[r]),this._handlers.has(n)){const e=this._handlers.get(n);e&&r.forEach((t=>e.add(t)))}else this._handlers.set(n,new Set(r))}))}unregisterHandlers(e){Object.keys(e).forEach((t=>{const n=parseInt(t);let r=e[n];if(Array.isArray(r)||(r=[r]),this._handlers.has(n)){const e=this._handlers.get(n);e&&r.forEach((t=>e.delete(t)))}}))}deleteAllHandlers(){this._handlers=new Map}registerHandler(e,t){if(this._handlers.has(e)){const n=this._handlers.get(e);n&&n.add(t)}else this._handlers.set(e,new Set([t]))}unregisterHandler(e,t){if(this._handlers.has(e)){const n=this._handlers.get(e);n&&n.delete(t)}}listen(e){if(this._handlers.has(e.keyCode)){const t=this._handlers.get(e.keyCode);t&&t.forEach((t=>t(e)))}}}function i(e){var t,n,r;return(r=class extends s.PureComponent{constructor(e){super(e),this._keyboardListener=new o,this._listener=this._keyboardListener.listen.bind(this._keyboardListener)}componentDidMount(){this._registerHandlers(this.props.keyboardEventHandlers)}componentDidUpdate(e){
e.keyboardEventHandlers!==this.props.keyboardEventHandlers&&this._registerHandlers(this.props.keyboardEventHandlers)}render(){const{keyboardEventHandlers:t,...n}=this.props;return s.createElement(e,{...n,onKeyDown:this._listener})}_registerHandlers(e){e&&(this._keyboardListener.deleteAllHandlers(),this._keyboardListener.registerHandlers(e))}}).displayName=`KeyboardListener(${null!==(n=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==n?n:"Component"})`,r}},18182:(e,t,n)=>{"use strict";n.d(t,{MatchMedia:()=>s});var r=n(50959);class s extends r.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},157490:(e,t,n)=>{"use strict";n.d(t,{OutsideEvent:()=>s});var r=n(951292);function s(e){const{children:t,...n}=e;return t((0,r.useOutsideEvent)(n))}},368337:(e,t,n)=>{"use strict";n.d(t,{makeOverlapable:()=>o});var r=n(50959),s=n(707533);function o(e){return class extends r.PureComponent{render(){const{isOpened:t,root:n}=this.props;if(!t)return null;const o=r.createElement(e,{...this.props,zIndex:150});return"parent"===n?o:r.createElement(s.Portal,null,o)}}}},696828:(e,t,n)=>{"use strict";var r=n(87476),s=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}],o=function(){var e=[{pattern:"(",ctor:i},{pattern:")",ctor:a},{pattern:"+",ctor:l},{pattern:"-",ctor:u},{pattern:"*",ctor:d},{pattern:"/",ctor:h},{pattern:"^",ctor:p},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:.&]))|\.\d+/,ctor:S},{pattern:/\./,ctor:_},{pattern:r.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:.&]*|'.+?'/,ctor:y},{pattern:/'[^']*/,ctor:g},{pattern:/[\0-\x20\s]+/,ctor:o}];function t(e,t){var n=function(){};return n.prototype=t.prototype,e.prototype=new n,e}function n(){}function o(e){this.value=e}function i(){}function a(){}function c(){}function l(){}function u(){}function d(){}function h(){}function p(){}n.prototype.toString=function(){return this.value},t(o,n),t(i,n),i.prototype.value="(",t(a,n),a.prototype.value=")",t(c,n),t(l,c),l.prototype.value="+",l.prototype.precedence=0,
l.prototype.commutative=!0,t(u,c),u.prototype.value="-",u.prototype.precedence=0,u.prototype.commutative=!1,t(d,c),d.prototype.value="*",d.prototype.precedence=1,d.prototype.commutative=!0,t(h,c),h.prototype.value="/",h.prototype.precedence=1,h.prototype.commutative=!1,t(p,c),p.prototype.value="^",p.prototype.precedence=2,p.prototype.commutative=!1;var m=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,f=/[+\-/*]/;function y(e){this.value=e}function S(e){this.value=e}function b(e){this.value=e}function g(){y.apply(this,arguments)}function _(){S.apply(this,arguments)}t(y,n),y.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var e=f.test(this._ticker)?"'":"";return e+(this._exchange?this._exchange+":":"")+this._ticker+e}return this.value},y.prototype.parse=function(){var e=m.exec(this.value);e[1]&&(this._exchange=e[1]),this._ticker=e[2]},y.prototype.parseAsFutures=function(){this.hasOwnProperty("_ticker")||this.parse();for(var e=function(e){return s.some((function(t){return t.t===e}))},t=2;t>=1;--t){var n=this._ticker.slice(0,t);if(e(n)){this._root=n,this._contract=this._ticker.slice(t);break}}},y.prototype.exchange=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null==e?delete this._exchange:this._exchange=e+""},y.prototype.ticker=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null==e?delete this._ticker:this._ticker=e+"",delete this._root,delete this._contract},y.prototype.root=function(e){if(this.hasOwnProperty("_root")||this.parseAsFutures(),!(arguments.length>0))return this._root;null==e?delete this._root:(this._root=e+"",this._root&&(this._ticker=this._root+(this._contract||"")))},y.prototype.contract=function(e){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null==e?delete this._contract:(this._contract=e+"",this._root&&(this._ticker=this._root+this._contract))},t(S,n),S.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},S.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},b.prototype.toString=function(){return this.value},t(g,y),g.prototype.isIncomplete=!0,g.prototype.incompleteSuggest=function(){if("'"!==this.value)return String("'")},t(_,S),_.prototype.isIncomplete=!0;var v=new RegExp(e.map((function(e){return"("+("string"==typeof e.pattern?e.pattern.replace(/[\^$()[\]{}*+?|\\]/g,"\\$&"):e.pattern.source)+")"})).concat(".").join("|"),"g");function E(t,n){var r,s=[];e:for(;r=v.exec(t);){for(var i=e.length;i--;)if(r[i+1]){if(e[i].ctor){var a=new e[i].ctor(r[i+1]);a._offset=r.index,s.push(a)}continue e}var c=new b(r[0]);c._offset=r.index,s.push(c)}if(n&&n.recover){var l;for(i=s.length;i--;){var u=s[i];if(u instanceof S||u instanceof y){if(void 0!==l){var d=new y(""),h=s.splice(i,l-i+1,d);d.value=h.map((function(e){return e.value})).join("")}l=i}else u instanceof o||(l=void 0)}}return s}function w(e){
for(var t=[],n=0;n<e.length;n++)e[n]instanceof o||t.push(e[n]);return t}function L(e){e=w(e);for(var t,n=[],r=[],s=0;s<e.length;s++){var o=e[s];if(o instanceof c)r.length&&r[r.length-1].minPrecedence>o.precedence&&(r[r.length-1].minPrecedence=o.precedence);else if(o instanceof i)r.push(t={minPrecedence:1/0,openBraceIndex:s});else if(o instanceof a){var l=e[(t=r.pop()).openBraceIndex-1],u=e[s+1];u instanceof c&&!(u.precedence<=t.minPrecedence)||!(!(l instanceof c)||l.precedence<t.minPrecedence||l.precedence===t.minPrecedence&&l.commutative)||(n.unshift(t.openBraceIndex),n.push(s),r.length&&r[r.length-1].minPrecedence>t.minPrecedence&&(r[r.length-1].minPrecedence=t.minPrecedence))}}for(s=n.length;s--;)e.splice(n[s],1);return e}function I(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return(e=E(e)).filter((function(e){return e instanceof y})).map((function(e){return e.exchange()})).filter((function(e){return e}))}function T(e){return 1!==(e=I(e)).length?null:e[0]}function C(e,t){return(e=I(e)).some((function(e){return t.includes((e||"").toUpperCase())}))}function A(e){return e.join("")}return{tokenize:E,validate:function(e){if(r.enabled("charting_library_base"))return{currentState:"var"};for(var t="init",n="var",s=t,l={warnings:[],errors:[],isEmpty:!0},u=[],d=0;d<e.length;d++){if(!((p=e[d])instanceof o)){if(delete l.isEmpty,p.isIncomplete){var h={status:"incomplete",reason:"incomplete_token",offset:p._offset,token:p};if(p.incompleteSuggest&&(h.recover={append:p.incompleteSuggest()}),l.warnings.push(h),d!==e.length-1){h.status="error";continue}}if(p instanceof y||p instanceof S){if(s===n){l.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}s=n}else if(p instanceof c){if(s!==n){l.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}s="operator"}else if(p instanceof i){if(s===n){l.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}u.push(p),s=t}else if(p instanceof a){if(s!==n){l.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}u.pop()||l.errors.push({status:"error",reason:"unbalanced_brace",offset:p._offset,token:p,recover:{prepend:new i}}),s=n}else p instanceof b&&l.errors.push({status:"error",reason:"unparsed_entity",offset:p._offset,token:p})}}for(l.braceBalance=u.length,s!==n&&l.warnings.push({status:"incomplete"});u.length;){var p;h={status:"incomplete",reason:"unbalanced_brace",offset:(p=u.pop())._offset,token:p};s===n&&(h.recover={append:new a}),l.warnings.push(h)}return l.currentState=s,0===l.warnings.length&&delete l.warnings,0===l.errors.length&&delete l.errors,l},factorOutBraces:L,normalizeTokens:function(e){for(var t=0;t<e.length;t++)e[t].parse&&e[t].parse();return e},flip:function(e){var t=function(e){for(var t,n=0,r=1,s=2,l=3,u=n,d=0,p=0;p<e.length;p++){var m=e[p];if(!(m instanceof o))switch(u){case n:if(!(m instanceof S&&1==+m.value))return!1;u=r;break;case r:if(!(u===r&&m instanceof h))return!1;u=s,t=p+1;break;case s:
if(m instanceof i)u=l,d=1;else if(m instanceof c)return!1;break;case l:m instanceof i?d++:m instanceof a&&--d<=0&&(u=s)}}return e.slice(t)}(e);return L(t||[new S("1"),new h,new i].concat(e).concat(new a))},hasBatsSymbols:function(e){return C(e,["BATS"])},hasEodSymbols:function(e){return(e=T(e))&&-1!==e.toUpperCase().indexOf("_EOD")},hasChxjpySymbols:function(e){return C(e,["CHXJPY"])},hasFreeDelaySymbols:function(e){return C(e,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map((function(e){return e.exchange.toUpperCase()+"_DLY"})))},getExchange:T,getExchanges:I,isExchange:function(e,t){return!!(e=T(e))&&e.substring(0,t.length)===t},SymbolToken:y,IncompleteSymbolToken:g,NumberToken:S,BinaryOperatorToken:c,OpenBraceToken:i,CloseBraceToken:a,ticker:function(e){return new y(e).ticker()},shortName:function(e){if("string"!=typeof e)throw new TypeError("expression must be a string");var t=L(w(E(e)));return t.forEach((function(e){e instanceof y&&e.exchange(null)})),A(t)},normalize:function(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return A(L(w(E(e))))}}}();e.exports=o}}]);