(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[98709],{528474:(e,t,i)=>{"use strict";i.d(t,{blendColors:()=>r});var s=i(724377);const r=(e,t)=>(0,s.rgbaToString)((0,s.blendRgba)((0,s.parseRgba)(e),(0,s.parseRgba)(t)))},10199:(e,t,i)=>{"use strict";i.d(t,{openFinancialsWebview:()=>c});var s,r=i(583912);!function(e){e.Financials="financials",e.Forecast="forecast",e.Details="details",e.Technicals="technicals"}(s||(s={}));var o=i(675128),n=i(428745),a=i(736844);const l=new Set(["number_of_employees","web_site_url","business_description","founded","ceo","market_cap_basic","dividends_yield","price_earnings_ttm","earnings_per_share_basic_ttm","currency_code","fundamental_currency_code","float_shares_outstanding","total_shares_outstanding","total_revenue_fy_h","total_revenue_fq_h","total_revenue_fh_h","net_income_fy_h","net_income_fq_h","net_income_fh_h","total_assets_fy_h","total_assets_fq_h","total_assets_fh_h","total_liabilities_fy_h","total_liabilities_fq_h","total_liabilities_fh_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_operating_activities_fh_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_investing_activities_fh_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","cash_f_financing_activities_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","earnings_release_date_fq_h","earnings_release_date_fy_h","earnings_release_date_fh_h","earnings_release_next_date_fq","earnings_release_next_date_fy","earnings_release_next_date_fh","earnings_release_next_time","earnings_release_next_date","is_next_earnings_release_date_estimated","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_next_fy","earnings_per_share_forecast_next_fh","earnings_per_share_forecast_fq_h","earnings_per_share_forecast_fy_h","earnings_per_share_forecast_fh_h","earnings_per_share_fq_h","earnings_per_share_fy_h","earnings_per_share_fh_h","earnings_fiscal_period_fq_h","earnings_fiscal_period_fy_h","earnings_fiscal_period_fh_h","next_earnings_fiscal_period_fq","next_earnings_fiscal_period_fy","next_earnings_fiscal_period_fh","revenue_fq_h","revenue_fy_h","revenue_fh_h","revenue_forecast_fq_h","revenue_forecast_fy_h","revenue_forecast_fh_h","revenue_forecast_next_fq","revenue_forecast_next_fy","revenue_forecast_next_fh","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","dividend_amount_h","total_revenue_fy","gross_profit_fy","ebitda_fy","ebit_fy","net_income_fy","fiscal_period_fy_h","total_debt_fy_h","free_cash_flow_fy_h","cash_n_equivalents_fy_h","total_current_assets_fy","total_current_liabilities_fy","total_non_current_assets_fy","total_non_current_liabilities_fy","price_earnings_fy_h","price_sales_fy_h","fiscal_period_fy_h","market_cap_basic","diluted_net_income_ttm","total_revenue_ttm","price_earnings_current","price_sales_current"]),h=(0,o.lazyValue)((()=>new n.QuoteSessionSnapshoter({
name:"financials-webview-quotes",fields:[...l]})));let d;class u extends class{_createOpenRequest(e,t=new URLSearchParams){var i;const s=null!==(i=t.get("symbol"))&&void 0!==i?i:r.linking.symbol.value();return t.set("symbol",s),{execute(){const i=new URL(`webview/${e}/`,location.origin);return i.search=t.toString(),window.open(i,"_blank")},symbol:()=>s}}}{open(e){const t=this._createOpenRequest(s.Financials,e);h().getSnapshot(t.symbol(),l);t.execute().ChartQuoteSnapshotProvider={getQuoteSnapshot(){var e;const i=a.QUOTE_FIELDS_CACHE.get(t.symbol());return null!==(e=null==i?void 0:i.values)&&void 0!==e?e:{}}}}static getInstance(){return d||(d=new u),d}}function c(e){u.getInstance().open(e)}},497763:(e,t,i)=>{"use strict";i.d(t,{SERIES_COLORS:()=>r,getItemByIndex:()=>o,getColorByIndex:()=>n});var s=i(551238);const r=[s.colorsPalette["color-tv-blue-a200"],s.colorsPalette["color-iguana-green-300"],s.colorsPalette["color-tan-orange-500"],s.colorsPalette["color-sky-blue-400"],s.colorsPalette["color-ripe-red-a200"],s.colorsPalette["color-deep-blue-a100"],s.colorsPalette["color-banana-yellow-800"],s.colorsPalette["color-grapes-purple-a200"],s.colorsPalette["color-minty-green-300"],s.colorsPalette["color-berry-pink-300"],s.colorsPalette["color-tv-blue-a100"],s.colorsPalette["color-tan-orange-a200"],s.colorsPalette["color-iguana-green-400"],s.colorsPalette["color-ripe-red-400"],s.colorsPalette["color-sky-blue-300"],s.colorsPalette["color-banana-yellow-600"],s.colorsPalette["color-berry-pink-a200"],s.colorsPalette["color-tv-blue-200"],s.colorsPalette["color-banana-yellow-900"]];function o(e,t){const i=e[t%e.length];return i||e[0]}function n(e,t=r){return o(t,e)}},436901:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_MAX_DATA_ARRAY_LENGTH:()=>s,FULL_MAX_DATA_ARRAY_LENGTH:()=>r});const s=5,r=7},610203:(e,t,i)=>{"use strict";i.d(t,{PeriodId:()=>s,convertFrequencyToPeriod:()=>d,PAST_PERFORMANCE_SET:()=>u,FINANCIALS_SETS:()=>c,findFinancialsSetIndex:()=>_,getDataFromQuotes:()=>m,getPeriodData:()=>y,getChartSeriesArray:()=>v,generateTooltipValues:()=>f,getPeriodsDataFromQuotes:()=>b,getFinancialsDataFromQuotes:()=>g,isQuoteValuesNull:()=>S});var s,r=i(650151),o=i(777754),n=i(497763),a=i(530254),l=i(499791),h=i(436901);function d(e){return e&&2===e?s.HalfYear:s.Quarter}!function(e){e.Year="FY",e.Quarter="FQ",e.HalfYear="FH"}(s||(s={}));const u=()=>({id:"income statements",title:o.t(null,void 0,i(273266)),chartType:"compare",marginTitle:o.t(null,void 0,i(404871)),fields:["total_revenue","net_income"]}),c=()=>[{id:"income statements",title:o.t(null,void 0,i(506823)),chartType:"compare",marginTitle:o.t(null,void 0,i(404871)),fields:["total_revenue","net_income"]},{id:"balance sheet",title:o.t(null,void 0,i(730737)),chartType:"compare",marginTitle:o.t(null,void 0,i(560048)),fields:["total_assets","total_liabilities"]},{id:"cash flow",title:o.t(null,void 0,i(822755)),chartType:"lines",fields:["cash_f_operating_activities","cash_f_investing_activities","cash_f_financing_activities"]}];function _(e){return c().findIndex((t=>t.id===e))||0}
function p(e){return{total_revenue:o.t(null,void 0,i(259285)),net_income:o.t(null,void 0,i(485672)),total_assets:o.t(null,void 0,i(697554)),total_liabilities:o.t(null,void 0,i(475385)),cash_f_operating_activities:o.t(null,void 0,i(404621)),cash_f_investing_activities:o.t(null,void 0,i(418959)),cash_f_financing_activities:o.t(null,void 0,i(517831)),fiscal_period:"Fiscal Period"}[e]}function m(e,t,i,s=h.DEFAULT_MAX_DATA_ARRAY_LENGTH){const r=i[t];if(!r)return[];return r[e].slice(0,s).reverse()}function y(e,t,i=h.DEFAULT_MAX_DATA_ARRAY_LENGTH){const s=e[t];if(s)return s.slice(0,i).reverse()}function v(e,t,i,s=0,o){switch(e.chartType){case"compare":const a=e.fields.map(((e,a)=>({type:"bar",name:p((0,r.ensureDefined)(e)),valueType:"numbers",values:(0,r.ensureDefined)(m((0,r.ensureDefined)(e),t,(0,r.ensureDefined)(i))),defaultColor:(0,n.getColorByIndex)(a+s,o),showInLegend:!0,buildTooltip:f}))),l=a[0].values.map(((e,t)=>0===e?0:a[1].values[t]/e*100));return a.push({type:"line",name:(0,r.ensureDefined)(e.marginTitle),valueType:"percents",values:l,defaultColor:(0,n.getColorByIndex)(e.fields.length+s),showInLegend:!0,buildTooltip:f}),a;case"lines":return e.fields.map(((e,o)=>({type:"line",name:p((0,r.ensureDefined)(e)),valueType:"numbers",values:(0,r.ensureDefined)(m((0,r.ensureDefined)(e),t,(0,r.ensureDefined)(i))),defaultColor:(0,n.getColorByIndex)(o+s),showInLegend:!0,buildTooltip:f})));default:return[]}}function f(e,t,i,s,o=!0){const n=e.values[i];if(null===n)return null;const h=(0,a.format)(n,e.valueType);return[{title:o?(0,l.capitalizeFirstLetter)(e.name.toLowerCase()):e.name,color:null!=s?s:(0,r.ensureDefined)(e.defaultColor),value:h}]}function b(e){const{fiscal_period_fy_h:t,fiscal_period_fq_h:i,fiscal_period_fh_h:r}=e;if(t||i||r)return{[s.Year]:t,[s.Quarter]:i,[s.HalfYear]:r}}function g(e){const{total_revenue_fy_h:t,total_revenue_fq_h:i,total_revenue_fh_h:r,net_income_fy_h:o,net_income_fq_h:n,net_income_fh_h:a,total_assets_fy_h:l,total_assets_fq_h:h,total_assets_fh_h:d,total_liabilities_fy_h:u,total_liabilities_fq_h:c,total_liabilities_fh_h:_,cash_f_operating_activities_fy_h:p,cash_f_operating_activities_fq_h:m,cash_f_operating_activities_fh_h:y,cash_f_investing_activities_fy_h:v,cash_f_investing_activities_fq_h:f,cash_f_investing_activities_fh_h:g,cash_f_financing_activities_fy_h:w,cash_f_financing_activities_fq_h:x,cash_f_financing_activities_fh_h:C,fiscal_period_fy_h:P,fiscal_period_fq_h:I,fiscal_period_fh_h:T}=e,D=b(e);if(D){const{[s.Year]:e,[s.Quarter]:b,[s.HalfYear]:R}=D;return{[s.Year]:!e||S(t)?void 0:{total_revenue:t,net_income:o,total_assets:l,total_liabilities:u,cash_f_operating_activities:p,cash_f_investing_activities:v,cash_f_financing_activities:w,fiscal_period:P},[s.Quarter]:!b||S(i)?void 0:{total_revenue:i,net_income:n,total_assets:h,total_liabilities:c,cash_f_operating_activities:m,cash_f_investing_activities:f,cash_f_financing_activities:x,fiscal_period:I},[s.HalfYear]:R?{total_revenue:r,net_income:a,total_assets:d,total_liabilities:_,cash_f_operating_activities:y,cash_f_investing_activities:g,
cash_f_financing_activities:C,fiscal_period:T}:void 0}}}function S(e){return!e||e.every((e=>null===e))}},262909:(e,t,i)=>{"use strict";i.d(t,{showFinancialsDialog:()=>n});var s=i(633457);let r;class o extends s.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}static getInstance(){return r||(r=new o),r}_load(e){return Promise.all([i.e(68716),i.e(57188),i.e(88230),i.e(86256),i.e(91901),i.e(59333),i.e(63980),i.e(18619),i.e(7624),i.e(12275),i.e(36037),i.e(33335),i.e(96972),i.e(71140),i.e(83772),i.e(1428),i.e(1011),i.e(75398),i.e(52701),i.e(36720),i.e(63737),i.e(48484),i.e(54063),i.e(47507),i.e(95248),i.e(82098),i.e(8009),i.e(56652),i.e(78122),i.e(62839),i.e(28729),i.e(52196),i.e(65592),i.e(52860),i.e(87495),i.e(149),i.e(34077),i.e(29388),i.e(43188),i.e(79324),i.e(9878),i.e(78007),i.e(50690),i.e(11608),i.e(67261),i.e(51631),i.e(45870),i.e(24878)]).then(i.bind(i,356729)).then((t=>{var i,s;return null===(i=this._dialog)||void 0===i||i.hide(),null===(s=this._dialog)||void 0===s||s.visible().unsubscribe(this._subscribe),this._dialog=new t.FinancialsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}))}}function n(e){o.getInstance().show(e)}},131726:e=>{e.exports={content:"content-meCuRfZr",titleWrapper:"titleWrapper-meCuRfZr",title:"title-meCuRfZr",subtitle:"subtitle-meCuRfZr",text:"text-meCuRfZr",icon:"icon-meCuRfZr",group:"group-meCuRfZr",groupIcon:"groupIcon-meCuRfZr",beforeMarketOpen:"beforeMarketOpen-meCuRfZr",afterMarketClose:"afterMarketClose-meCuRfZr",groupTitle:"groupTitle-meCuRfZr",groupRow:"groupRow-meCuRfZr",groupCell:"groupCell-meCuRfZr",link:"link-meCuRfZr",mob:"mob-meCuRfZr",mini:"mini-meCuRfZr",newsContent:"newsContent-meCuRfZr"}},633457:(e,t,i)=>{"use strict";i.d(t,{DialogRenderer:()=>o});var s=i(988411),r=i.n(s);class o{constructor(){this._container=document.createElement("div"),this._visibility=new(r())(!1)}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},121525:(e,t,i)=>{"use strict";i.d(t,{LollipopGroupIcons:()=>s,LollipopTooltipContentRow:()=>h});var s,r=i(50959),o=i(497754),n=i.n(o),a=i(83436),l=i(131726);function h(e){const{name:t,value:i,style:s,valueStyle:o,onValueClick:h,valueRightIcon:d,className:u}=e;return r.createElement("div",{className:n()(l.groupRow,u),style:s},t&&r.createElement("div",{className:l.groupCell},r.createElement("span",{className:l.text},t)),r.createElement("div",{className:l.groupCell},r.createElement("span",{className:l.text,style:o,onClick:h},i),d&&r.createElement(a.Icon,{icon:d.iconContent,className:n()(l.groupIcon,d.iconClass,"apply-common-tooltip"),title:d.tooltipText})))}!function(e){e[e.BeforeMarketOpen=l.beforeMarketOpen]="BeforeMarketOpen",e[e.AfterMarketClose=l.afterMarketClose]="AfterMarketClose"}(s||(s={}))},20651:(e,t,i)=>{"use strict";i.d(t,{barFunctionByStyle:()=>r});var s=i(311854);function r(e,t){switch(e){case 12:return(0,
s.barFunction)("low","low","close");case 2:case 3:case 10:case 13:return(0,s.barFunction)(null!=t?t:"close");default:return(0,s.barFunction)("close","open")}}},262673:(e,t,i)=>{"use strict";function s(e,t,i=0){t.setValue(e.value());const s={};return e.subscribe(s,(e=>{t.setValue(e.value())})),1===i&&t.subscribe(s,(t=>{e.setValue(t.value())})),()=>{e.unsubscribeAll(s),1===i&&t.unsubscribeAll(s)}}i.d(t,{bindProperties:()=>s})},232371:(e,t,i)=>{"use strict";i.d(t,{getDataVendorString:()=>r});var s=i(87476);function r(e){return null==e||s.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},927508:(e,t,i)=>{"use strict";i.d(t,{customFormatters:()=>s});const s={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},220479:(e,t,i)=>{"use strict";function s(e,t){const i=Math.floor(t/1e4)%1e4,s=Math.floor(t/100)%100-1,r=t%100;return e.format(new Date(Date.UTC(i,s,r)))}i.d(t,{formatYYYYMMDD:()=>s})},885418:(e,t,i)=>{"use strict";function s(e){const t=Math.abs(Math.round(1e3*e)/1e3).toFixed(3).split("."),i=t[0];let s=t[1];return"0"===s[s.length-1]&&(s=s.slice(0,-1)),`${e<0?"âˆ’":""}${i}.${s}`}i.d(t,{roundToThirdDigit:()=>s})},460321:(e,t,i)=>{"use strict";i.d(t,{LollipopPaneView:()=>c});var s=i(327714),r=i(650151),o=i(86441),n=i(758337),a=i(28035),l=i(837512),h=i(274131),d=i(49568),u=i(858063);class c{constructor(e,t,i){this._invalidated=!1,this._renderer=new a.CompositeRenderer,this._textWidthCache=new l.TextWidthCache,this._stylesCache=null,this._lollipops={},this._lollipopsCounter=0,this._lastClickedId=null,this.onPaneBgChange=()=>{this._recreateStyles(this._model)},this._lastClickedId=null,this._model=e,this._source=t,this._clickHandler=i,this._recreateStyles(e),e.backgroundColor().subscribe(this.onPaneBgChange),e.mainSeries().onSymbolIntervalChanged().subscribe(this,this._onSymbolOrIntervalChanged)}destroy(){this._model.backgroundColor().unsubscribe(this.onPaneBgChange),this._model.mainSeries().onSymbolIntervalChanged().unsubscribeAll(this)}processClickOutside(e){var t;if(null===this._lastClickedId||!e)return void this.clearLastClicked();let i=null;if(function(e){return void 0!==e.touches}(e)){if(1!==e.touches.length)return;{const t=(0,r.ensureNotNull)(e.target).getBoundingClientRect(),s=e.touches[0];i=new o.Point(s.clientX-t.left,s.clientY-t.top)}}else i=new o.Point(e.offsetX,e.offsetY);const s=this._renderer.hitTest(i,{physicalHeight:0,physicalWidth:0,pixelRatio:1,cssHeight:0,cssWidth:0});null!==s&&(null===(t=s.data())||void 0===t?void 0:t.activeItem)===(0,r.ensureDefined)(this._lollipops[this._lastClickedId]).itemIndex||this.clearLastClicked()}clearLastClicked(){const e=null!==this._lastClickedId&&this._lollipops[this._lastClickedId]||null;null!==e&&(e.active=!1),
this._lastClickedId=null}getLastClickedLollipopId(){return this._lastClickedId}update(){this._invalidated=!0}afterUpdate(e,t,i,s){}getStyle(e){const t=e.active?"active":e.hovered?"hovered":"default";let i=t;if(e.stack&&(i+="_stack:"+e.stack),"active"===i)return this._activeStyle;if("hovered"===i)return this._hoveredStyle;if("default"===i)return this._defaultStyle;if(this._stylesCache||(this._stylesCache={}),!this._stylesCache[i]){const s=(0,n.clone)("active"===t?this._activeStyle:"hovered"===t?this._hoveredStyle:this._defaultStyle);e.stack&&(s.lollipop.incHeight=25*e.stack),this._stylesCache[i]=s}return this._stylesCache[i]}hasTooltip(e){return!0}_getY(){let e=0;const t=this._model.panes();for(let i=t.length;i--;){const s=t[i];s.containsMainSeries()&&(e+=s.height())}return e}_showBarLine(e){return this.hasTooltip(e)&&(e.hovered||e.active)}_createRenderers(e,t){this._renderer.clear();const i=(0,s.size)({width:e,height:t});for(const e in this._lollipops)if(this._lollipops.hasOwnProperty(e)){const t=(0,r.ensureDefined)(this._lollipops[e]);if(t.visible){const e=this.getStyle(t),s={id:t.id,centerPoint:new o.Point(t.basePoint.x,t.basePoint.y-e.lollipop.bottom-e.lollipop.height/2-(e.lollipop.incHeight||0)),style:e},r={activeItem:t.itemIndex,hideCrosshairLinesOnHover:!0,clickHandler:this._lollipopMouseClickHandler.bind(this,s,i),tapHandler:this._lollipopMouseClickHandler.bind(this,s,i)};if(this._renderer.append(this._createRendererForLollipop(s,r)),this._showBarLine(t)){const{strokeStyle:i,lineStyle:s,lineWidth:r}=e.barLine,o={color:i,linestyle:s,linewidth:r,x:t.basePoint.x,top:0,bottom:t.basePoint.y-e.lollipop.bottom-e.lollipop.height},n=new h.VerticalLineRenderer;n.setData(o),this._renderer.insert(n,0)}}}}_recreateStyles(e){this._stylesCache=null}_createRendererForLollipop(e,t){return new d.LollipopRenderer(e,new u.HitTestResult(u.HitTestResult.CUSTOM,t),this._textWidthCache)}_onSymbolOrIntervalChanged(){this._lollipops={},this._lollipopsCounter=0,this._renderer.clear(),this.clearLastClicked()}_lollipopMouseClickHandler(e,t,i){i.preventDefault();const s=e.id;if(this._lastClickedId=this._lastClickedId===s?null:s,null===this._lastClickedId)return;const n={target:i.target,targetSize:t,point:new o.Point(e.centerPoint.x,e.centerPoint.y-e.style.lollipop.height/2-8),marginTop:15};this._clickHandler(n,(()=>{const e=(0,r.ensureDefined)(this._lollipops[s]);return this._createTooltipContent(e)}))}}},112824:(e,t,i)=>{"use strict";function s(e,t){return e.pixelRatio===t.pixelRatio}i.d(t,{areEqualPaneRenderParams:()=>s})},49568:(e,t,i)=>{"use strict";i.d(t,{LollipopRenderer:()=>h});var s=i(934026),r=i(86441),o=i(631586),n=i(914679),a=i(741341),l=i(837291);class h{constructor(e,t,i){this._data=e,this._hittest=t,this._textWidthCache=i}draw(e,t){const i=t.pixelRatio,s=this._data.centerPoint,o=Math.round(s.x*i),n=Math.round(s.y*i),a=Math.max(1,Math.floor(i))%2/2,l=new r.Point(o+a,n-a);this._drawLollipop(e,l,t),this._drawLabel(e,l,t.pixelRatio)}hitTest(e,t){const i=(0,
l.interactionTolerance)().esd,o=this._data.centerPoint.y-this._data.style.lollipop.height/2-i,n=this._data.centerPoint.x-this._data.style.lollipop.width/2-i,a=(0,r.box)(new r.Point(n,o),new r.Point(n+this._data.style.lollipop.width+2*i,o+this._data.style.lollipop.height+2*i));return(0,s.pointInBox)(e,a)?this._hittest:null}_drawLollipop(e,t,i){const s=this._data.style,r=i.pixelRatio,a=Math.max(1,Math.floor(r));let l=Math.round(s.lollipop.width*r);l%2!=a%2&&(l+=1);const h=l/2;s.lollipop.fillCircle&&s.lollipop.backgroundColor&&(e.fillStyle=s.lollipop.backgroundColor,(0,n.createCircle)(e,t.x,t.y,h),e.fill());const d=Math.round(s.lollipop.lineWidth*r);e.strokeStyle=s.lollipop.strokeStyle,e.lineWidth=d,(0,n.setLineStyle)(e,o.LINESTYLE_SOLID);const u=h-Math.round(1*r+d/2);(0,n.createCircle)(e,t.x,t.y,u),s.lollipop.fillCircle&&s.lollipop.fillStyle&&(e.fillStyle=s.lollipop.fillStyle,e.fill()),e.stroke()}_drawLabel(e,t,i){const s=this._data.style.lollipop.text,r=s.label;if(""===r)return;e.textAlign="center",e.textBaseline="middle",e.fillStyle=s.strokeStyle,e.font=s.font;const o=this._textWidthCache.yMidCorrection(e,r);e.translate(t.x,t.y+((s.deltaY||0)+o)*i),(0,a.drawScaled)(e,i,(()=>{e.fillText(r,0,0)}))}}},544445:(e,t,i)=>{"use strict";i.d(t,{calculateLabelPosition:()=>c,getTextBoundaries:()=>_,wordWrap:()=>p,TextRenderer:()=>I});var s=i(86441),r=i(650151),o=i(934026),n=i(768038),a=i(858063),l=i(914679),h=i(758337),d=i(741341),u=i(631586);function c(e,t,i,r,o){const n=.5*(t.x+i.x);let a=i.y;return t.y>i.y?(a-=e.height/2+r.y,a=Math.max(e.height/2,a)):(a+=e.height/2+r.y,a=Math.min(o-e.height/2,a)),new s.Point(n,a)}function _(e,t,i){if(e.isOutOfScreen(t,i))return null;const s=e.getPolygonPoints();return 0===s.length?null:s}function p(e,t,i){i=(0,h.isString)(i)?parseInt(i):i,e+="";const s=!(0,h.isNumber)(i)||!isFinite(i)||i<=0?e.split(/\r\n|\r|\n|$/):e.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/);if(s[s.length-1]||s.pop(),!(0,h.isNumber)(i)||!isFinite(i)||i<=0)return s;const r=[];for(let e=0;e<s.length;e++){const o=s[e],n=(0,d.measureText)(o,t).width;if(n<=i){r.push(o);continue}const a=o.split(/([-)\]},.!?:;])|(\s+)/);let l=0;for(;a.length;){let e=~~(i/n*(a.length+2)/3);if(e<=0||(0,d.measureText)(a.slice(0,3*e-1).join(""),t).width<=i)for(;(0,d.measureText)(a.slice(0,3*(e+1)-1).join(""),t).width<=i;)e++;else for(;e>0&&(0,d.measureText)(a.slice(0,3*--e-1).join(""),t).width>i;);if(e>0)r.push(a.slice(0,3*e-1).join("")),a.splice(0,3*e);else{const e=a[0]+(a[1]||"");if(l=1===l?1:~~(i/(0,d.measureText)(e,t).width*e.length),(0,d.measureText)(e.substring(0,l),t).width<=i)for(;(0,d.measureText)(e.substring(0,l+1),t).width<=i;)l++;else for(;l>1&&(0,d.measureText)(e.substring(0,--l),t).width>i;);l<1&&(l=1),r.push(e.substring(0,l)),a[0]=e.substring(l),a[1]=""}if((0,d.measureText)(a.join(""),t).width<=i){r.push(a.join(""));break}}}return r}function m(e,t,i){if(0===i)return e.clone();const r=(e.x-t.x)*Math.cos(i)-(e.y-t.y)*Math.sin(i)+t.x,o=(e.x-t.x)*Math.sin(i)+(e.y-t.y)*Math.cos(i)+t.y;return new s.Point(r,o)}function y(e,t){
const i=Math.round(t+2*S(e)+2*b(e));return i%2?i+1:i}function v(e,t){return x(e)*t+w(e)*(t-1)+2*g(e)+2*f(e)}function f(e){return void 0!==e.boxPaddingVert?e.boxPaddingVert*P(e):void 0!==e.boxPadding?e.boxPadding*P(e):x(e)/3}function b(e){return void 0!==e.boxPaddingHorz?e.boxPaddingHorz*P(e):void 0!==e.boxPadding?e.boxPadding*P(e):x(e)/3}function g(e){return(e.backgroundVertInflate||0)*P(e)}function S(e){return(e.backgroundHorzInflate||0)*P(e)}function w(e){return(e.padding||0)*P(e)}function x(e){return Math.ceil(C(e)*P(e))}function C(e){return e.fontsize||e.fontSize||30}function P(e){const t=Math.min(1,Math.max(.2,Math.min(e.scaleX||1,e.scaleY||1)));if(1===t)return t;const i=C(e);return Math.ceil(t*i)/i}class I{constructor(e,t){this._data=null,this._internalData=null,this._boxSize=null,this._polygonPoints=null,this._linesInfo=null,this._fontInfo=null,this._hittest=t||new a.HitTestResult(a.HitTestResult.MOVEPOINT,{areaName:a.AreaName.Text}),void 0!==e&&this.setData(e)}setData(e){null!==e?(e.horzTextAlign||(e.horzTextAlign=e.horzAlign),!function(e,t){if(null===e||null===t)return null===e==(null===t);if(void 0===e.points!=(void 0===t.points))return!1;if(void 0!==e.points&&void 0!==t.points){if(e.points.length!==t.points.length)return!1;for(let r=0;r<e.points.length;++r)if(i=e.points[r],s=t.points[r],i.x!==s.x||i.y!==s.y)return!1}var i,s;return e.text===t.text&&e.vertAlign===t.vertAlign&&e.horzAlign===t.horzAlign&&e.horzTextAlign===t.horzTextAlign&&e.font===t.font&&e.offsetX===t.offsetX&&e.offsetY===t.offsetY&&e.bold===t.bold&&e.italic===t.italic&&e.fontsize===t.fontsize&&e.fontSize===t.fontSize&&e.backgroundRoundRect===t.backgroundRoundRect&&e.forceTextAlign===t.forceTextAlign&&e.wordWrapWidth===t.wordWrapWidth&&e.forceCalculateMaxLineWidth===t.forceCalculateMaxLineWidth&&e.padding===t.padding&&e.scaleY===t.scaleY&&e.scaleX===t.scaleX&&e.highlightBorder===t.highlightBorder&&e.backgroundHorzInflate===t.backgroundHorzInflate&&e.backgroundVertInflate===t.backgroundVertInflate&&e.boxPadding===t.boxPadding&&e.boxPaddingVert===t.boxPaddingVert&&e.boxPaddingHorz===t.boxPaddingHorz&&e.angle===t.angle&&e.maxHeight===t.maxHeight&&(0,h.deepEquals)(e.boxShadow,t.boxShadow)[0]}(this._data,e)?(this._data=e,this._internalData=null,this._boxSize=null,this._polygonPoints=null,this._linesInfo=null,this._fontInfo=null):this._data=e):this._data=null}hitTest(e){return null===this._data||void 0===this._data.points||0===this._data.points.length?null:(0,o.pointInPolygon)(e,this.getPolygonPoints())?this._hittest:null}doesIntersectWithBox(e){return null!==this._data&&void 0!==this._data.points&&0!==this._data.points.length&&(0,o.pointInBox)(this._data.points[0],e)}measure(){if(null===this._data)return{width:0,height:0};const e=this._getBoxSize();return{width:e.boxWidth,height:e.boxHeight}}rect(){if(null===this._data)return{x:0,y:0,width:0,height:0};const e=this._getInternalData();return{x:e.boxLeft,y:e.boxTop,width:e.boxWidth,height:e.boxHeight}}isOutOfScreen(e,t){
if(null===this._data||void 0===this._data.points||0===this._data.points.length)return!0;const i=this._getInternalData();if(i.boxLeft+i.boxWidth<0||i.boxLeft>e){const i=(0,s.box)(new s.Point(0,0),new s.Point(e,t));return this.getPolygonPoints().every((e=>!(0,o.pointInBox)(e,i)))}return!1}setPoints(e,t){(0,r.ensureNotNull)(this._data).points=e,this._hittest=t||new a.HitTestResult(a.HitTestResult.MOVEPOINT)}fontStyle(e){return null===this._data?"":this._getFontInfo().fontStyle}wordWrap(e,t,i){return p(e,i||this.fontStyle(),t)}draw(e,t){if(null===this._data||void 0===this._data.points||0===this._data.points.length)return;if(this.isOutOfScreen(t.cssWidth,t.cssHeight))return;const i=t.pixelRatio,s=this._getInternalData(),r=this._getRotationPoint().scaled(i);e.save(),e.translate(r.x,r.y),e.rotate(this._data.angle||0),e.translate(-r.x,-r.y);const o=this._getFontInfo().fontSize;e.textBaseline=s.textBaseLine,e.textAlign=s.textAlign,e.font=this.fontStyle();const{scaledLeft:n,scaledRight:a,scaledTop:h,scaledBottom:c}=function(e,t){const i=Math.round(e.boxLeft*t),s=Math.round(e.boxTop*t);return{scaledLeft:i,scaledRight:i+Math.round(e.boxWidth*t),scaledTop:s,scaledBottom:s+Math.round(e.boxHeight*t)}}(s,i);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){const t=this._data.borderWidth||Math.max(o/12,1),s=Math.round(t*i),r=s/2;let d=!1;if(this._data.boxShadow){e.save();const{shadowColor:t,shadowBlur:i,shadowOffsetX:s=0,shadowOffsetY:r=0}=this._data.boxShadow;e.shadowColor=t,e.shadowBlur=i,e.shadowOffsetX=s,e.shadowOffsetY=r,d=!0}if(this._data.backgroundRoundRect)this._data.backgroundColor&&((0,l.drawRoundRect)(e,n,h,a-n,c-h,this._data.backgroundRoundRect*i),e.fillStyle=this._data.backgroundColor,e.fill(),d&&(e.restore(),d=!1)),this._data.borderColor&&((0,l.drawRoundRect)(e,n-r,h-r,a-n+s,c-h+s,this._data.backgroundRoundRect*i+s),e.strokeStyle=this._data.borderColor,e.lineWidth=s,e.stroke(),d&&(e.restore(),d=!1));else if(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fillRect(n,h,a-n,c-h),d&&(e.restore(),d=!1)),this._data.borderColor||this._data.highlightBorder){let t;this._data.borderColor?(e.strokeStyle=this._data.borderColor,t=s):(e.strokeStyle=this._data.color,(0,l.setLineStyle)(e,u.LINESTYLE_DASHED),t=Math.max(1,Math.floor(i))),e.lineWidth=t,e.beginPath(),e.moveTo(n-t/2,h-t/2),e.lineTo(n-t/2,c+t/2),e.lineTo(a+t/2,c+t/2),e.lineTo(a+t/2,h-t/2),e.lineTo(n-t/2,h-t/2),e.stroke(),d&&e.restore()}}e.fillStyle=this._data.color;const _=(n+Math.round(s.textStart*i))/i,p=.05*o;let m=(h+Math.round((s.textTop+p)*i))/i;const y=w(this._data),v=this.getLinesInfo();for(const t of v.lines)(0,d.drawScaled)(e,i,(()=>e.fillText(t,_,m))),m+=o+y;e.restore()}getPolygonPoints(){if(null!==this._polygonPoints)return this._polygonPoints;if(null===this._data)return[];const e=this._data.angle||0,{boxLeft:t,boxTop:i,boxWidth:r,boxHeight:o}=this._getInternalData(),n=this._getRotationPoint()
;return this._polygonPoints=[m(new s.Point(t,i),n,e),m(new s.Point(t+r,i),n,e),m(new s.Point(t+r,i+o),n,e),m(new s.Point(t,i+o),n,e)],this._polygonPoints}getLinesInfo(){if(null===this._linesInfo){const e=(0,r.ensureNotNull)(this._data);let t=this.wordWrap(e.text,e.wordWrapWidth);if(void 0!==e.maxHeight){const i=function(e){const t=(0,r.ensureDefined)(e.maxHeight),i=x(e),s=w(e);return Math.floor((t+s)/(i+s))}(e);t.length>i&&(t=t.slice(0,i))}this._linesInfo={linesMaxWidth:this._getLinesMaxWidth(t),lines:t}}return this._linesInfo}_getLinesMaxWidth(e){const t=this.fontStyle();if(null!==this._data&&this._data.wordWrapWidth&&!this._data.forceCalculateMaxLineWidth)return this._data.wordWrapWidth*P(this._data);let i=0;for(const s of e)i=Math.max(i,(0,d.measureText)(s,t).width);return i}_getInternalData(){if(null!==this._internalData)return this._internalData;const e=(0,r.ensureNotNull)(this._data),t=this._getBoxSize(),i=t.boxWidth,s=t.boxHeight,o=(0,r.ensureDefined)(e.points)[0];let a=o.y;switch(e.vertAlign){case"bottom":a-=s+e.offsetY;break;case"middle":a-=s/2;break;case"top":a+=e.offsetY}let l=o.x;const h=b(e),d=f(e),u=S(e)+h;let c;const _=a+(g(e)+d)+x(e)/2;let p;switch(e.horzAlign){case"left":l+=e.offsetX;break;case"center":l-=i/2;break;case"right":l-=i+e.offsetX}switch((0,r.ensureDefined)(e.horzTextAlign)){case"left":p="start",c=l+u,(0,n.isRtl)()&&(e.forceTextAlign?p="left":(c=l+i-u,p="right"));break;case"center":p="center",c=l+i/2;break;case"right":p="end",c=l+i-u,(0,n.isRtl)()&&e.forceTextAlign&&(p="right")}return this._internalData={boxLeft:l,boxTop:a,boxWidth:i,boxHeight:s,textStart:c-l,textTop:_-a,textAlign:p,textBaseLine:"middle"},this._internalData}_getFontInfo(){if(null===this._fontInfo){const e=(0,r.ensureNotNull)(this._data),t=x(e),i=(e.bold?"bold ":"")+(e.italic?"italic ":"")+t+"px "+e.font;this._fontInfo={fontStyle:i,fontSize:t}}return this._fontInfo}_getBoxSize(){if(null===this._boxSize){const e=this.getLinesInfo(),t=(0,r.ensureNotNull)(this._data);this._boxSize={boxWidth:y(t,e.linesMaxWidth),boxHeight:v(t,e.lines.length)}}return this._boxSize}_getRotationPoint(){const{boxLeft:e,boxTop:t,boxWidth:i,boxHeight:o}=this._getInternalData(),{horzAlign:n,vertAlign:a}=(0,r.ensureNotNull)(this._data);let l,h;switch(n){case"center":l=e+i/2;break;case"left":l=e;break;case"right":l=e+i}switch(a){case"middle":h=t+o/2;break;case"top":h=t;break;case"bottom":h=t+o}return new s.Point(l,h)}}},296266:(e,t,i)=>{"use strict";i.d(t,{drawArrow:()=>c,TrendLineRenderer:()=>_});var s=i(650151),r=i(204652),o=i(739665),n=i(858063),a=i(914679),l=i(837291),h=i(741341),d=i(631586);function u(e,t,i,s,r){t.save(),t.fillStyle="#000000",t.beginPath(),t.arc(e.x*r,e.y*r,i*r,0,2*Math.PI,!1),t.fill(),s.strokeWidth&&(t.lineWidth=s.strokeWidth,t.stroke()),t.restore()}function c(e,t,i,s,r,o=!1){if(t.subtract(e).length()<1)return;const n=(0,l.getArrowPoints)(e,t,s,o);for(let e=0;e<n.length;++e){const t=n[e][0],s=n[e][1];(0,a.drawLine)(i,t.x*r,t.y*r,s.x*r,s.y*r)}}class _{constructor(){this._data=null,
this._hittest=new n.HitTestResult(n.HitTestResult.MOVEPOINT)}setData(e){this._data=e}setHitTest(e){this._hittest=e}draw(e,t){const i=this._data;if(null===i)return;if("points"in i&&i.points.length<2)return;const s=t.pixelRatio;void 0!==i.excludeBoundaries&&(e.save(),(0,h.addExclusionArea)(e,t,i.excludeBoundaries)),e.lineCap=i.linestyle===d.LINESTYLE_SOLID?"round":"butt",e.strokeStyle=i.color,e.lineWidth=Math.max(1,Math.floor(i.linewidth*s)),(0,a.setLineStyle)(e,i.linestyle);const r=i.points[0],o=i.points[1];let n=[];i.overlayLineEndings?n=[r.clone(),o.clone()]:this._drawEnds(e,[r,o],i.linewidth,s);const l=this._extendAndClipLineSegment(r,o,t);null!==l&&i.linewidth>0&&(l[0].x===l[1].x?(0,a.drawVerticalLine)(e,Math.round(l[0].x*s),l[0].y*s,l[1].y*s):l[0].y===l[1].y?(0,a.drawHorizontalLine)(e,Math.round(l[0].y*s),l[0].x*s,l[1].x*s):(0,a.drawLine)(e,l[0].x*s,l[0].y*s,l[1].x*s,l[1].y*s)),i.overlayLineEndings&&this._drawEnds(e,n,i.linewidth,s),void 0!==i.excludeBoundaries&&e.restore()}hitTest(e,t){const i=this._data;if(null===i)return null;if("points"in i&&i.points.length<2)return null;const s=(0,l.interactionTolerance)().line,o=i.points[0],n=i.points[1],a=this._extendAndClipLineSegment(o,n,t);if(null!==a){if((0,r.distanceToSegment)(a[0],a[1],e).distance<=s)return this._hittest}return null}_extendAndClipLineSegment(e,t,i){const r=(0,s.ensureNotNull)(this._data);return(0,l.extendAndClipLineSegment)(e,t,i.cssWidth,i.cssHeight,r.extendleft,r.extendright)}_drawEnds(e,t,i,r){const n=t[0],a=t[1],l=(0,s.ensureNotNull)(this._data);switch(l.leftend){case o.LineEnd.Arrow:c(a,n,e,i,r);break;case o.LineEnd.Circle:u(n,e,i,(0,s.ensureDefined)(l.endstyle),r)}switch(l.rightend){case o.LineEnd.Arrow:c(n,a,e,i,r);break;case o.LineEnd.Circle:u(a,e,i,(0,s.ensureDefined)(l.endstyle),r)}}}},274131:(e,t,i)=>{"use strict";i.d(t,{VerticalLineRenderer:()=>l});var s=i(858063),r=i(914679),o=i(837291),n=i(741341),a=i(756740);class l extends a.BitmapCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._hitTest=new s.HitTestResult(s.HitTestResult.MOVEPOINT)}setData(e){this._data=e}setHitTest(e){this._hitTest=e}hitTest(e){if(null===this._data||null===this._hitTest)return null;const t=(0,o.interactionTolerance)().line,i=Math.abs(e.x-this._data.x)<=t+this._data.linewidth/2,s=void 0===this._data.top||this._data.top-e.y<=t,r=void 0===this._data.bottom||e.y-this._data.bottom<=t;return i&&s&&r?this._hitTest:null}_drawImpl(e){if(null===this._data||this._data.linewidth<=0)return;const{context:t,horizontalPixelRatio:i,verticalPixelRatio:s,mediaSize:o}=e;if(this._data.x<-this._data.linewidth/2||this._data.x>o.width+this._data.linewidth/2)return;t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=Math.max(1,Math.floor(this._data.linewidth*i)),void 0!==this._data.linestyle&&(0,r.setLineStyle)(t,this._data.linestyle)
;const a=void 0!==this._data.top?Math.max(this._data.top,0):0,l=void 0!==this._data.bottom?Math.min(this._data.bottom,o.height):o.height,h=Math.round(this._data.x*i),d=Math.floor(a*s),u=Math.ceil(l*s),c=this._data.excludeBoundaries;void 0!==c&&(0,n.addExclusionAreaByScope)(e,c),(0,r.drawVerticalLine)(t,h,d,u)}}},441970:(e,t,i)=>{"use strict";i.d(t,{fromPercent:()=>n,toPercent:()=>a,toPercentRange:()=>l,fromIndexedTo100:()=>h,toIndexedTo100:()=>d,toIndexedTo100Range:()=>u,toLog:()=>c,fromLog:()=>_,logFormulaForPriceRange:()=>p,logFormulasAreSame:()=>m,getCurrentModePriceText:()=>y,getOppositeModePriceText:()=>v});var s=i(168210),r=i(43329);const o={logicalOffset:4,coordOffset:1e-4};function n(e,t){return t<0&&(e=-e),e/100*t+t}function a(e,t){const i=100*(e-t)/(t||1);return t<0?-i:i}function l(e,t){const i=a(e.minValue(),t),r=a(e.maxValue(),t);return new s.PriceRange(i,r)}function h(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function d(e,t){const i=100*(e-t)/t+100;return t<0?-i:i}function u(e,t){const i=d(e.minValue(),t),r=d(e.maxValue(),t);return new s.PriceRange(i,r)}function c(e,t){const i=Math.abs(e);if(i<1e-25)return 0;const s=(0,r.log10)(i+t.coordOffset)+t.logicalOffset;return e<0?-s:s}function _(e,t){const i=Math.abs(e);if(i<1e-15)return 0;const s=Math.pow(10,i-t.logicalOffset)-t.coordOffset;return e<0?-s:s}function p(e){if(null===e)return o;const t=Math.abs(e.maxValue()-e.minValue());if(t>=1||t<1e-15)return o;const i=Math.ceil(Math.abs(Math.log10(t))),s=o.logicalOffset+i;return{logicalOffset:s,coordOffset:1/Math.pow(10,s)}}function m(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function y(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function v(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},274580:(e,t,i)=>{"use strict";i.d(t,{combineProperty:()=>r});var s=i(506845);function r(e,...t){const i=()=>e(...t.map((e=>e.value()))),r=(0,s.createPrimitiveProperty)(i()),o=()=>r.setValue(i()),n={};for(const e of t)e.subscribe(n,o);return r.destroy=()=>{t.forEach((e=>e.unsubscribeAll(n)))},r}},391543:(e,t,i)=>{"use strict";i(506845)},319981:(e,t,i)=>{"use strict";i.d(t,{createWVFromGetterAndSubscription:()=>s.createWVFromGetterAndSubscription,createWVFromGetterAndSubscriptions:()=>r.createWVFromGetterAndSubscriptions,createWVFromProperty:()=>o.createWVFromProperty,combineProperty:()=>n.combineProperty});var s=i(160521),r=i(223167),o=i(889911),n=(i(391543),i(274580))},160521:(e,t,i)=>{"use strict";i.d(t,{createWVFromGetterAndSubscription:()=>o});var s=i(988411),r=i.n(s);function o(e,t){const i=new(r())(e()),s={};t.subscribe(s,(()=>{i.setValue(e())}));return i.readonly().spawn((()=>t.unsubscribeAll(s)))}},223167:(e,t,i)=>{"use strict";i.d(t,{createWVFromGetterAndSubscriptions:()=>o});var s=i(988411),r=i.n(s);function o(e,t){const i=new(r())(e()),s={};t.forEach((t=>t.subscribe(s,(()=>{i.setValue(e())}))))
;return i.readonly().spawn((()=>t.forEach((e=>e.unsubscribeAll(s)))))}},889911:(e,t,i)=>{"use strict";i.d(t,{createWVFromProperty:()=>r});var s=i(160521);function r(e){return(0,s.createWVFromGetterAndSubscription)((()=>e.value()),e)}},341342:(e,t,i)=>{"use strict";i.d(t,{QuotesProvider:()=>a});var s=i(947809),r=i(869403),o=i.n(r),n=i(777491);class a{constructor(e="full"){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new(o()),this._quoteSymbolChanged=new(o()),this._multiplexerType=e}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,n.guid)()),this._unsubscribeQuoteSession(),e&&this._subscribeQuoteSession(e),this._quoteSymbolChanged.fire())}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,s.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,s.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},98253:(e,t,i)=>{"use strict";i.d(t,{SeriesAreaPaneView:()=>l});var s=i(114123),r=i(906778),o=i(28035),n=i(583110),a=i(72945);class l extends a.SeriesSingleLinePaneView{renderer(e,t){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const i=this._source.priceScale();if(!i)return null;const a=this._source.properties().childs().areaStyle.childs(),l=a.transparency.value(),h={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:a.linecolor.value(),lineStyle:a.linestyle.value(),lineWidth:a.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:i.height(),color1:(0,s.generateColor)(a.color1.value(),l),color2:(0,s.generateColor)(a.color2.value(),l)},d=new o.CompositeRenderer;return d.append(new r.PaneRendererArea(h)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&d.append(new n.SelectionRenderer(this._selectionData)),d}}},196312:(e,t,i)=>{"use strict";function s(e,t){return 100*(t-e)/Math.abs(e||1)}i.d(t,{barPercentChange:()=>s})},236368:(e,t,i)=>{"use strict";i.d(t,{SeriesBarsPaneView:()=>a});var s=i(28035),r=i(583110),o=i(70926),n=i(352566);class a extends o.SeriesBarCandlesPaneView{renderer(e,t){
this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const i=this._source.properties().childs(),o={bars:this._bars,barSpacing:this._model.timeScale().barSpacing(),dontDrawOpen:i.barStyle.childs().dontDrawOpen.value(),thinBars:11===i.style.value()?i.rangeStyle.childs().thinBars.value():i.barStyle.childs().thinBars.value()},a=new s.CompositeRenderer;return a.append(new n.PaneRendererBars(o)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new r.SelectionRenderer(this._selectionData)),a}_createItem(e,t,i){const s={time:e,open:NaN,high:NaN,low:NaN,close:NaN,color:i.barColor};return(0,o.baseBarCandlesUpdater)(t,s)?s:null}}},234052:(e,t,i)=>{"use strict";i.d(t,{SeriesBaselinePaneView:()=>m});var s=i(114123),r=i(28035),o=i(86441),n=i(5531),a=i(204652),l=i(837291),h=i(923195),d=i(904244),u=i(858063);class c extends d.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:i,bottomLineWidth:s}=this._data,r=(0,l.interactionTolerance)().series+(i+s)/4,n=(0,h.lowerbound)(t,e,((e,t)=>e.x<=t.x)),d=Math.max(1,n-1),c=Math.min(t.length-1,n+1);for(let i=d;i<=c;++i){const s=t[i-1],n=t[i],{distance:l}=(0,a.distanceToSegment)(new o.Point(s.x,s.y),new o.Point(n.x,n.y),new o.Point(e.x,e.y));if(l<=r)return new u.HitTestResult(u.HitTestResult.REGULAR)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:i,bottom:s,bottomFillColor1:r,bottomFillColor2:a,topFillColor1:h,topFillColor2:d,topLineColor:u,bottomLineColor:c,topLineWidth:_,bottomLineWidth:p}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,l.coordinateIsValid)(e.y)));if(-1===t)return!1;let i=e.length-1;for(;i>t&&!(0,l.coordinateIsValid)(e[i].y);)i--;return!(t>i)}(t))return;const m=e.context,{topItems:y,bottomItems:v}=function(e,t){const i=[],s=[];let r=null;for(let a=0;a<e.length;a++){let h=e[a];const d=e[a+1]||{};if((0,l.coordinateIsValid)(h.y))h.y<=t&&i.push(h),h.y>=t&&s.push(h),r=h;else{if(null===r)continue;h=r}if((0,l.coordinateIsValid)(d.y)&&(h.y>t&&d.y<t||h.y<t&&d.y>t))if(Math.abs(h.x-d.x)<1){const e=new o.Point(h.x,t);i.push(e),s.push(e)}else{const e=(0,n.intersectLineSegments)(h,d,new o.Point(h.x,t),new o.Point(d.x,t));if(null!==e){const t=h.add(d.subtract(h).scaled(e));i.push(t),s.push(t)}}}return{topItems:i,bottomItems:s}}(t,i);m.lineCap="round",m.lineJoin="round",0!==y.length&&(m.beginPath(),m.moveTo(y[0].x,i),this._makeLine(m,y,!0,0),m.closePath(),m.fillStyle=this._makeLinearGradient(m,h,d,i-s,i),m.fill(),m.beginPath(),this._makeLine(m,y,!1,0),m.lineWidth=_,m.strokeStyle=u,m.stroke()),0!==v.length&&(m.beginPath(),m.moveTo(v[0].x,i),this._makeLine(m,v,!0,1),m.closePath(),m.fillStyle=this._makeLinearGradient(m,r,a,i,i+s),m.fill(),m.beginPath(),this._makeLine(m,v,!1,1),m.lineWidth=p,m.strokeStyle=c,m.stroke())}_makeLine(e,t,i,s){if(null===this._data)return;const r=t.findIndex((e=>(0,l.coordinateIsValid)(e.y)));if(-1===r)return
;const{barSpacing:o,baseLevelCoordinate:n}=this._data,a=.25*o;let h;const d=t.length;for(let o=r;o<d;o++){const d=t[o],u=t[o+1]||{};if((0,l.coordinateIsValid)(d.y)){if(0===s){if(h&&h.y>=n&&d.y>=n){e.moveTo(d.x,d.y);continue}}else if(h&&h.y<=n&&d.y<=n){e.moveTo(d.x,d.y);continue}if(h&&(0,l.coordinateIsValid)(h.y))e.lineTo(d.x,d.y),i&&!(0,l.coordinateIsValid)(u.y)&&e.lineTo(d.x,n);else if(u&&(0,l.coordinateIsValid)(u.y))i?(o!==r&&e.lineTo(d.x,n),e.lineTo(d.x,d.y)):e.moveTo(d.x,d.y);else if(i){if(0===o)continue;o!==r&&e.lineTo(d.x-a,n),e.lineTo(d.x-a,d.y),e.lineTo(d.x+a,d.y),e.lineTo(d.x+a,n)}else e.moveTo(d.x-a,d.y),e.lineTo(d.x+a,d.y);h=d}}}_makeLinearGradient(e,t,i,s,r){const o=e.createLinearGradient(0,s,0,r);return o.addColorStop(0,t),o.addColorStop(1,i),o}}var _=i(583110),p=i(72945);class m extends p.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new c,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(e,t){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const i=new r.CompositeRenderer;return i.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&i.append(new _.SelectionRenderer(this._selectionData)),i}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),i=t.transparency.value();this._topFillColor1=(0,s.generateColor)(t.topFillColor1.value(),i),this._topFillColor2=(0,s.generateColor)(t.topFillColor2.value(),i),this._bottomFillColor1=(0,s.generateColor)(t.bottomFillColor1.value(),i),this._bottomFillColor2=(0,s.generateColor)(t.bottomFillColor2.value(),i),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},130737:(e,t,i)=>{"use strict";i.d(t,{SeriesWaterlinePaneView:()=>a});var s=i(594358),r=i(854905),o=i(858063),n=i(631586);class a extends s.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:r.PaneCursorType.VerticalResize,activeItem:0,areaName:o.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new o.HitTestResult(o.HitTestResult.MOVEPOINT,t)),
this._lineRendererData.visible=!0,this._lineRendererData.linestyle=n.LINESTYLE_SPARSE_DOTTED}_updateImpl(){const{baseLevelPercentage:e,paneHeight:t,color:i}=this._getters,s=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(s/100)),this._lineRendererData.color=i()}}},963121:(e,t,i)=>{"use strict";i.d(t,{SeriesCandlesPaneView:()=>l});var s=i(28035),r=i(837291),o=i(583110),n=i(70926),a=i(916716);class l extends n.SeriesBarCandlesPaneView{renderer(e,t){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const i=this._source.priceScale();if(!i)return null;const n=this._source.properties().childs().candleStyle.childs(),l=this._model.timeScale().barSpacing(),h={bars:this._bars,barSpacing:l,bodyVisible:n.drawBody.value(),borderVisible:n.drawBorder.value(),borderColor:n.borderColor.value(),wickColor:n.wickColor.value(),barWidth:(0,r.optimalBarWidth)(l),wickVisible:n.drawWick.value(),isPriceScaleInverted:i.isInverted()},d=new s.CompositeRenderer;return d.append(new a.PaneRendererCandles(h)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&d.append(new o.SelectionRenderer(this._selectionData)),d}_createItem(e,t,i){const s={time:e,open:NaN,high:NaN,low:NaN,close:NaN,color:i.barColor,borderColor:i.barBorderColor,wickColor:i.barWickColor,hollow:i.isBarHollow};return(0,n.baseBarCandlesUpdater)(t,s)?s:null}}},914431:(e,t,i)=>{"use strict";i.d(t,{SeriesColumnsPaneView:()=>_});var s=i(650151),r=i(86441),o=i(87476),n=i(203308),a=i(858063),l=i(28035),h=i(812363),d=i(847314),u=i(583110),c=i(910008);class _{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,o.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new d.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(e,t){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const i={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},s=new l.CompositeRenderer;return s.append(new c.PaneRendererColumns(i)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&s.append(new u.SelectionRenderer(this._selectionData)),s}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const i=e.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;const o=this._source.nearestIndex(i.firstBar(),h.PlotRowSearchMode.NearestRight),l=this._source.nearestIndex(i.lastBar(),h.PlotRowSearchMode.NearestLeft);if(void 0===o||void 0===l)return;const d=this._source.bars().range(o,l),u=this._source.barColorer(),c={},_=this._source.barFunction(),p=d.reduce(((e,t,s)=>{const o=_(s);if(!(0,n.default)(o))return e;c.value=s;let a=this._source.precomputedBarStyle(s);void 0===a&&(a=u.barStyle(t,!1,c),this._source.setPrecomputedBarStyle(s,a));const l=new r.Point(t,o);return l.style=a,l.timePointIndex=t,this._items.push(l),
c.previousValue=s,i.contains(t)&&null!=e?e:o}),null);if(null!==p)if(t.pointsArrayToCoordinates(this._items,p),e.timedValuesToCoordinates(this._items),this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const i=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:a.HitTestResult.REGULAR};const o=(0,s.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=a.HitTestResult.REGULAR;for(let s=0;s<i.length;s++){const n=i[s],a=this._source.bars().valueAt(n);if(null===a)continue;const l=_(a),h=e.indexToCoordinate(n),d=t.priceToCoordinate(l,p);this._selectionData.points.push(new r.Point(h,d)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(d/o))}}else this._selectionIndexer.clear()}}},978444:(e,t,i)=>{"use strict";i.d(t,{SeriesHiLoPaneView:()=>y});var s=i(448874),r=i(538708),o=i(923195),n=i(837291),a=i(858063),l=i(904244);class h extends l.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,n.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,i=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].time-i)return null;if(e.x>t[t.length-1].time+i)return null;const s=t[(0,o.lowerbound)(t,e.x-i,((e,t)=>e.time<t))];if(e.x<s.time-i||e.x>s.time+i)return null;const r=(0,n.interactionTolerance)().series+this._barWidth/2,l=Math.min(s.high,s.low),h=Math.max(s.high,s.low),d=this._data.fontSize;return l-r-d<=e.y&&e.y<=l+r||h-r<=e.y&&e.y<=h+r+d?new a.HitTestResult(a.HitTestResult.REGULAR):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:i,labelColor:s,bars:o,inverted:n,labelsPadding:a}=this._data,l=e.context;l.textAlign="center",l.fillStyle=s,l.font=(0,r.makeFont)(i,t);for(let e=0;e<o.length;++e){const t=o[e],i=Math.round(Math.min(t.high,t.low)),s=Math.round(Math.max(t.high,t.low)),r=Math.round(t.time);l.textBaseline="alphabetic",l.fillText(n?t.lowLabel:t.highLabel,r,i-a),l.textBaseline="top",l.fillText(n?t.highLabel:t.lowLabel,r,s+a)}}}var d=i(28035),u=i(583110),c=i(623331),_=i(741341),p=i(916716),m=i(70926);class y extends m.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new h,this._candlesRenderer=new p.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,s.default)(((e,t)=>Math.max(1,(0,o.lowerboundExt)((e=>e+1),null,(i=>{const s=(0,r.makeFont)(i,c.CHART_FONT_FAMILY);return(0,_.measureText)(e,s).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(e,t,i){const s=this._source.priceScale();if(!s||s.isEmpty())return null;const r=new d.CompositeRenderer,o=this._needLabels(),a=this._source.properties().childs().hiloStyle.childs(),l=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({
generateLabels:o,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:a.drawBody.value(),barSpacing:l,borderVisible:a.showBorders.value(),barWidth:(0,n.optimalHiLoWidth)(l)}),r.append(this._candlesRenderer),o){const e=this._calculateLabelFontSize();e&&e>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:l,font:c.CHART_FONT_FAMILY,fontSize:e,labelColor:a.labelColor.value(),inverted:s.isInverted(),labelsPadding:.4*e}),r.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&r.append(new u.SelectionRenderer(this._selectionData)),r}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,i,s){const r={time:e,open:NaN,high:NaN,low:NaN,close:NaN,color:i.barColor,borderColor:i.barBorderColor,hollow:!1,highLabel:"",lowLabel:""};if(!(0,m.baseBarCandlesUpdater)(t,r))return null;if(r.open=r.high,r.close=r.low,s.generateLabels){const e=s.formatter.format(r.high),t=s.formatter.format(r.low);r.highLabel=e,r.lowLabel=t;const i=(e.length>t.length?e:t).replace(/\d/g,"0");i.length>this._maxLengthLabel.length&&(this._maxLengthLabel=i)}return r}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},568631:(e,t,i)=>{"use strict";i.d(t,{SeriesHollowCandlesPaneView:()=>l});var s=i(28035),r=i(837291),o=i(583110),n=i(916716),a=i(963121);class l extends a.SeriesCandlesPaneView{renderer(e,t){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const i=this._source.priceScale();if(!i)return null;const a=this._source.properties().childs().hollowCandleStyle.childs(),l=this._model.timeScale().barSpacing(),h={bars:this._bars,barSpacing:l,bodyVisible:a.drawBody.value(),borderVisible:a.drawBorder.value(),borderColor:a.borderColor.value(),wickColor:a.wickColor.value(),barWidth:(0,r.optimalBarWidth)(l),wickVisible:a.drawWick.value(),isPriceScaleInverted:i.isInverted()},d=new s.CompositeRenderer;return d.append(new n.PaneRendererCandles(h)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&d.append(new o.SelectionRenderer(this._selectionData)),d}}},29911:(e,t,i)=>{"use strict";i.d(t,{SeriesLinePaneView:()=>d});var s=i(858063),r=i(28035),o=i(943498),n=i(764372),a=i(583110),l=i(933813),h=i(72945);class d extends h.SeriesSingleLinePaneView{renderer(e,t){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const i=this._source.properties().childs().lineStyle.childs(),h={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:i.color.value(),lineStyle:i.linestyle.value(),withMarkers:i.styleType.value()===l.STYLE_LINE_TYPE_MARKERS,
lineWidth:i.linewidth.value(),simpleMode:!0,hitTestResult:s.HitTestResult.REGULAR};let d,u;if(d=i.styleType.value()===l.STYLE_LINE_TYPE_STEP?new n.PaneRendererStepLine(h):new o.PaneRendererLine(h),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new r.CompositeRenderer;e.append(d),e.append(new a.SelectionRenderer(this._selectionData)),u=e}else u=d;return u}}},70926:(e,t,i)=>{"use strict";i.d(t,{baseBarCandlesUpdater:()=>h,SeriesBarCandlesPaneView:()=>d});var s=i(86441),r=i(87476),o=i(847314),n=i(812363),a=i(858063);function l(e){return null!=e}function h(e,t){const i=e[1],s=e[2],r=e[3],o=e[4];return!!(l(i)&&l(s)&&l(r)&&l(o))&&(t.open=i,t.high=s,t.low=r,t.close=o,!0)}class d{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new o.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),i=this._source.priceScale();if(this._bars=[],t.isEmpty()||!i||i.isEmpty())return;const r=t.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;let o=this._source.nearestIndex(r.firstBar(),n.PlotRowSearchMode.NearestRight);const l=this._source.nearestIndex(r.lastBar(),n.PlotRowSearchMode.NearestLeft);if(void 0===o||void 0===l)return;for(;o<=l;o++){if(null!==this._source.bars().valueAt(o))break}if(o>l)return;const h=this._source.bars().range(o,l),d=this._source.barColorer(),u={};if(h.each(((t,i)=>{u.value=i;let s=this._source.precomputedBarStyle(i);void 0===s&&(s=d.barStyle(t,!1,u),this._source.setPrecomputedBarStyle(i,s));const r=this._createItem(Math.round(t),i,s,e);return!!r&&(u.previousValue=i,this._bars.push(r),!1)})),0===this._bars.length)return;const c=this._source.firstValue();if(null!==c)if(i.barPricesToCoordinates(this._bars,c),t.barIndexesToCoordinates(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:a.HitTestResult.REGULAR,barSpacing:t.barSpacing()};const r=this._model.paneForSource(this._source);if(!r)return;const o=r.height();for(let r=0;r<e.length;r++){const n=e[r],a=this._source.bars().valueAt(n);if(null===a)continue;const l=a[1],h=a[4];if(null==l||null==h)continue;const d=.5*(l+h),u=t.indexToCoordinate(n),_=i.priceToCoordinate(d,c);this._selectionData.points.push(new s.Point(u,_)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(_/o))}}else this._selectionIndexer.clear()}}},668906:(e,t,i)=>{"use strict";i.d(t,{SeriesDataEvents:()=>o});var s=i(869403),r=i.n(s);class o{constructor(){this._created=new(r()),this._modified=new(r()),this._loading=new(r()),this._completed=new(r()),this._error=new(r()),this._symbolError=new(r()),this._symbolResolved=new(r()),this._seriesError=new(r()),this._symbolNotPermitted=new(r()),this._symbolInvalid=new(r()),
this._symbolGroupNotPermitted=new(r()),this._chartTypeNotPermitted=new(r()),this._intradaySpreadNotPermitted=new(r()),this._intradayExchangeNotPermitted=new(r()),this._customIntervalNotPermitted=new(r()),this._secondsIntervalNotPermitted=new(r()),this._tickMarksRangeChanged=new(r()),this._barReceived=new(r()),this._seriesTimeFrame=new(r()),this._dataUpdated=new(r())}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._tickMarksRangeChanged.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}tickMarksRangeChanged(){return this._tickMarksRangeChanged}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTickMarksRangeChanged(e){this._tickMarksRangeChanged.fire(e)}fireBarReceived(e){
this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,i,s,r){this._seriesTimeFrame.fire(e,t,i,s,r)}fireDataUpdated(e,t,i){this._dataUpdated.fire(e,t,i)}}},744315:(e,t,i)=>{"use strict";i.r(t),i.d(t,{initialRequestOptionsToNumBars:()=>v,SeriesDataSource:()=>f,parseJapaneseProjectionBars:()=>b});var s=i(650151),r=i(758337),o=i(7628),n=i(568450),a=i(311854),l=i(586299),h=i(477679),d=i(668906),u=i(272001),c=i(720444);const _=(0,u.getLogger)("Chart.SeriesDataSource");var p;!function(e){e[e.Idle=0]="Idle",e[e.AwaitingConnection=1]="AwaitingConnection",e[e.AwaitingFirstDataUpdate=2]="AwaitingFirstDataUpdate",e[e.Active=3]="Active"}(p||(p={}));let m=1;let y=1;function v(e){return e.startDate?e.endDate||e.count?e.endDate?["from_to",e.startDate,e.endDate]:["bar_count",e.startDate,(0,s.ensure)(e.count)]:["from_to",e.startDate]:e.count||300}class f{constructor(e,t,i,s){this._symbol=null,this._resolvedSymbolName=null,this._createSeriesOverriddenParams=0,this._instanceId=null,this._symbolInstanceId=null,this._resolution=null,this._timeFrame=null,this._data=new a.SeriesData,this._dataEvents=new d.SeriesDataEvents,this._status=p.Idle,this._turnaroundCounter=1,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),this._ongoingDataUpdate=Promise.resolve(),this._gateway=e,this._turnaroundPrefix=t,this._createSeriesParams=v(null!=i?i:{count:300}),this._timeFrame=s||null,this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}destroy(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged)}modifySeries(e,t,i=null,o=!1){o&&(_.logNormal("Due to force flag clearing symbol & resolution to force re-requesting data."),this._symbol=null,this._resolution=null);const a=this._symbol,l=this._resolution;if(this._symbol=e,this._resolution=t,null===this._instanceId)return void(this._timeFrame=i);const h=!(0,r.deepEquals)(a,e)[0]||null!==this._resolvedSymbolName&&this._resolvedSymbolName!==this._getSymbolNameString(e),d=null===l||!n.Interval.isEqual(l,t);(h||d||null!==i)&&(this._timeFrame=null,(h||d)&&this._turnaroundCounter++,h&&this._resolveSymbol(),this._gateway.modifySeries(this._instanceId,this.turnaround(),(0,s.ensureNotNull)(this._symbolInstanceId),this._resolution,i,this._onMessage.bind(this)),this._dataEvents.fireModified())}requestMoreData(e){null!==this._instanceId&&this._gateway.requestMoreData(this._instanceId,e,this._onMessage.bind(this))}requestMoreTickmarks(e){null!==this._instanceId&&this._gateway.requestMoreTickmarks(this._instanceId,e,this._onMessage.bind(this))}isStarted(){return this._status!==p.Idle}isActive(){return this._status===p.Active}resolution(){return this._resolution}start(){this.isStarted()?_.logNormal("start: data source is already started, nothing to do"):((0,s.assert)(null!==this._symbol,"symbol must be set before start"),(0,s.assert)(null!==this._resolution,"resolution must be set before start"),this._gateway.isConnected().value()?this._createSeries():this._changeStatusTo(p.AwaitingConnection))}stop(){
this.isStarted()?(null!==this._instanceId&&(this._gateway.removeSeries(this._instanceId),this._instanceId=null),this._changeStatusTo(p.Idle)):_.logNormal("stop: data source is already stopped, nothing to do")}instanceId(){return this._instanceId}data(){return this._data}clearData(){this.isStarted()?this._enqueueUpdate((()=>this._clearDataImpl())):this._clearDataImpl()}dataEvents(){return this._dataEvents}turnaround(){return`${this._turnaroundPrefix}${this._turnaroundCounter}`}symbolInstanceId(){return this._symbolInstanceId}symbol(){return this._symbol}moveData(e){this._enqueueUpdate((()=>this._data.moveData(e)))}setInitialRequestOptions(e){this._createSeriesOverriddenParams=v(e)}_resolveSymbol(){null!==this._symbol&&(this._symbolInstanceId=this._gateway.resolveSymbol("sds_sym_"+m++,(0,o.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol),this._onMessage.bind(this)))}_clearDataImpl(){this._data.clear()}_changeStatusTo(e){(0,s.assert)(this._status!==e,"Source and destination status should be distinct"),_.logNormal(`Status changed from ${p[this._status]} to ${p[e]}`),this._status=e}_createSeries(){(0,s.assert)(this._status!==p.Active,'Status should not be "Active" when creating a study'),this._instanceId="sds_"+y++,this._resolveSymbol();const e=this._createSeriesOverriddenParams||this._createSeriesParams;this._createSeriesOverriddenParams&&(this._createSeriesOverriddenParams=0),this._gateway.createSeries(this._instanceId,this.turnaround(),(0,s.ensureNotNull)(this._symbolInstanceId),(0,s.ensureNotNull)(this._resolution),e,this._timeFrame,this._onMessage.bind(this)),this._timeFrame=null,this._changeStatusTo(p.AwaitingFirstDataUpdate),this._dataEvents.fireCreated(this._instanceId)}_onGatewayIsConnectedChanged(e){e?this._onGatewayConnected():this._onGatewayDisconnected()}_onGatewayConnected(){this._status===p.AwaitingConnection&&this._createSeries()}_onGatewayDisconnected(){this._status!==p.Idle&&this._status!==p.AwaitingConnection&&(this._instanceId=null,this._changeStatusTo(p.AwaitingConnection)),this._turnaroundCounter=1}_onMessage(e){this._enqueueUpdate((()=>this._onMessageImpl(e)))}async _onMessageImpl(e){switch(e.method){case"symbol_resolved":{const[t,i]=e.params;if(t!==this._symbolInstanceId){_.logNormal(`Resolve for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolResolved(i);break}case"symbol_error":if(e.params[0]!==this._symbolInstanceId){_.logNormal(`Symbol error for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolError(e);break;case"series_timeframe":{const[t,i,s,r,o,n,a]=e.params;if(!this._checkTurnaround(t,i)){_.logNormal(`Time frame for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${i})`);break}this._onSeriesTimeFrame(s,r,o,n,a);break}case"series_error":{const[t,i]=e.params;if(!this._checkTurnaround(t,i)){_.logNormal(`Series error for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${i})`);break}this._onSeriesError(e.params[2]);break}
case"series_loading":{const[t,i]=e.params;if(!this._checkTurnaround(t,i))break;this._onSeriesLoading(e.time);break}case"series_completed":{const[t,i,s,r]=e.params;if(!this._checkTurnaround(t,s)){_.logNormal(`Series completed for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${s})`);break}this._onSeriesCompleted(i,e.time,r);break}case"data_update":if(!this._checkTurnaround(e.params.customId,e.params.turnaround)){_.logNormal(`Data update for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e.params.customId} (${e.params.turnaround})`);break}await this._onDataUpdate(e.params.plots,e.params.nonseries,e.params.lastBar);break;case"clear_data":if(e.params.turnaround!==this.turnaround()){_.logNormal(`Clear data for old data, expected: ${this.turnaround()}, actual ${e.params.turnaround}`);break}this._clearDataImpl(),this._dataEvents.fireDataUpdated(void 0,!1,null)}}_onSeriesError(e){let t,i;if("string"==typeof e)i={error:e},t=e;else if(i=e,e.ctx){const i={};Object.entries(e.ctx).forEach((([e,t])=>{i[e]=t.toString()})),t=e.error.format(i)}else t=e.error;if(t.startsWith("study_not_auth:")){const e=t.split(":",2)[1].split("@",2)[0];if(["BarSetRenko","BarSetPriceBreak","BarSetKagi","BarSetPnF"].includes(e))this._dataEvents.fireChartTypeNotPermitted(e);else if("BarSetSpread"===e)this._dataEvents.fireIntradaySpreadNotPermitted();else if("BarSetRange"===e){const e=`${(0,s.ensureNotNull)(this._symbol).inputs.range}R`;this._dataEvents.fireCustomIntervalNotPermitted(e)}}else"resolution_not_entitled"===t?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===t?this._dataEvents.fireCustomIntervalNotPermitted((0,s.ensureNotNull)(this._resolution)):"seconds_not_entitled"===t&&this._dataEvents.fireSecondsIntervalNotPermitted();this._dataEvents.fireSeriesError(i)}_onSeriesTimeFrame(e,t,i,s,r){this._dataEvents.fireSeriesTimeFrame(e,t,i,null==s||s,r)}_onSymbolError(e){if(e.params[1]===h.permissionDenied)switch(e.params[2]){case h.SymbolErrorPermissionDeniedReason.Symbol:this._dataEvents.fireSymbolNotPermitted(e.params[3]);break;case h.SymbolErrorPermissionDeniedReason.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(e.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(e.params[2])}else e.params[1]===h.invalidSymbol&&this._dataEvents.fireSymbolInvalid();this._dataEvents.fireSymbolError(e.params[1])}_onSymbolResolved(e){this._resolvedSymbolName=(0,c.symbolForApi)(e,this._getSymbolNameString((0,s.ensureNotNull)(this._symbol))),this._dataEvents.fireSymbolResolved(e)}_getSymbolNameString(e){return"string"==typeof e.symbol?e.symbol:e.symbol.symbol}async _onDataUpdate(e,t,i){this._onDataUnpacked(e,i,await b(t))}_enqueueUpdate(e){return this._ongoingDataUpdate=this._ongoingDataUpdate.then(e,e),this._ongoingDataUpdate}_onDataUnpacked(e,t,i){if(this._status===p.Idle)return;this._status===p.AwaitingFirstDataUpdate&&(this._changeStatusTo(p.Active),this._clearDataImpl())
;const s=this._data.bars().size(),r=this._data.bars().firstIndex(),o=this._data.mergeRegularBars(e);null!==i&&(this._data.nsBars().clear(),this._data.nsBars().merge(i.projectionPlots),this._data.lastProjectionPrice=i.lastPrice,null!==i.boxSize&&(this._data.boxSize=i.boxSize),this._data.reversalAmount=i.reversalAmount);const n=null===r||null!==o&&o.index<r;this._dataEvents.fireDataUpdated(t,n,o),s!==this._data.bars().size()&&null!==o&&this._dataEvents.fireBarReceived(o)}_onSeriesLoading(e){this._dataEvents.fireLoading(e)}_onSeriesCompleted(e,t,i){this._dataEvents.fireCompleted({updateMode:e,time:t,flags:i})}_checkTurnaround(e,t){return this._instanceId===e&&(void 0===t||t===this.turnaround())}}async function b(e){if(void 0===e)return{projectionPlots:[],boxSize:null};if(""===e.d||"nochange"===e.indexes)return null;const t=await(0,l.unpackNonSeriesData)(e.d);if(null===t||t.indexes_replace)return null;const i=e.indexes,{bars:s,price:r,boxSize:o,reversalAmount:n}=t.data;return{lastPrice:r,projectionPlots:(s||[]).map((e=>{let t;return"factor"in e?t=e.factor:"additionalPrice"in e&&(t=e.additionalPrice),{index:i[e.time],value:[0,e.open,e.high,e.low,e.close,e.volume,t]}})),reversalAmount:n,boxSize:o}}},72945:(e,t,i)=>{"use strict";i.d(t,{SeriesSingleLinePaneView:()=>u});var s=i(203308),r=i(86441),o=i(650151),n=i(87476),a=i(847314),l=i(812363),h=i(858063),d=i(923195);class u{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,n.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){var e,t;this._items=[];const i=this._model.timeScale(),n=this._source.priceScale();if(i.isEmpty()||!n||n.isEmpty())return;const a=i.visibleBarsStrictRange();if(null===a)return;if(0===this._source.bars().size())return;const u=null!==(e=this._source.nearestIndex(a.firstBar()-1,l.PlotRowSearchMode.NearestLeft))&&void 0!==e?e:a.firstBar()-1,c=null!==(t=this._source.nearestIndex(a.lastBar()+1,l.PlotRowSearchMode.NearestRight))&&void 0!==t?t:a.lastBar()+1,_=this._source.barFunction();let p=null;const m=this._model.timeScale().barSpacing();if(m<.1&&this._source.supportsPressedChunks()){p=this._source.firstValue();const e=this._source.pressedChunks(m,(0,o.ensureNotNull)(this._source.priceSource())),t=(0,d.lowerbound)(e,u,((e,t)=>e.startTime<t)),i=Math.min(e.length-1,(0,d.lowerbound)(e,c,((e,t)=>e.endTime<t)));for(let s=t;s<=i;s++){const t=e[s];[t.open,t.high,t.low,t.close].forEach((e=>{const i=new r.Point(t.startTime,e);this._items.push(i)}))}}else{p=this._source.bars().range(u,c).reduce(((e,t,i)=>{const o=_(i);if(!(0,s.default)(o))return e;const n=new r.Point(t,o);return this._items.push(n),a.contains(t)?null!=e?e:o:e}),null)}if(null!==p)if(n.pointsArrayToCoordinates(this._items,p),i.timedValuesToCoordinates(this._items),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:i.barSpacing(),
hittestResult:h.HitTestResult.REGULAR};const t=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=h.HitTestResult.REGULAR;for(let s=0;s<e.length;s++){const o=e[s],a=this._source.bars().valueAt(o);if(null===a)continue;const l=_(a),h=i.indexToCoordinate(o),d=n.priceToCoordinate(l,p);this._selectionData.points.push(new r.Point(h,d)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(d/t))}}else this._selectionIndexer.clear();else this._items=[]}}},418597:(e,t,i)=>{"use strict";i.d(t,{calculateColor:()=>C,SeriesValuesProvider:()=>P});var s=i(650151),r=i(150335),o=i(724377),n=i(777754),a=i(638456),l=(i(87476),i(114123)),h=i(768038),d=i(812363),u=i(480071),c=i(561068),_=i(738023),p=i(424061),m=i(196312),y=i(801750),v=i(414805),f=i(943546);const b=a.CheckMobile.any(),g=b&&!1,S=new c.PercentageFormatter,w=new _.VolumeFormatter(2),x=`${f.notAvailable} (${f.notAvailable}%)`;function C(e,t){const i=(0,o.parseRgb)(t),s=(0,o.parseRgb)(e);return(0,o.distanceRgb)(i,s)<70?(0,o.rgbToHexString)((0,o.invertRgb)(i)):t}class P{constructor(e,t){this._series=e,this._model=t,this._emptyValues=[{title:n.t(null,void 0,i(539280)),visible:!1,value:"",index:0,id:""},{title:n.t(null,void 0,i(330777)),visible:!1,value:"",index:1,id:""},{title:n.t(null,void 0,i(608136)),visible:!1,value:"",index:2,id:""},{title:n.t(null,void 0,i(931691)),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:n.t(null,void 0,i(349329)),visible:!1,value:"",index:6,id:""},{title:n.t(null,{context:"study"},i(32819)),visible:!1,value:"",index:7,id:""}]}getItems(){return this._emptyValues}getValues(e){var t,i,o;const n=this._showLastPriceAndChangeOnly(),a=this._emptyValues.map((e=>({...e,visible:!n})));a[0].value=f.notAvailable,a[1].value=f.notAvailable,a[2].value=f.notAvailable,a[3].value=f.notAvailable,a[6].value=x,a[7].value=f.notAvailable,a[5].visible=!1;const u=a[4];if(u.value=f.notAvailable,u.visible=!1,this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return a;(0,r.isNumber)(e)||(e=(0,s.ensureNotNull)(this._series.data().last()).index);const c=this._series.nearestIndex(e,d.PlotRowSearchMode.NearestLeft);if(void 0===c)return a;const _=this._series.data().valueAt(c),m=this._model.backgroundTopColor().value();if(null===_)return a;const v=_[1],b=_[2],P=_[3],I=_[4],{values:T}=this._changesData(I,c,n),D=(0,y.getPriceValueFormatterForSource)(this._series);if((0,y.shouldBeFormattedAsPercent)(this._series)||(0,y.shouldBeFormattedAsIndexedTo100)(this._series))a[6].value="";else if(void 0!==T){const e=this._series.formatter(),{currentPrice:s,prevPrice:r,change:o}=T,n=null!==(i=null===(t=e.formatChange)||void 0===t?void 0:t.call(e,s,r,!0))&&void 0!==i?i:e.format(o,!0);a[6].value=(0,h.forceLTRStr)(`${n} (${S.format(T.percentChange,!0)})`)}if(n)a[5].value=null==I?f.notAvailable:D(I),a[5].visible=!0,a[6].visible=!0;else{a[0].value=null==v?f.notAvailable:D(v),
a[1].value=null==b?f.notAvailable:D(b),a[2].value=null==P?f.notAvailable:D(P),a[3].value=null==I?f.notAvailable:D(I),a[4].value=D(this._series.barFunction()(_));const e=_[5];(0,r.isNumber)(e)?a[7].value=w.format(e):a[7].visible=!1}let R=null;if(n&&!g)R=void 0===T||T.change>=0?p.SeriesBarColorer.upColor(this._series.properties()):p.SeriesBarColorer.downColor(this._series.properties());else{const e=this._series.barColorer().barStyle(c,!1);R=C(m,null!==(o=e.barBorderColor)&&void 0!==o?o:e.barColor)}R=(0,l.resetTransparency)(C(m,R));for(const e of a)e.color=R;return a}_showLastPriceAndChangeOnly(){return b&&(null===this._model.crossHairSource().pane||(0,v.isLineToolName)(u.tool.value())||null!==this._model.lineBeingEdited())}_changesData(e,t,i){var s;if(i&&!g){const t=this._series.quotes();if(null!==t){const i=null!==t.change?t.change:0;return{values:{change:i,currentPrice:e,prevPrice:e-i,percentChange:null!==t.change_percent?t.change_percent:0}}}}else{const i=this._series.data().search(t-1,d.PlotRowSearchMode.NearestLeft),r=null!==(s=null==i?void 0:i.value[4])&&void 0!==s?s:null;if(null!==r&&null!=e)return{values:{change:e-r,currentPrice:e,prevPrice:r,percentChange:(0,m.barPercentChange)(r,e)}}}return{}}}},903258:(e,t,i)=>{"use strict";i.d(t,{financialPeriodToString:()=>o,financialPeriodToShortString:()=>n});var s=i(650151),r=i(777754);function o(e){switch(e){case"FQ":return r.t(null,void 0,i(908831));case"FY":return r.t(null,void 0,i(34314));case"FH":return r.t(null,void 0,i(512421));case"TTM":return r.t(null,void 0,i(794236))}(0,s.ensureNever)(e)}function n(e){switch(e){case"FQ":return r.t(null,void 0,i(99374));case"FY":return r.t(null,void 0,i(776550));case"FH":return r.t(null,void 0,i(924468));case"TTM":return r.t(null,void 0,i(794236))}(0,s.ensureNever)(e)}},157260:(e,t,i)=>{"use strict";i.d(t,{Fundamental:()=>f});var s=i(777754),r=i(373123),o=i(903258),n=i(83387);class a extends n.StudyPriceAxisView{constructor(e,t){super(e,t),this._fundamental=e}_updatePaneRendererData(e){e.text="",this._showPaneLabel()&&(e.text=this._fundamental.labelTitle(),e.visible=!0)}}var l=i(471502);class h extends l.StudyPriceLineAxisView{constructor(e,t){super(e,t),this._model=e.model()}_isVisible(){return this._model.properties().childs().scalesProperties.childs().showFundamentalLastValue.value()&&this._study.properties().childs().styles.childs()[this._plotname].childs().trackPrice.value()}}var d=i(431235),u=i(482358);const c=s.t(null,void 0,i(490411));class _ extends d.StudyStatusProvider{sourceStatusText(){const e=this._source.status();return e.type===u.StudyStatusType.Error&&(e.errorDescription.error.startsWith("resolve_error ")||e.errorDescription.error.startsWith("Symbol resolve error:"))?c:super.sourceStatusText()}}var p=i(519872),m=i(884566),y=i(812363),v=i(168210);class f extends r.Study{constructor(e,t,i,s){super(e,t,i,s),this._linePlot=null;const r=s.plots.findIndex((e=>"line"===e.type));if(-1!==r){const e=s.plots[r],i=t.childs().styles.childs()[e.id];i.hasChild("plottype")&&(this._linePlot={plotIndex:r,
plotType:i.childs().plottype})}}labelTitle(){return this.title(!0)}createPriceAxisView(e){return new a(this,{plotIndex:e})}createPriceLineAxisView(e){return new h(this,e)}hasStateForAlert(){return!1}titleInParts(e,t,i,s){return[this._title(!!e)]}statusProvider(e){return new _(this,this._model.properties().childs().scalesProperties.childs().textColor)}firstValue(){var e;const t=super.firstValue();if(null!==t||null===this._linePlot||this._linePlot.plotType.value()!==p.LineStudyPlotStyle.StepLine&&this._linePlot.plotType.value()!==p.LineStudyPlotStyle.StepLineWithDiamonds)return t;const i=this._model.timeScale().visibleBarsStrictRange();if(null===i)return null;if(!this.properties().childs().visible.value()||!this.isActualInterval())return this._ownFirstValue;const s=this.data().search(i.firstBar()-1,y.PlotRowSearchMode.NearestLeft,this._linePlot.plotIndex+1);return null===s?null:null!==(e=s.value[this._linePlot.plotIndex+1])&&void 0!==e?e:null}priceRange(e,t){let i=super.priceRange(e,t);if(null===i){const e=this.firstValue();null!==e&&(i=this._postProcessPriceRange(new v.PriceRange(e,e)))}return i}_title(e){const t=this.metaInfo();let r;if(r=e?t.shortDescription:t.description,void 0!==t.financialPeriod){const n=e?(0,o.financialPeriodToShortString)(t.financialPeriod):(0,o.financialPeriodToString)(t.financialPeriod);r=`${s.t(r,{context:"study"},i(168716))} Â· ${n}`}const n=this._titleInputs(!0);return n.length>0&&(r=`${s.t(n[0],{context:"study"},i(168716))} Â· ${r}`),r}_titleInputsOptions(e,t){return{...super._titleInputsOptions(e,t),skipOptionalEmptySymbolInputs:!0,allowedInputTypes:["symbol"]}}_fillPrecalculatedAutoscaleInfo(e,t){const i=super._fillPrecalculatedAutoscaleInfo(e,t);if(null!==this._linePlot&&(this._linePlot.plotType.value()===p.LineStudyPlotStyle.StepLine||this._linePlot.plotType.value()===p.LineStudyPlotStyle.StepLineWithDiamonds)){const t=this.data().search(e,y.PlotRowSearchMode.NearestLeft);if(null!==t){const e=t.value[this._linePlot.plotIndex+1];i.baseValueMinMax=(0,m.mergeMinMax)(i.baseValueMinMax,{min:e,max:e})}}return i}}},274440:(e,t,i)=>{"use strict";function s(e,t,i){let s=e[`${t}#${i}`]||null;return null===s&&(s=e[t]||null),null===s&&Object.keys(e).forEach((i=>{null===s&&i.startsWith(`${t}#`)&&(s=e[i]||null)})),s}i.d(t,{getObsoleteIdeaSymbolInfo:()=>s})},348406:(e,t,i)=>{"use strict";i.d(t,{isNonSeriesStudy:()=>o,NonSeriesStudy:()=>n});var s=i(650151),r=i(373123);function o(e){return e instanceof n}class n extends r.Study{clearData(){this._customData=null,this._indexes=null}restoreData(e,t,i){super.restoreData(e),this._customData=t,this._indexes=i}state(e){const t=super.state(e);return e&&(t.nonSeriesData=this._customData,t.indexes=this._indexes),t}customData(){return this._customData}_setPaneViews(e){this._paneViews=e,this.model().lightUpdate()}_onDataUpdated(e,t,i){null!==t&&(t.indexes_replace?((0,s.assert)("nochange"!==i),this._indexes=i):(this._customData=t.data,"nochange"!==i&&(this._indexes=i))),super._onDataUpdated(e,t,i)}}},814606:(e,t,i)=>{"use strict";i.d(t,{
OverlayLegendValuesProvider:()=>x});var s=i(720444),r=i(150335),o=i(777754),n=i(638456),a=i(114123),l=i(768038),h=i(561068),d=i(418597),u=i(812363),c=i(480071),_=i(196312),p=i(424061),m=i(801750),y=i(414805),v=i(943546);const f=n.CheckMobile.any(),b=f&&!1,g=new h.PercentageFormatter,S=v.notAvailable,w=`${S} (${S}%)`;class x extends class{constructor(e,t){this._study=e,this._model=t,this._emptyValues=[{title:o.t(null,void 0,i(539280)),visible:!1,value:"",index:0,id:""},{title:o.t(null,void 0,i(330777)),visible:!1,value:"",index:1,id:""},{title:o.t(null,void 0,i(608136)),visible:!1,value:"",index:2,id:""},{title:o.t(null,void 0,i(931691)),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:o.t(null,void 0,i(349329)),visible:!1,value:"",index:6,id:""}]}getItems(){return this._emptyValues}getValues(e){var t,i,s;const o=this._emptyValues.map((e=>({...e})));if(this._model.timeScale().isEmpty())return o;if(0===this._study.data().size())return o;const n=this._showLastPriceAndChangeOnly();if((0,r.isNumber)(e)||(n?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),(0,r.isNumber)(e)||(e=this._study.data().lastIndex()))),null===e||!(0,r.isNumber)(e))return o;const h=this._study.data().search(e,u.PlotRowSearchMode.NearestLeft,1),c=this._model.backgroundTopColor().value();if(null===h)return o;const _=h.index,y=h.value,v=y[1],f=y[2],x=y[3],C=y[4];o[0].value=S,o[1].value=S,o[2].value=S,o[3].value=S,o[6].value=w;for(const e of o)e.visible=!n;const P=o[4];P.visible=!1;const{values:I}=this._changesData(C,v,_,n),T=(0,m.getPriceValueFormatterForSource)(this._study);if((0,m.shouldBeFormattedAsPercent)(this._study)||(0,m.shouldBeFormattedAsIndexedTo100)(this._study))o[6].value="";else if(void 0!==I){const e=this._study.formatter(),{currentPrice:s,prevPrice:r,change:n}=I,a=null!==(i=null===(t=e.formatChange)||void 0===t?void 0:t.call(e,s,r,!0))&&void 0!==i?i:e.format(n,!0);o[6].value=(0,l.forceLTRStr)(`${a} (${g.format(I.percentChange,!0)})`)}n?(o[5].value=null==C?S:T(C),o[5].visible=!0,o[6].visible=!0):(o[0].value=null==v?S:T(v),o[1].value=null==f?S:T(f),o[2].value=null==x?S:T(x),o[3].value=null==C?S:T(C),P.value=T(this._study.barFunction()(y)),o[5].visible=!1);let D=null;if(n&&!b)D=void 0===I||I.change>=0?p.SeriesBarColorer.upColor(this._study.properties()):p.SeriesBarColorer.downColor(this._study.properties());else{const e=this._study.barColorer().barStyle(_,!1),t=null!==(s=e.barBorderColor)&&void 0!==s?s:e.barColor;D=(0,d.calculateColor)(c,t)}D=(0,a.resetTransparency)((0,d.calculateColor)(c,D));for(const e of o)e.color=D;return o}_showLastPriceAndChangeOnly(){return f&&(null===this._model.crossHairSource().pane||(0,y.isLineToolName)(c.tool.value())||null!==this._model.lineBeingEdited())}_changesData(e,t,i,s){var r;if(s&&!b){const t=this._study.quotes();if(null!==t){return{values:{currentPrice:e,prevPrice:e-(null!==t.change?t.change:0),change:null!==t.change?t.change:0,percentChange:null!==t.change_percent?t.change_percent:0},
priceDirection:{basedOnCurrentBar:null!==t.change&&t.change>=0?0:1,basedOnPrevClose:null!==t.change&&t.change>=0?0:1}}}}else{const s=this._study.data().search(i-1,u.PlotRowSearchMode.NearestLeft,1),o=null!==(r=null==s?void 0:s.value[4])&&void 0!==r?r:null;if(null!==o&&null!=e&&null!=t)return{values:{currentPrice:e,prevPrice:o,change:e-o,percentChange:(0,_.barPercentChange)(o,e)},priceDirection:{basedOnCurrentBar:e>=t?0:1,basedOnPrevClose:e>=o?0:1}}}return null==e||null==t?{}:{priceDirection:{basedOnCurrentBar:e>=t?0:1,basedOnPrevClose:e>=t?0:1}}}}{constructor(e,t){super(e,t);const i=t.properties().childs().paneProperties.childs().legendProperties.childs();this._showBarChange=i.showBarChange,this._showSeriesOHLC=i.showSeriesOHLC,this._seriesStyle=e.properties().childs().style}getValues(e){const t=super.getValues(e);if(!this._showLastPriceAndChangeOnly()){const e=this._seriesStyle.value(),i=(0,s.isPriceSourceStyle)(e),r=12===e,o=this._showSeriesOHLC.value(),n=o&&!i,a=o&&i;t[0].visible=n&&!r,t[1].visible=n,t[2].visible=n,t[3].visible=n&&!r,t[6].visible=this._showBarChange.value()&&!r,t[4].visible=a}return t}}},215328:(e,t,i)=>{"use strict";i.d(t,{OverlayStatusProvider:()=>r});var s=i(431235);class r extends s.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(!0,void 0,!1,!1)}text(){return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(!0,void 0,!1,!1)}}},89262:(e,t,i)=>{"use strict";i.d(t,{PivotPointsStandardLastPricesView:()=>n});var s=i(812363);const r=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],o={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"};class n{constructor(e){this._visiblePivots=new Set,this._invidated=!0,this._prices=[],this._source=e}visiblePivots(){return this._visiblePivots}update(){this._invidated=!0}prices(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices}_updateImpl(){this._visiblePivots.clear();const e=this._source.model(),t=this._source.priceScale();if(null===t)return;if(e.timeScale().isEmpty()||t.isEmpty())return;const i=e.timeScale().visibleBarsStrictRange();if(null===i)return;if(!this._source.customData()||!this._source.customData().pivots)return;const n=e.mainSeries().bars().search(i.lastBar(),s.PlotRowSearchMode.NearestLeft);if(null===n)return;const a=n.index,l=this._source.customData().pivots,h=this._source.indexes(),d=this._source.properties().childs(),u=this._source.firstValue();for(let e=0;e<l.length;e++){if(!l[e])continue;const i=h[l[e].startIndex],s=h[l[e].endIndex],n=d.inputs.childs().showHistoricalPivots.value();if(i<=a&&(s>=a||n)){this._visiblePivots.add(l[e]),this._prices=[];for(let i=0;i<r.length;i++){const s=r[i],n=l[e][s];if(void 0===n||null===u)continue;const a=t.priceToCoordinate(n,u),h=s.toUpperCase(),c=o[h],_=d.levelsStyle.childs().colors.childs()[c].value();this._prices.push({
formatted:t.formatPrice(n,u),price:n,coordinate:a,color:_})}}}}}},444883:(e,t,i)=>{"use strict";i.d(t,{PaneRendererStandardPivotLabel:()=>r});var s=i(858063);class r{constructor(e,t,i){this._drawRects=[],this._cacheProvider=e,this._point=t,this._label=i}draw(e,t){const i=this._cacheProvider(t);e.save(),e.setTransform(1,0,0,1,0,0);const s=t.pixelRatio;this._drawRects=[];const r=t=>{const r=i.labelRectByIndex(t),o={left:Math.round(this._point.x-r.width+n),top:Math.round(this._point.y-r.height/2),width:r.width,height:r.height};return e.drawImage(i.canvas(),Math.round(r.left*s),Math.round(r.top*s),r.width*s,r.height*s,Math.round(o.left*s),Math.round(o.top*s),o.width*s,o.height*s),this._drawRects.push(o),r.width},o=this._label.split("/");let n=0;for(let e=0;e<o.length;e++){const t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(o[e]);e>0&&(n+=r(t+11)/2),n+=r(t)/2}e.restore()}hitTest(e){for(const t of this._drawRects)if(e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height)return new s.HitTestResult(s.HitTestResult.REGULAR);return null}}},661905:(e,t,i)=>{"use strict";i.d(t,{StandardPivotPointsImageCache:()=>n});var s=i(327714),r=i(741341),o=i(650151);class n{constructor(e,t,i,r){this._priceAxisFontSize=11,this._prices=[],this._labelWidth=0,this._paneRenderParams=e,this._recreateCanvasAndContext((0,s.size)({width:0,height:0})),this.reset({font:t,fontSize:i,backColors:r})}destroy(){delete this._canvas,delete this._cache}canvas(){return this._canvas}reset(e){this._renderParams=e,this._prices=[],this._cache.font=e.fontSize+"px "+e.font,this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce(((e,t)=>{const i=this._cache.measureText(t).width;return Math.max(i,e)}),0)}rowHeight(){return this._priceAxisFontSize+4}labelRectByIndex(e){return{left:0,top:Math.round(this._topByIndex(e)),width:Math.round(this._labelWidth+4),height:Math.round(this._renderParams.fontSize+8)}}setPrices(e){let t=!1;const i=(e,t)=>{const i=void 0===e,s=void 0===t;return(!i&&!s||i===s)&&(0,o.ensureDefined)(e).formatted===(0,o.ensureDefined)(t).formatted};if(e.length!==this._prices.length)t=!0;else for(let s=0;s<this._prices.length;s++)if(!i(this._prices[s],e[s])){t=!0;break}if(t){const t=this._labelWidth+6,i=this._renderParams.fontSize,o=Math.max(e.length,22)*(i+8);this._recreateCanvasAndContext((0,s.size)({width:t,height:o})),this._prices=e,this._cache.save(),(0,r.drawScaled)(this._cache,this._paneRenderParams.pixelRatio,(()=>{this._cache.translate(.5,.5),this._cache.font=this._renderParams.fontSize+"px "+this._renderParams.font,this._cache.textBaseline="middle";for(let e=0;e<this._prices.length;e++){if(!this._prices[e])continue;const t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][e];this._cache.fillStyle=this._renderParams.backColors[e],this._cache.fillText(t,0,this._centerByIndex(e)),this._cache.fillText("/",0,this._centerByIndex(e+11))}})),this._cache.restore(),this._prices=e}}_recreateCanvasAndContext(e){this._canvas=document.createElement("canvas"),
this._canvas.width=e.width*this._paneRenderParams.pixelRatio,this._canvas.height=e.height*this._paneRenderParams.pixelRatio,this._cache=(0,o.ensureNotNull)(this._canvas.getContext("2d"))}_centerByIndex(e){return Math.round((e+.5)*(this._renderParams.fontSize+8))}_topByIndex(e){return Math.round(e*(this._renderParams.fontSize+8))}}},174824:(e,t,i)=>{"use strict";i.d(t,{StandardPivotPointsPriceAxisView:()=>n});var s=i(841404),r=i(114123);const o=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"];class n extends s.PriceAxisView{constructor(e,t){super(),this._source=e,this._data=t;const i=t.name;this._completeName="P"===i.toUpperCase()?"P":`S${i[1]}/R${i[1]}`}_updateRendererData(e,t,i){e.visible=!1,t.visible=!1;const s=this._source.properties().childs();if(!s.visible.value())return;const n=this._completeName,a=s.levelsStyle.childs().visibility.childs();if(!a[n]||!a[n].value())return;const l=this._source.model().timeScale(),h=this._source.priceScale();if(l.isEmpty()||null===l.visibleBarsStrictRange()||null!==h&&h.isEmpty())return;const d=this._source.customData();if(!d||!d.pivots)return;const u=this._source.pricesView().prices()[o.indexOf(this._data.name.toUpperCase())];if(!u)return;i.background=(0,r.resetTransparency)(u.color),i.textColor=this.generateTextColor(i.background),i.coordinate=u.coordinate,i.floatCoordinate=u.floatCoordinate;const c=this._source.model().properties().childs().scalesProperties.childs();c.showStudyLastValue.value()&&(e.text=u.formatted,e.visible=!0),c.showStudyPlotLabels.value()&&(t.text=this._source.priceLabelText(this._data.name),t.visible=!0)}}},470720:(e,t,i)=>{"use strict";var s=i(168210).PriceRange,r=i(86441).Point,o=i(397581).StudyStatusView,n=i(4836).StudyDataWindowView,a=i(348406).NonSeriesStudy,l=i(174824).StandardPivotPointsPriceAxisView,h=i(733352).PanePriceAxisView,d=i(858063).HitTestResult,u=i(28035).CompositeRenderer,c=i(112824).areEqualPaneRenderParams,_=i(661905).StandardPivotPointsImageCache,p=i(89262).PivotPointsStandardLastPricesView,m=i(444883).PaneRendererStandardPivotLabel,y=i(803936).HorizontalLineRenderer,v=i(623331);const{LINESTYLE_SOLID:f}=i(631586);class b{constructor(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={}}setCache(e){this._cache=e}priceAxisViews(e,t){return this._priceAxisViews}mergeLabel(e,t,i){var s=""+t;void 0===e[s]?(e[s]={},e[s].text=i,e[s].ids=[this.complete(i)]):(e[s].text+="/"+i,e[s].ids.push(this.complete(i)))}complete(e){return"P"===e?e:"S"+e[1]+"/R"+e[1]}update(){this._invalidated=!0}_updateImpl(){if(this._source.pricesView().prices(),this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){var e=this._source.customData().pivots,t=this._source._indexes,i=this._model.timeScale(),s=this._source.priceScale();if(s&&!s.isEmpty()&&!i.isEmpty()&&e){var r=i.visibleBarsStrictRange(),o=r.firstBar(),n=r.lastBar();if(this._source.ownerSource())for(var a=this._source.ownerSource().firstValue(),l=0;l<e.length;l++)if(e[l]){var h=t[e[l].startIndex],d=t[e[l].endIndex]
;if(!(d<o||h>n)){var u={},c=this._source.properties().levelsStyle.visibility;c.P.value()&&this.mergeLabel(u,e[l].p,"P"),c["S1/R1"].value()&&(this.mergeLabel(u,e[l].s1,"S1"),this.mergeLabel(u,e[l].r1,"R1")),c["S2/R2"].value()&&(this.mergeLabel(u,e[l].s2,"S2"),this.mergeLabel(u,e[l].r2,"R2")),c["S3/R3"].value()&&(this.mergeLabel(u,e[l].s3,"S3"),this.mergeLabel(u,e[l].r3,"R3")),c["S4/R4"].value()&&(this.mergeLabel(u,e[l].s4,"S4"),this.mergeLabel(u,e[l].r4,"R4")),c["S5/R5"].value()&&(this.mergeLabel(u,e[l].s5,"S5"),this.mergeLabel(u,e[l].r5,"R5"));var _=i.indexToCoordinate(h),p=i.indexToCoordinate(d);for(var m in u){var y=parseFloat(m),v=s.priceToCoordinate(y,a);this._pivots.push({x1:_,x2:p,y:v,label:u[m].text,labelIds:u[m].ids,src:e[l]})}}}}}}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);for(var e=new u,t=this._source.properties().levelsStyle.colors,i=this._source.properties().levelsStyle.widths,s=this._source.visiblePivots(),o=0;o<this._pivots.length;o++){var n=this._pivots[o];if(s.has(n.src)){var a={width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t[n.labelIds[0]].value(),linewidth:i[n.labelIds[0]].value(),linestyle:f,y:n.y,left:n.x1,right:n.x2},l=new y;if(l.setData(a),l.setHitTest(new d(d.REGULAR)),e.append(l),this._source.properties().levelsStyle.showLabels.value()){var h=function(e){return this._source.getCache(e)}.bind(this);e.append(new m(h,new r(n.x1,n.y),n.label))}}}return e}}t.study_PivotPointsStandard=class extends a{constructor(e,t,i,s){super(e,t,i,s);for(var r=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],o=this.properties().levelsStyle.visibility,n=0;n<r.length;n++)o[r[n]].listeners().subscribe(this,this.processHibernate);this._cacheDrawParams=null,this._cache=null}indexes(){return this._indexes}getCache(e){return this.createCacheIfRequred(e),this._cache}createCacheIfRequred(e){if(null===this._cache||null==this._cacheDrawParams||!c(e,this._cacheDrawParams)){this._cache&&this._cache.destroy();var t=this._getActualCacheParams();this._cache=new _(e,t.font,t.fontSize,t.backColors),this._cache.setPrices(this._pricesView.prices()),this._cacheDrawParams=e,this._cacheInvalidated=!1,this._cache.reset(t),this._cache.setPrices(this._pricesView.prices())}}lastValueData(e,t,i){var s=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase()),r=this._pricesView.prices()[s];return null!=r?r:{noData:!0}}priceLabelText(e){return this._metaInfo.shortDescription+":"+e.toUpperCase()}pricesView(){return this._pricesView}_getActualCacheParams(){var e={};return e.font=v.CHART_FONT_FAMILY,e.fontSize=this.properties().fontsize.value(),
e.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],e}updateAllViews(){super.updateAllViews(),this._pricesView.update()}_createViews(){this._cache&&(this._cache.destroy(),this._cache=null),this._priceAxisViews=[];var e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"];this._paneViews.length=0,this._labelPaneViews=[];var t=new b(this._model,this);t.setCache(this._cache),this._paneViews.push(t),this._mainPaneView=t;for(var i=0;i<e.length;i++){var s=new l(this,{name:e[i],cache:this._cache});this._priceAxisViews.push(s),this._labelPaneViews.push(new h(s,this,this._model))}this._dataWindowView||(this._dataWindowView=new n(this,this._model)),this._statusView||(this._statusView=new o(this,this._model.properties().scalesProperties.textColor)),this._legendView=null,this._pricesView=new p(this)}visiblePivots(){return this._pricesView.visiblePivots()}_postProcessGraphics(){}isVisible(){if(!this.properties().visible.value()||!this.isActualInterval())return!1;for(var e=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],t=this.properties().levelsStyle.visibility,i=0;i<e.length;i++)if(t[e[i]].value())return!0;return!1}stop(){super.stop(),this._cache&&(this._cache.destroy(),this._cache=null)}priceRange(e,t){if(!this.customData()||!this.customData().pivots||!this._indexes)return null;if(!this.priceScale())return null;for(var i=this.customData().pivots,r=this._indexes,o=null,n=0;n<i.length;n++)if(i[n]){var a=r[i[n].startIndex];if(!(r[i[n].endIndex]<e||a>t)){var l=[],h=this._properties.levelsStyle.visibility;h.P.value()&&l.push(i[n].p),h["S1/R1"].value()&&l.push(i[n].s1,i[n].r1),h["S2/R2"].value()&&l.push(i[n].s2,i[n].r2),h["S3/R3"].value()&&l.push(i[n].s3,i[n].r3),h["S4/R4"].value()&&l.push(i[n].s4,i[n].r4),h["S5/R5"].value()&&l.push(i[n].s5,i[n].r5);for(var d=0;d<l.length;d++)l[d]&&(null===o?o=new s(l[d],l[d]):o.apply(l[d],l[d]))}}return this.priceScale().isLog()&&o?new s(this.priceScale().priceToLogical(o.minValue()),this.priceScale().priceToLogical(o.maxValue())):o}}},943221:(e,t,i)=>{"use strict";i.r(t),i.d(t,{createStudy:()=>oi,isESDStudy:()=>si,isFundamentalStudy:()=>ii,isRollDatesStudy:()=>ri,isStudy:()=>Kt,isStudyStrategy:()=>ei,isStudyStub:()=>ti,studyColorRotationMode:()=>ni,useSameColorRotationComparator:()=>li});var s=i(87476),r=i(108184),o=i(373123),n=i(784093),a=i(298297),l=i.n(a),h=i(650151),d=i(551238),u=i(777754),c=i(121525),_=i(768038),p=i(835343),m=i(758337),y=i(114123),v=i(538708),f=i(561068),b=i(738023),g=i(623331),S=i(858063),w=i(631586),x=i(49568),C=i(914679);const P={
fillPath:new Path2D("M8.961.92a3 3 0 0 1 3.078 0l7.5 4.48A3 3 0 0 1 21 7.975V20a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V7.975A3 3 0 0 1 1.461 5.4l7.5-4.48z"),strokePath:new Path2D("M9.867 2.742c.39-.23.875-.23 1.266 0l7.5 4.406c.382.225.617.635.617 1.078V20c0 .69-.56 1.25-1.25 1.25H3c-.69 0-1.25-.56-1.25-1.25V8.226c0-.443.235-.853.617-1.078l7.5-4.406z")},I={fillPath:new Path2D("M8.961 22.08a3 3 0 0 0 3.078 0l7.5-4.48A3 3 0 0 0 21 15.025V3a3 3 0 0 0-3-3H3a3 3 0 0 0-3 3v12.025A3 3 0 0 0 1.461 17.6l7.5 4.48z"),strokePath:new Path2D("M9.866 20.257c.391.23.877.23 1.268 0l7.5-4.414a1.25 1.25 0 0 0 .616-1.078V3c0-.69-.56-1.25-1.25-1.25H3c-.69 0-1.25.56-1.25 1.25v11.765c0 .443.234.853.616 1.078l7.5 4.414z")},T={fillPath:new Path2D("M3 0h15c1.662 0 3 1.338 3 3v15c0 1.662-1.338 3-3 3H3c-1.662 0-3-1.338-3-3V3c0-1.662 1.338-3 3-3z"),strokePath:new Path2D("M3 1.75h15c.693 0 1.25.557 1.25 1.25v15c0 .693-.557 1.25-1.25 1.25H3c-.692 0-1.25-.558-1.25-1.25V3c0-.692.558-1.25 1.25-1.25z")};function D(e,t,i,s,r){const o=i.pixelRatio;e.save(),e.translate(t.x-s.lollipop.width*o/2,t.y-s.lollipop.height*o/2),e.scale(o,o),s.lollipop.fillCircle&&s.lollipop.backgroundColor&&(e.fillStyle=s.lollipop.backgroundColor,e.fill(r.fillPath)),e.strokeStyle=s.lollipop.strokeStyle,e.lineWidth=Math.round(s.lollipop.lineWidth*o)/o,(0,C.setLineStyle)(e,w.LINESTYLE_SOLID),s.lollipop.fillCircle&&s.lollipop.fillStyle&&(e.fillStyle=s.lollipop.fillStyle,e.fill(r.strokePath)),e.stroke(r.strokePath),e.restore()}class R extends x.LollipopRenderer{_drawLollipop(e,t,i){const s=this._data.style;switch(s.type){case"Positive":!function(e,t,i,s){D(e,t,i,s,P)}(e,t,i,s);break;case"Negative":!function(e,t,i,s){D(e,t,i,s,I)}(e,t,i,s);break;default:!function(e,t,i,s){D(e,t,i,s,T)}(e,t,i,s)}}}var L=i(885418),V=i(86441),k=i(224743),A=i(747342),E=i(223616),N=i(262909),M=i(10199),B=i(199687),F=i(460321);class O extends F.LollipopPaneView{constructor(){super(...arguments),this._getMoreFinancialsLinkInitialTabId=B.PageId.Overview,this._symbolName=null}addLollipop(e,t,i,s,r,o,n){var a,l;if(null===this._symbolName&&(this._symbolName=null!==(l=null===(a=this._model.mainSeries().symbolInfo())||void 0===a?void 0:a.name)&&void 0!==l?l:null,null===this._symbolName))return;const h=`${this._source.metaInfo().id}_${this._lollipopId(o)}_${this._symbolName}`,d=this._lollipops[h],u=void 0!==d?d.itemIndex:this._lollipopsCounter++,c=this._model.lastHittestData(),_=h===this.getLastClickedLollipopId(),p=this._model.hoveredSource()===this._source&&null!==c&&c.activeItem===u;this._lollipops[h]={id:h,itemIndex:u,visible:!0,basePoint:new V.Point(i.indexToCoordinate(r),e),hovered:p,active:_,stack:n,...this.extraData(o)}}renderer(e,t){return this._invalidated&&(this._updateImpl(t,e),this._invalidated=!1),this._source.hideLollipops()?null:this._renderer}_lollipopId(e){return e[0].toString()}_updateImpl(e,t){const i=this._source.data(),s=this._model.timeScale(),r=s.visibleBarsStrictRange(),o=this._model.mainSeries().bars(),n=this._model.mainSeries(),a=n.priceScale(),l=n.firstBar()
;if(a.isEmpty()||s.isEmpty()||!l||!i||null===r)return;if(this._source.hideLollipops())return void this.clearLastClicked();for(const e in this._lollipops)this._lollipops.hasOwnProperty(e)&&((0,h.ensureDefined)(this._lollipops[e]).visible=!1);const d=this._getY(),u=r.firstBar(),c=r.lastBar(),_=this._source.zorder(),p=this._model.mainPane().lollipopDataSources().filter((e=>e!==this._source&&e.zorder()>_&&e.isVisible()));i.range(u,c).each(((e,t)=>{let i=0;for(const t of p)i+=t.lollipopsAtIndex(e);return this.addLollipop(d,o,s,a,e,t,i),!1})),this.afterUpdate(d,o,s,a),this._createRenderers(e,t)}_formatDate(e,t){let i,s=!0;if(s=E.Version.parse(this._source.metaInfo().version).isLessOrEqual(new E.Version(137,0)),s){let t="Etc/UTC";const s=this._model.mainSeries();if(!s.isDWM()&&(t=this._model.properties().childs().timezone.value(),"exchange"===t)){const e=s.symbolInfo();t=e&&e.timezone||""}const r=(0,A.get_timezone)(t);i=(0,A.utc_to_cal)(r,e)}else i=new Date(e);return(t?"â‰ˆ ":"")+this._model.dateFormatter().format(i)}_getMoreFinancialsLink(){var e;if(!/\betf\b/i.test((null===(e=this._model.mainSeries().symbolInfo())||void 0===e?void 0:e.description)||""))return{text:this._getMoreFinancialsLinkText(),onClick:()=>{k.globalCloseDelegate.fire(),s.enabled("mobile_app_action_open_financials_webview")?(0,M.openFinancialsWebview)(new URLSearchParams):(0,N.showFinancialsDialog)({initialTabId:this._getMoreFinancialsLinkInitialTabId})}}}_getMoreFinancialsLinkText(){var e,t;return u.t(null,{replace:{symbol:null!==(t=null===(e=this._model.mainSeries().symbolInfo())||void 0===e?void 0:e.name)&&void 0!==t?t:""}},i(633282))}_onSymbolOrIntervalChanged(){super._onSymbolOrIntervalChanged(),this._symbolName=null}}var H=i(385442),W=i(777566),z=i(261820),U=i(274469),q=i(788600),G=i(323373),$=i(627086);const Y=u.t(null,void 0,i(376434)),Q=u.t(null,void 0,i(783851)),j=u.t(null,void 0,i(802985)),Z=u.t(null,void 0,i(396269)),X=u.t(null,void 0,i(180160)),J=u.t(null,void 0,i(68625)),K=u.t(null,void 0,i(94647)),ee=u.t(null,void 0,i(634135)),te=u.t(null,void 0,i(400241)),ie=u.t(null,void 0,i(233481)),se=u.t(null,void 0,i(676912)),re=u.t(null,void 0,i(651924)),oe=u.t(null,void 0,i(744441)),ne=u.t(null,void 0,i(993225)),ae=u.t(null,void 0,i(259285)),le=u.t(null,void 0,i(945855)),he=u.t(null,void 0,i(354079)),de={dark:(0,d.getHexColorByName)("color-cold-gray-900"),light:(0,d.getHexColorByName)("color-white")},ue={positive:(0,d.getHexColorByName)("color-minty-green-600"),negative:(0,d.getHexColorByName)("color-ripe-red-600"),future:(0,d.getHexColorByName)("color-grapes-purple-a400"),unknown:(0,d.getHexColorByName)("color-cold-gray-350")},ce={positive:(0,d.getHexColorByName)("color-minty-green-500"),negative:(0,d.getHexColorByName)("color-ripe-red-500"),future:(0,d.getHexColorByName)("color-grapes-purple-a200"),unknown:(0,d.getHexColorByName)("color-cold-gray-700")};function _e(e){return e?ue:ce}const pe=new f.PercentageFormatter,me=new b.VolumeFormatter;class ye extends O{}class ve extends ye{constructor(e,t,i){super(e,t,i)}styles(e){return e?{positive:(0,
d.getHexColorByName)("color-minty-green-600"),negative:(0,d.getHexColorByName)("color-ripe-red-600"),future:(0,d.getHexColorByName)("color-grapes-purple-a400"),unknown:(0,d.getHexColorByName)("color-cold-gray-350")}:{positive:(0,d.getHexColorByName)("color-minty-green-500"),negative:(0,d.getHexColorByName)("color-ripe-red-500"),future:(0,d.getHexColorByName)("color-grapes-purple-a200"),unknown:(0,d.getHexColorByName)("color-cold-gray-700")}}extraData(e){const t=e[8],i=14===t,s=e[1],r=e[2],o=e[3],n=e[4],a=i?null:e[5],l=null!=a&&null!=r?a-r:null,h=e[6],d=i?null:e[7];let u;return null!=t?t<20?u="Future":null!==l&&(u=l<0?"Negative":"Positive"):null!==l?u=l<0?"Negative":"Positive":n>Date.now()&&(u="Future"),{standardized:s,reported:a,estimate:r,revenueValue:d,revenueEstimate:h,period:o,date:n,type:u,timeType:null!=t?t:void 0}}afterUpdate(e,t,i,s){const r=this._source.getEstimate();if(r){const o=r.value.slice();o[4]*=1e3,this.addLollipop(e,t,i,s,r.index,o)}}getStyle(e){if(void 0===e.type)return super.getStyle(e);const t=e.active?"active":e.hovered?"hovered":"default";let i=t;e.stack&&(i+="_stack:"+e.stack);let s=this._getStyleObject(e.type,i);if(null!==s)return s;if(this._stylesCache||(this._stylesCache={}),!this._stylesCache[i]){s=this._getStyleObject(e.type,t);const r=(0,m.clone)(s);r&&(e.stack&&(r.lollipop.incHeight=25*e.stack),this._stylesCache[i]=r)}return this._stylesCache[i]}_createTooltipContent(e){const t=e.standardized,i=null!=t,s=e.reported,r=null!=s,o=e.estimate,n=null!=o,l=r&&n?s-o:null;let d=e.revenueEstimate,u=!1;null!=d&&(u=!0,d*=1e6);let p=e.revenueValue,m=!1;null!=p&&(m=!0,p*=1e6);const y=m&&u?p-d:null,v=_e(this._model.isDark());let f,b,g,S,w;switch(e.type){case"Future":b=v.future,f=z;break;case"Negative":b=v.negative,f=W;break;case"Positive":b=v.positive,f=H;break;default:b=v.unknown,f=z}switch(e.timeType){case 12:case 22:g=$,S=c.LollipopGroupIcons.AfterMarketClose,w=he;break;case 11:case 21:g=G,S=c.LollipopGroupIcons.BeforeMarketOpen,w=le}const x=10===e.timeType||14===e.timeType,C={name:se,value:this._formatDate(e.date,x)};g&&(C.valueRightIcon={iconContent:g,iconClass:S,tooltipText:w});const P=[C];e.period&&P.push({name:oe,value:a.unix(e.period).format("MMM 'YY")});const I={type:"common",title:m||u?Y:Q,subTitle:P,tooltipIcon:f,style:{color:b},content:[],anchor:this._getMoreFinancialsLink()},T={title:Q,content:[]};if(i&&T.content.push({name:j,value:(0,L.roundToThirdDigit)(t)}),r&&T.content.push({name:Z,value:(0,L.roundToThirdDigit)(s)}),n&&T.content.push({name:X,value:(0,L.roundToThirdDigit)(o)}),null!==l){const e=100*Math.abs(l/o);let t=(0,L.roundToThirdDigit)(l);isFinite(e)&&(t+=" ("+pe.format(e)+")"),T.content.push({name:J,value:(0,_.forceLTRStr)(t),style:{fontWeight:"bold",color:b}})}if((0,h.ensureDefined)(I.content).push(T),m||u){const e={title:ae,content:[]};if(m&&e.content.push({name:Z,value:me.format(p)}),u&&e.content.push({name:X,value:me.format(d)}),null!==y){const t=100*Math.abs(y/d);let i=me.format(y);isFinite(t)&&(i+=" ("+pe.format(t)+")"),e.content.push({name:J,value:(0,_.forceLTRStr)(i),
style:{fontWeight:"bold",color:y>=0?v.positive:v.negative}})}(0,h.ensureDefined)(I.content).push(e)}return[I]}_showBarLine(e){return super._showBarLine(e)||this._model.mainSeries().properties().childs().esdShowBreaks.value()}_createRendererForLollipop(e,t){return new R(e,new S.HitTestResult(S.HitTestResult.CUSTOM,t),this._textWidthCache)}_recreateStyles(e){const t=e.isDark(),i=_e(t),s=i.unknown,r={barLine:{lineStyle:w.LINESTYLE_DASHED,lineWidth:1,strokeStyle:s},lollipop:{width:21,height:21,bottom:2,lineWidth:1.5,importance:"earnings",strokeStyle:s,backgroundColor:t?de.dark:de.light,fillCircle:!0,text:{label:"E",strokeStyle:s,font:(0,v.makeFont)(12,g.CHART_FONT_FAMILY,"bold")}}},o={lollipop:{fillStyle:(0,y.generateColor)(s,85)}},n={lollipop:{fillStyle:s,text:{strokeStyle:(0,d.getHexColorByName)("color-cold-gray-50")}}};this._defaultStyle=(0,p.deepCopy)(r),this._hoveredStyle=(0,m.merge)((0,p.deepCopy)(r),o),this._activeStyle=(0,m.merge)((0,p.deepCopy)(r),n);const a=(e,t)=>{const i=(0,p.deepCopy)(r);return i.barLine.strokeStyle=e,i.lollipop.strokeStyle=e,i.lollipop.text.strokeStyle=e,i.type=t,o.lollipop.fillStyle=(0,y.generateColor)(e,85),n.lollipop.fillStyle=e,{default:i,hovered:(0,m.merge)((0,p.deepCopy)(i),o),active:(0,m.merge)((0,p.deepCopy)(i),n)}};n.lollipop.text.strokeStyle=(0,d.getHexColorByName)("color-grapes-purple-50");const l=a(i.future,"Future");r.lollipop.height=23,r.lollipop.text.deltaY=1,n.lollipop.text.strokeStyle=(0,d.getHexColorByName)("color-minty-green-50");const h=a(i.positive,"Positive");r.lollipop.bottom=.5,r.lollipop.text.deltaY=-.5,n.lollipop.text.strokeStyle=(0,d.getHexColorByName)("color-ripe-red-50");const u=a(i.negative,"Negative");this._earningTypeStyles={Future:l,Positive:h,Negative:u},this._stylesCache=null}_getStyleObject(e,t){const i=this._earningTypeStyles[e];switch(t){case"default":return i.default;case"hovered":return i.hovered;case"active":return i.active}return null}}const fe=(0,d.getHexColorByName)("color-tan-orange-600"),be=(0,d.getHexColorByName)("color-tan-orange-500");function ge(e){return e?fe:be}class Se extends ye{extraData(e){const t=e[1];return{numerator:e[2],denominator:t,date:e[3]}}_createTooltipContent(e){let t=K;return(0,m.isNumber)(e.numerator)&&(0,m.isNumber)(e.denominator)&&(t+=": "+e.numerator+"/"+e.denominator),[{type:"common",title:t,subTitle:this._formatDate(e.date),tooltipIcon:U,style:{color:ge(this._model.isDark())},anchor:this._getMoreFinancialsLink()}]}_recreateStyles(e){const t=e.isDark(),i=ge(t),s={barLine:{lineStyle:w.LINESTYLE_DASHED,lineWidth:1,strokeStyle:i},lollipop:{width:23,height:23,bottom:1,lineWidth:1.5,importance:"splits",strokeStyle:i,backgroundColor:t?de.dark:de.light,fillCircle:!0,text:{label:"S",strokeStyle:i,font:(0,v.makeFont)(12,g.CHART_FONT_FAMILY,"bold")}}},r={lollipop:{fillStyle:(0,y.generateColor)(i,85)}},o={lollipop:{fillStyle:i,text:{strokeStyle:(0,d.getHexColorByName)("color-tan-orange-50")}}};this._defaultStyle=s,this._hoveredStyle=(0,m.merge)((0,p.deepCopy)(s),r),this._activeStyle=(0,m.merge)((0,p.deepCopy)(s),o),
this._stylesCache=null}}const we=(0,d.getHexColorByName)("color-tv-blue-600"),xe=(0,d.getHexColorByName)("color-tv-blue-500");function Ce(e){return e?we:xe}class Pe extends ye{constructor(){super(...arguments),this._getMoreFinancialsLinkInitialTabId=B.PageId.Dividends}extraData(e){return{amountDividends:e[1],date:e[2],adjustedAmountDividends:e[3],paymentDate:e[4]}}_createTooltipContent(e){const{date:t,amountDividends:i,paymentDate:s,adjustedAmountDividends:r}=e,o=[{name:re,value:this._formatDate(t)}];return(0,m.isNumber)(i)&&o.push({name:te,value:(0,L.roundToThirdDigit)(i)}),(0,m.isNumber)(r)&&o.push({name:ie,value:(0,L.roundToThirdDigit)(r)}),(0,m.isNumber)(s)&&o.push({name:ne,value:this._formatDate(s)}),[{type:"common",title:ee,subTitle:o,tooltipIcon:q,style:{color:Ce(this._model.isDark())},anchor:this._getMoreFinancialsLink()}]}_recreateStyles(e){const t=e.isDark(),i=Ce(t),s={barLine:{lineStyle:w.LINESTYLE_DASHED,lineWidth:1,strokeStyle:i},lollipop:{width:23,height:23,bottom:1,lineWidth:1.5,importance:"dividends",strokeStyle:i,backgroundColor:t?de.dark:de.light,fillCircle:!0,text:{label:"D",strokeStyle:i,font:(0,v.makeFont)(12,g.CHART_FONT_FAMILY,"bold")}}},r={lollipop:{fillStyle:(0,y.generateColor)(i,85)}},o={lollipop:{fillStyle:i,text:{strokeStyle:(0,d.getHexColorByName)("color-tv-blue-50")}}};this._defaultStyle=s,this._hoveredStyle=(0,m.merge)((0,p.deepCopy)(s),r),this._activeStyle=(0,m.merge)((0,p.deepCopy)(s),o),this._stylesCache=null}_getMoreFinancialsLinkText(){var e,t;return u.t(null,{replace:{symbol:null!==(t=null===(e=this._model.mainSeries().symbolInfo())||void 0===e?void 0:e.name)&&void 0!==t?t:""}},i(177743))}}var Ie=i(569523),Te=i(149590),De=i(194405),Re=i(397581),Le=i(262673);class Ve extends o.Study{constructor(e,t,i,s){super(e,t,i,s),this._restartRequired=!1,this.setOwnerSource(e.mainSeries());const r=this._externalVisibilityProperty();null!==r&&(this._destroyPropertyBinder=(0,Le.bindProperties)(r,this._properties.childs().visible))}destroy(){var e;this._paneView.destroy(),null===(e=this._destroyPropertyBinder)||void 0===e||e.call(this),super.destroy()}lollipopsAtIndex(e){return!this.hideLollipops()&&this.data().contains(e)?1:0}hideLollipops(){return this._model.timeScale().barSpacing()/23<2/3&&this._model.mainSeries().intervalObj().inMilliseconds()>=432e6}start(){super.start(),this._model.mainSeries().dataEvents().symbolResolved().subscribe(this,this._initPlotStash),this._initPlotStash()}stop(){super.stop(),this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._initPlotStash)}restoreData(e){e.data=e.data.filter((e=>e.index!==Te.INVALID_TIME_POINT_INDEX&&this.isValid(e.value))),this._transformData(e.data),e.end=e.data.length,super.restoreData(e)}onClickOutside(){this._paneView.processClickOutside()}preferNoScale(){return!0}showInObjectTree(){return!1}isSavedInStudyTemplates(){return!1}isRemovedByStudyTemplates(){return!1}removeByRemoveAllStudies(){return!1}isDraggable(){return!1}copiable(){return!1}statusView(){return null}hasStateForAlert(){return!1}isSavedInChart(e){
return Boolean(e)}isSpeciallyZOrderedSource(){return!0}isUserDeletable(){return!1}canHaveChildren(){return!1}isIncludedInAutoScale(){return!1}isCurrencySource(){return!1}isUnitSource(){return!1}_externalVisibilityProperty(){return null}_transformData(e){for(let t=e.length-1;t>=0;--t){const i=e[t],s=i.index!==Te.INVALID_TIME_POINT_INDEX&&this.isValid(i.value);this._updatePlotStash(i,s)}}_createViews(){this._paneViews=[this._paneView],this._priceAxisViews=[],this._dataWindowView||(this._dataWindowView=new De.DataWindowView),this._legendView=null,this._statusView||(this._statusView=new Re.StudyStatusView(this))}_seriesDataRangeToSave(e){return this._model.timeScale().visibleBarsStrictRange()}async _showTooltip(e,t){const s=this._model,r=this._model.timeScale(),o=[r.onScroll(),r.barSpacingChanged(),s.mainSeries().onSymbolIntervalChanged()],n=this._paneView.processClickOutside.bind(this._paneView),a=this._paneView.clearLastClicked.bind(this._paneView),l=t();if(null===l)return;const{showLollipopTooltip:h}=await Promise.all([i.e(7624),i.e(96972),i.e(6092),i.e(36720),i.e(39683),i.e(33599),i.e(16807),i.e(50690),i.e(49039)]).then(i.bind(i,617757));h({items:l,position:e,customCloseSubscriptions:o,onClickOutside:n,onCustomClose:a,showScrollFades:!0})}_initPlotStash(){this._plotStash={}}_updatePlotStash(e,t){if(this._restartRequired||!this._plotStash)return;const i=e.value.slice(),s=i.shift(),r=String(s);t?this._plotStash[r]?String(this._plotStash[r])!==String(i)&&(this._restartRequired=!0):this._plotStash[r]=i:this._plotStash[r]&&(this._restartRequired=!0)}}const ke=Ie.sortSourcesPreOrdered.Dividends,Ae=Ie.sortSourcesPreOrdered.Splits,Ee=Ie.sortSourcesPreOrdered.Earnings;class Ne extends Ve{zorder(){return ke}isValid(e){const t=e[2];return(0,m.isNumber)(t)}state(e,t){const i=super.state(e,t);return i.data.version=2,i}restoreData(e){var t;(null!==(t=e.version)&&void 0!==t?t:1)<2&&e.data.forEach((e=>{e.value[3]=null})),super.restoreData(e)}_createViews(){this._paneView=new Pe(this._model,this,this._showTooltip.bind(this)),super._createViews()}_externalVisibilityProperty(){return this._model.mainSeries().properties().childs().esdShowDividends}}class Me extends Ve{zorder(){return Ae}isValid(e){const t=e[3];return(0,m.isNumber)(t)}_createViews(){this._paneView=new Se(this._model,this,this._showTooltip.bind(this)),super._createViews()}_externalVisibilityProperty(){return this._model.mainSeries().properties().childs().esdShowSplits}}class Be extends Ve{constructor(){super(...arguments),this._estimatePlotRow=null}zorder(){return Ee}isValid(e){const t=e[3],i=e[4];return(0,m.isNumber)(t)&&(0,m.isNumber)(i)}restoreData(e){super.restoreData(e);let t=null;if(e.estimate)t=this._restorePointset(e.estimate);else if(e.pointSets&&null==e.pointSetsVersion){const i=this._getSymbol();if(null!==i){const s=i.split(":")[1].toUpperCase();e.pointSets[i]?t=this._restorePointset(e.pointSets[i]):e.pointSets[s]&&(t=this._restorePointset(e.pointSets[s]))}}else if(e.pointSets&&"1"===e.pointSetsVersion){const i=this._getSymbol();if(null!==i){
const s=i.split(":")[1].toUpperCase();e.pointSets[i]?t=e.pointSets[i].estimate:e.pointSets[s]&&(t=e.pointSets[s].estimate)}}else null!=e.estimatePlotRow&&"2"===e.pointSetsVersion&&(t=e.estimatePlotRow);this._estimatePlotRow=t}getEstimate(){return this._estimatePlotRow}_createViews(){this._paneView=new ve(this._model,this,this._showTooltip.bind(this)),super._createViews()}_externalVisibilityProperty(){return this._model.mainSeries().properties().childs().esdShowEarnings}_getSymbol(){var e,t;return null!==(t=null===(e=this._series.symbolInfo())||void 0===e?void 0:e.base_name[0].toLowerCase())&&void 0!==t?t:null}_restorePointset(e){return{index:e.index,value:[e.tickmark,void 0,e.estimate,(0,m.isNumber)(e.period)?e.period:l()(e.period).unix(),(0,m.isNumber)(e.date)?e.date:l()(e.date).unix()]}}}var Fe=i(822914),Oe=i(220479),He=i(528474);const We=[u.t(null,void 0,i(926910)),u.t(null,void 0,i(316467)),u.t(null,void 0,i(684675)),u.t(null,void 0,i(997637)),u.t(null,void 0,i(668327)),u.t(null,void 0,i(49385)),u.t(null,void 0,i(323230)),u.t(null,void 0,i(486797)),u.t(null,void 0,i(661132)),u.t(null,void 0,i(290784)),u.t(null,void 0,i(171194)),u.t(null,void 0,i(55669))],ze=new Path2D("m13 6.02.5-.52-.5-.52-3.33-3.5-1.09 1.04 2.13 2.23H6.23L2.13.95l-1.01 1.1 4.3 4 .22.2H10.71L8.58 8.48l1.09 1.04 3.34-3.5Zm-9.4.45-3 3 1.06 1.06 3-3L3.6 6.47Z");class Ue extends x.LollipopRenderer{_drawLollipop(e,t,i){const s=i.pixelRatio,r=this._data.style;e.save(),e.translate(t.x,t.y),e.scale(s,s),e.beginPath(),e.strokeStyle=r.outerBorderColor,e.lineWidth=1,e.arc(0,0,11,0,2*Math.PI),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),e.arc(0,0,10.5,0,2*Math.PI),e.fill(),e.translate(-6.5,-5.5),e.fillStyle=r.iconColor,e.fill(ze),e.translate(6.5,5.5),r.borderColor&&(e.strokeStyle=r.borderColor,e.lineWidth=1.5,(0,C.setLineStyle)(e,w.LINESTYLE_SOLID),e.beginPath(),e.arc(0,0,9.75,0,2*Math.PI),e.stroke()),e.restore()}}var qe=i(717090);const Ge=u.t(null,void 0,i(520516)),$e=u.t(null,void 0,i(570323)),Ye=u.t(null,void 0,i(881240)),Qe=u.t(null,void 0,i(676912)),je={dark:{background:(0,d.getHexColorByName)("color-cold-gray-900"),foreground:(0,d.getHexColorByName)("color-deep-blue-a200"),linkColor:(0,d.getHexColorByName)("color-tv-blue-500")},light:{background:(0,d.getHexColorByName)("color-white"),foreground:(0,d.getHexColorByName)("color-deep-blue-a400"),linkColor:(0,d.getHexColorByName)("color-tv-blue-500")}},Ze={barLine:{lineStyle:w.LINESTYLE_DASHED,lineWidth:1,strokeStyle:""},lollipop:{width:21,height:21,bottom:2,lineWidth:1.5,strokeStyle:"",backgroundColor:"",fillCircle:!0,fillStyle:"",text:{label:"",strokeStyle:"",font:(0,v.makeFont)(12,g.CHART_FONT_FAMILY,"bold")}},iconColor:"",backgroundColor:"",outerBorderColor:""},Xe=["F","G","H","J","K","M","N","Q","U","V","X","Z"];function Je(e,t){const i=Math.floor(t/100),s=t-100*i-1;return{name:`${e}${Xe[s]}${i}`,expirationDate:`${We[s]} ${i}`}}class Ke extends O{extraData(e){const t=[];for(let i=0;i<4;++i){const s=3*i+1;if(!Boolean(e[s]))break;t.push({currentContractCode:e[s],nextContractCode:e[s+1],
switchDate:e[s+2]})}return{items:t}}_createRendererForLollipop(e,t){return new Ue(e,new S.HitTestResult(S.HitTestResult.CUSTOM,t),this._textWidthCache)}_createTooltipContent(e){return e.items.map((e=>{const t=[{name:Qe,value:(0,Oe.formatYYYYMMDD)(this._model.dateFormatter(),e.switchDate)}],i=this._model.isDark()?je.dark:je.light,s=this._model.mainSeries(),r=this._model.mainSeries().symbolInfo();if(null!==r&&void 0!==r.root){const o=r.exchange,n={color:i.linkColor,cursor:"pointer"},a=Je(r.root,e.currentContractCode);t.push({name:$e,value:a.name,valueStyle:n,onValueClick:()=>this._model.undoModel().setSymbol(s,`${o}:${a.name}`)}),t.push({name:" ",value:a.expirationDate});const l=Je(r.root,e.nextContractCode);t.push({name:Ye,value:l.name,valueStyle:n,onValueClick:()=>this._model.undoModel().setSymbol(s,`${o}:${l.name}`)}),t.push({name:" ",value:l.expirationDate})}return{type:"common",title:Ge,subTitle:t,tooltipIcon:qe,style:{color:i.foreground}}}))}_lollipopId(e){return e[3].toString()}_showBarLine(e){return super._showBarLine(e)||this._model.mainSeries().properties().childs().showContinuousContractSwitchesBreaks.value()}_recreateStyles(e){const t=this._model.isDark()?je.dark:je.light,i=t.foreground,s=t.background,r=(0,Fe.default)(Ze);r.iconColor=i,r.borderColor=i,r.backgroundColor=s,r.outerBorderColor=s,r.barLine.strokeStyle=i,this._defaultStyle=r;const o=(0,Fe.default)(r);o.backgroundColor=(0,He.blendColors)(s,(0,y.applyAlpha)(i,.15)),this._hoveredStyle=o;const n=(0,Fe.default)(r);n.backgroundColor=i,n.iconColor=s,n.borderColor=void 0,this._activeStyle=n,this._stylesCache=null}}class et extends Ve{zorder(){return Ie.sortSourcesPreOrdered.RollDates}isValid(e){const t=e[4];return(0,m.isNumber)(t)}_createViews(){this._paneView=new Ke(this._model,this,this._showTooltip.bind(this)),super._createViews()}_externalVisibilityProperty(){return this._model.mainSeries().properties().childs().showContinuousContractSwitches}}var tt=i(157260),it=i(720841),st=i(348406);class rt extends st.NonSeriesStudy{startIndex(){const e=this.customData();if(null==e||null==this._indexes)return null;const t=this._indexes[e.startIndex];return t!==Te.INVALID_TIME_POINT_INDEX?t:null}endIndex(){const e=this.customData();if(null==e||null==this._indexes)return null;const t=this._indexes[e.endIndex];return t!==Te.INVALID_TIME_POINT_INDEX?t:null}baseLine(){const e=this.customData();return null!=e?e.baseLine:null}downLine(){const e=this.customData();return null!=e?e.downLine:null}upLine(){const e=this.customData();return null!=e?e.upLine:null}pearsons(){const e=this.customData();return null!=e&&void 0!==e.pearsons?e.pearsons:null}isVisible(){if(!this.properties().childs().visible.value()||!this.isActualInterval())return!1;const e=(0,h.ensureDefined)(this.properties().childs().styles.childs());return 0!==e.upLine.childs().display.value()||0!==e.downLine.childs().display.value()||0!==e.baseLine.childs().display.value()}_createViews(){super._createViews(),Promise.all([i.e(81679),i.e(20507)]).then(i.bind(i,333933)).then((({LinearRegressionPaneView:e})=>{
this._setPaneViews([new e(this.model(),this)])}))}}var ot=i(827094),nt=i(988411),at=i.n(nt),lt=i(168210);var ht=i(841404);class dt extends ht.PriceAxisView{constructor(e,t){super(),this._source=e,this._styleId=t}_updateRendererData(e,t,i){var s;e.visible=!1;const r=this._source.priceScale(),o=this._source.properties().childs();if(!r||r.isEmpty()||!o.visible.value())return;const n=null===(s=this._source.properties().childs().graphics.childs().horizlines)||void 0===s?void 0:s.childs()[this._styleId].childs();if(!(n&&n.visible&&n.visible.value()&&this._isLabelVisibleAccordinglyToProperties()))return;const a=this._source.model().timeScale().logicalRange(),l=this._source.firstValue();if(null===l||null===a)return;const h={price:NaN,time:-1/0},d=this._source.graphics().horizlines().get(this._styleId);if(void 0===d)return;for(const e of d){if(void 0===e.level)continue;const t=a.contains(e.startIndex,!0);t===a.contains(e.endIndex,!0)&&0!==t||h.time<e.endIndex&&(h.time=e.endIndex,h.price=e.level)}if(isNaN(h.price))return;const u=(0,y.resetTransparency)(n.color.value());i.background=u,i.textColor=this.generateTextColor(u),i.coordinate=r.priceToCoordinate(h.price,l),e.text=r.formatPrice(h.price,l,!0),e.visible=!0}_isLabelVisibleAccordinglyToProperties(){const e=this._source.model().properties().childs().scalesProperties.childs();return(e.showStudyLastValue.value()||e.showFundamentalLastValue.value())&&this._source.properties().childs().showLabelsOnPriceScale.value()}}var ut=i(627425);class ct extends o.Study{async _createGraphicsPaneViews(){var e;const t=this.metaInfo().graphics,s=this.model(),r=[],o=this._needExtendToBarsEnding();if(t.hhists){const{HHistPaneView:t}=await Promise.all([i.e(81679),i.e(20507)]).then(i.bind(i,327514)),n=null===(e=this.properties().childs().graphics.childs().polygons)||void 0===e?void 0:e.childs();r.push(new t(this,s,void 0,null==n?void 0:n.histBoxBg,o))}if(t.horizlines){const{HorizLinePaneView:e}=await Promise.all([i.e(81679),i.e(20507)]).then(i.bind(i,491810));r.push(new e(this,s,void 0,o))}return r}_createGraphicsPriceAxisViews(){var e;return Object.keys(null!==(e=this.metaInfo().graphics.horizlines)&&void 0!==e?e:{}).map((e=>new dt(this,e)))}_createStudyPlotPaneView(e){return new ut.StudyPlotPaneView(this,this._series,this._model,e,this._needExtendToBarsEnding())}_apiInputs(){return{...super._apiInputs(),mapRightBoundaryToBarStartTime:!!this._needExtendToBarsEnding()||void 0}}_needExtendToBarsEnding(){var e;return void 0!==(null===(e=this.metaInfo().defaults.inputs)||void 0===e?void 0:e.mapRightBoundaryToBarStartTime)}}class _t extends ct{priceRange(e,t){let i=!1;this.graphics().hhists().forEach(((e,t)=>{var s;i=i||(0,h.ensureDefined)(null===(s=this.properties().childs().graphics.childs().hhists)||void 0===s?void 0:s.childs()[t]).value()}));const s=function(e,t,i,s){let r=null;return e.forEach(((e,s)=>{e.forEach((e=>{e.firstBarTime<=i&&e.lastBarTime>=t&&(null===r?r={low:{l:e.priceLow,h:e.priceHigh},high:{h:e.priceHigh}}:(e.priceLow<r.low.l&&(r.low.l=e.priceLow,r.low.h=e.priceHigh),
r.high.h=Math.max(r.high.h,e.priceHigh)))}))})),null===r?null:s?new lt.PriceRange(r.low.l-.8*(r.low.h-r.low.l),r.high.h):new lt.PriceRange(r.low.l,r.high.h)}(this.graphics().hhists(),e,t,i);if(null===s)return null;const r=(0,h.ensureNotNull)(this.priceScale());return r.isLog()?new lt.PriceRange(r.priceToLogical(s.minValue()),r.priceToLogical(s.maxValue())):s}}var pt=i(963894),mt=i(884566),yt=i(619276),vt=i(573774),ft=i(482358),bt=i(74266),gt=i(353469),St=i(915062);class wt{constructor(e,t){this._rough=e,this._detailed=t}forEach(e,t){this._mostDetailedHorizLines().forEach((i=>{e.call(t,i,i,this)}))}has(e){let t=!1;return this._mostDetailedHorizLines().forEach((i=>{t=t||i===e})),t}get size(){return this._rough.size}[Symbol.iterator](){const e=this._mostDetailedHorizLines().entries();return{[Symbol.iterator](){return this},next(){const t=e.next();return!0===t.done?t:{value:t.value[1]}}}}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}_mostDetailedHorizLines(){const e=new Map;this._rough.forEach((t=>e.set(t.startIndex,t)));for(let t=this._detailed.length-1;t>=0;t--){this._detailed[t].forEach((t=>{e.has(t.startIndex)&&e.set(t.startIndex,t)}))}return e}}class xt{constructor(e,t){this._mergedHorizLinesSet=e,this._roughIterator=t}[Symbol.iterator](){return this}next(){const e=this._roughIterator.next();if(!0===e.done)return e;const t=e.value[0];return{value:[t,(0,h.ensureDefined)(this._mergedHorizLinesSet.get(t))]}}}class Ct{constructor(e,t){this._roughHorizLineSets=e,this._detailedHorizLineSets=t}forEach(e,t){this._roughHorizLineSets.forEach(((i,s)=>{e.call(t,(0,h.ensureDefined)(this.get(s)),s,this)}))}get(e){const t=this._roughHorizLineSets.get(e);if(void 0!==t)return new wt(t,this._detailedHorizLineSets.map((t=>t.get(e))).filter((e=>void 0!==e)))}has(e){return this._roughHorizLineSets.has(e)}get size(){return this._roughHorizLineSets.size}[Symbol.iterator](){return new xt(this,this._roughHorizLineSets.entries())}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class Pt{constructor(e,t){this._rough=e,this._detailed=t}forEach(e,t){this._rough.forEach(((i,s)=>{for(const i of this._detailed){const r=i.get(s);if(void 0!==r)return void e.call(t,r,s,this)}e.call(t,i,s,this)}))}get(e){for(const t of this._detailed){const i=t.get(e);if(void 0!==i)return i}return this._rough.get(e)}has(e){for(const t of this._detailed){if(t.has(e))return!0}return this._rough.has(e)}get size(){return this._rough.size}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class It{constructor(e,t){this._graphics=e,this._styleId=t}forEach(e,t){this._graphics.hhistsByTimePointIndex().forEach((i=>{i.forEach((i=>{if(i.styleId===this._styleId){const s={firstBarTime:i.firstBarTime,lastBarTime:i.lastBarTime,rate:i.rate,priceHigh:i.priceHigh,priceLow:i.priceLow}
;e.call(t,s,s,this)}}))}))}has(e){let t=!1;return this._graphics.hhistsByTimePointIndex().forEach((i=>{i.forEach((i=>{i.styleId===this._styleId&&i===e&&(t=!0)}))})),t}get size(){let e=0;return this._graphics.hhistsByTimePointIndex().forEach((t=>{t.forEach((t=>{t.styleId===this._styleId&&e++}))})),e}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class Tt{constructor(e,t){this._graphicsInfo=e,this._graphics=t}forEach(e,t){if(void 0===this._graphicsInfo.hhists)return;const i=Object.keys(this._graphicsInfo.hhists);for(const s of i)e.call(t,(0,h.ensureDefined)(this.get(s)),s,this)}get(e){if(void 0!==this._graphicsInfo.hhists)return new It(this._graphics,e)}has(e){return void 0!==this._graphicsInfo.hhists&&e in this._graphicsInfo.hhists}get size(){return void 0===this._graphicsInfo.hhists?0:Object.keys(this._graphicsInfo.hhists).length}[Symbol.iterator](){throw new Error("Not implemented")}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){throw new Error("Not implemented")}}class Dt{constructor(e,t,i){this._graphicsInfo=e,this._roughStudyGraphics=t,this._detailedStudyGraphics=i}horizlines(){return new Ct(this._roughStudyGraphics.horizlines(),this._detailedStudyGraphics.map((e=>e.horizlines())))}vertlines(){return this._roughStudyGraphics.vertlines()}lines(){return this._roughStudyGraphics.lines()}hlines(){return this._roughStudyGraphics.hlines()}textmarks(){return this._roughStudyGraphics.textmarks()}shapemarks(){return this._roughStudyGraphics.shapemarks()}backgrounds(){return this._roughStudyGraphics.backgrounds()}polygons(){return this._roughStudyGraphics.polygons()}trendchannels(){return this._roughStudyGraphics.trendchannels()}hhists(){return new Tt(this._graphicsInfo,this)}hhistsByTimePointIndex(){return new Pt(this._roughStudyGraphics.hhistsByTimePointIndex(),this._detailedStudyGraphics.map((e=>e.hhistsByTimePointIndex())))}dwglabels(){return this._roughStudyGraphics.dwglabels()}dwglines(){return this._roughStudyGraphics.dwglines()}dwgboxes(){return this._roughStudyGraphics.dwgboxes()}dwgtables(){return this._roughStudyGraphics.dwgtables()}dwgtablecells(){return this._roughStudyGraphics.dwgtablecells()}dwglinefills(){return this._roughStudyGraphics.dwglinefills()}}var Rt=i(404822);const Lt="tv-volumebyprice",Vt=(0,yt.studyIdString)("VbPSessionsRough",Lt),kt=(0,yt.studyIdString)("VbPSessionsDetailed",Lt),At=(0,yt.studyIdString)("VbPSessionsDetailedAlerts",Lt),Et=Number.MAX_SAFE_INTEGER,Nt=u.t(null,void 0,i(421934));class Mt extends _t{constructor(e,t,i,s){super(e,t,i,s),this._isPackageAvailable=Bt(),this._alertsStudyMetaInfo=null,this._roughDataSource=null,this._detailedDataSource=null,this._detailedDataBuffer=new pt.CircularBuffer(7),this._loadedGraphics=null,this._loadedPlots=null,this._mergedGraphics=(0,St.emptyStudyGraphics)(),this._mergedPlots=this._emptyPlotList(),this._isPackageAvailable||this._setStatus({
type:ft.StudyStatusType.Error,errorDescription:{error:Nt}})}destroy(){null!==this._detailedDataSource&&(this._detailedDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._detailedDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._detailedDataSource.destroy(),this._detailedDataSource=null),null!==this._roughDataSource&&(this._roughDataSource.dataUpdated().unsubscribe(this,this._onRoughOrDetailedDataUpdated),this._roughDataSource.dataCleared().unsubscribe(this,this._onRoughOrDetailedDataCleared),this._roughDataSource.studyStatusChanged().unsubscribe(this,this._onStudyStatusChanged),this._roughDataSource.destroy(),this._roughDataSource=null)}data(){return this._loadedPlots||this._mergedPlots}graphics(){return this._loadedGraphics||this._mergedGraphics}clearData(){null!==this._roughDataSource&&this._roughDataSource.clearData(),null!==this._detailedDataSource&&this._detailedDataSource.clearData()}restoreData(e){this._invalidateLastNonEmptyPlotRowCache(),this._loadedPlots=this._emptyPlotList(),this._loadedPlots.restoreState(e),void 0!==e.graphics&&(this._loadedGraphics=(0,St.loadStudyGraphics)(e.graphics)),this._postProcessGraphics()}isFailed(){return!this._isPackageAvailable||null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===ft.StudyStatusType.Error||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===ft.StudyStatusType.Error}isLoading(){return null!==this._roughDataSource&&this._roughDataSource.studyStatus().type===ft.StudyStatusType.Loading||null!==this._detailedDataSource&&this._detailedDataSource.studyStatus().type===ft.StudyStatusType.Loading}isStarted(){return null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted()}sourceId(){throw new Error("Invalid operation")}idForAlert(){return super._collectDepsForAlert().idForAlert}hasStateForAlert(){return super.hasStateForAlert()&&null!==this._alertsStudyMetaInfo}canHaveChildren(){return!1}isChildStudy(){return!1}hasChildren(){return!1}getAllChildren(){return[]}processHibernate(){this.isVisible()?(null===this._roughDataSource||this._roughDataSource.isStarted()||(this._roughDataSource.start(),this._onHibernationStateChange.fire(!1)),null===this._detailedDataSource||this._detailedDataSource.isStarted()||this._detailedDataSource.start()):(null!==this._roughDataSource&&this._roughDataSource.isStarted()&&(this._roughDataSource.stop(),this._onHibernationStateChange.fire(!0)),null!==this._detailedDataSource&&this._detailedDataSource.isStarted()&&this._detailedDataSource.stop())}isHibernated(){return!(this.isVisible()||null!==this._roughDataSource&&this._roughDataSource.isStarted()||null!==this._detailedDataSource&&this._detailedDataSource.isStarted())}_stopStudyOnServer(){var e,t
;this._chartApi&&this._chartApi.isConnected().value()&&((null===(e=this._roughDataSource)||void 0===e?void 0:e.isStarted())&&this._roughDataSource.stop(),(null===(t=this._detailedDataSource)||void 0===t?void 0:t.isStarted())&&this._detailedDataSource.stop())}async _startAfterSymbolsResolved(e,t){if(this.isStarted()&&!this.isRestarting())return;if(this._restarting=!1,this._isPackageAvailable=Bt(),!this._isPackageAvailable)return void this._setStatus({type:ft.StudyStatusType.Error,errorDescription:{error:Nt}});if(!this._allInputsAreValid())return;this._inputs=this._apiInputs();const i=this.model().studyMetaInfoRepository();if(null===this._roughDataSource){const e=await i.findById({type:"java",studyId:Vt});this._roughDataSource=new bt.StudyDataSource(this.model().chartApi(),this.model().mainSeries().seriesSource(),"vbpsessionsrough_",e),this._roughDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._roughDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),this._roughDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated)}else this._roughDataSource.stop();if(this._roughDataSource.setInputs(Ft(this._roughDataSource.metaInfo().inputs,this._inputs)),this.processHibernate(),null===this._detailedDataSource){const e=await i.findById({type:"java",studyId:kt});this._detailedDataSource=new bt.StudyDataSource(this.model().chartApi(),this.model().mainSeries().seriesSource(),"vbpsessionsdetailed_",e),this._detailedDataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._detailedDataSource.dataCleared().subscribe(this,this._onRoughOrDetailedDataCleared),this._detailedDataSource.dataUpdated().subscribe(this,this._onRoughOrDetailedDataUpdated)}else this._detailedDataSource.stop();this._detailedDataSource.setInputs(Ot(this._inputs)),this.processHibernate(),this._createStudyGraphics(),this._subscribeToSessionId(),this._setStatus(this._statusValueFromDataSources()),this._onStart.fire(),null===this._alertsStudyMetaInfo&&(this._alertsStudyMetaInfo=await i.findById({type:"java",studyId:At}))}_changeInputsImpl(e,t){if(null!==this._roughDataSource){if((0,vt.areStudyInputsEqual)(this._roughDataSource.metaInfo().inputs,t,e)){if(null!==this._detailedDataSource){const t=Ot(e),i=(0,vt.rangeDependentStudyInputsToTimeRange)(t);if(this._moreDetailedDataRequiredForTimeRange(i)){if(this._detailedDataSource.isActive()){const e=this._detailedDataSource.stopAndStealData();if(e.plots.size()>0||!(0,St.isStudyGraphicsEmpty)(e.graphics)){const t=(0,h.ensureNotNull)(this._detailedDataSource.inputs());e.plots=this._extractEffectiveDetailedPlotValues(e.plots,t),this._detailedDataBuffer.enqueue({lod:Ht(t),value:e})}}this._detailedDataSource.setInputs(t),this._detailedDataSource.start()}}}else this._roughDataSource.setInputs(Ft(this._roughDataSource.metaInfo().inputs,e)),this._detailedDataBuffer.clear(),null!==this._detailedDataSource&&this._detailedDataSource.setInputs(Ot(e));null!==this._detailedDataSource&&this._createStudyGraphics()}}_collectDepsForAlert(){
const e=super._collectDepsForAlert();if(null===this._alertsStudyMetaInfo)throw new Error("Alerts study metainfo is not ready yet. Have you checked the alert availability using hasStateForAlert()?");return{...e,studyDependencies:e.studyDependencies.map((e=>{const t=e.study===Wt(this.metaInfo());return{id:e.id,inputs:t?(i=e.inputs,{...i,subscribeRealtime:!0}):e.inputs,study:t&&null!==this._alertsStudyMetaInfo?Wt(this._alertsStudyMetaInfo):e.study};var i}))}}_statusValueFromDataSources(){const e={type:ft.StudyStatusType.Undefined};if(null===this._roughDataSource||null===this._detailedDataSource)return e;const t=this._roughDataSource.studyStatus(),i=this._detailedDataSource.studyStatus();if(t.type===ft.StudyStatusType.Error)return t;if(i.type===ft.StudyStatusType.Error)return i;if(t.type===ft.StudyStatusType.Loading||i.type===ft.StudyStatusType.Loading){const e=t.type===ft.StudyStatusType.Loading?t.startTime:1/0,s=i.type===ft.StudyStatusType.Loading?i.startTime:1/0;return{type:ft.StudyStatusType.Loading,startTime:Math.min(e,s)}}return t.type===ft.StudyStatusType.Completed?{type:ft.StudyStatusType.Completed}:e}_emptyPlotList(){return new mt.PlotList((0,gt.studyPlotFunctionMap)(this.metaInfo()),gt.studyEmptyPlotValuePredicate)}_createStudyPlots(){const e=(0,h.ensureNotNull)(this._roughDataSource),t=(0,h.ensureNotNull)(this._detailedDataSource);this._mergedPlots.clear();const i=[];i.push({lod:Et,value:e.plots()}),this._detailedDataBuffer.forEach((e=>{i.push({lod:e.lod,value:e.value.plots})}));const s=(0,h.ensureNotNull)(t.inputs());i.push({lod:Ht(s),value:this._extractEffectiveDetailedPlotValues(t.plots(),s)}),i.sort(((e,t)=>t.lod-e.lod));for(const e of i)e.value.each(((e,t)=>{for(const e of t)if(void 0===e)return!1;return this._mergedPlots.add(e,t),!1}));this._invalidateLastNonEmptyPlotRowCache()}_createStudyGraphics(){const e=(0,h.ensureNotNull)(this._roughDataSource),t=(0,h.ensureNotNull)(this._detailedDataSource),i=[];this._detailedDataBuffer.forEach((e=>{i.push({lod:e.lod,value:e.value.graphics})})),void 0!==this._inputs&&i.push({lod:Ht(this._inputs),value:t.graphics()}),i.sort(((e,t)=>e.lod-t.lod));const s=i.map((e=>e.value));this._mergedGraphics=new Dt(this.metaInfo().graphics,e.graphics(),s),this._postProcessGraphics()}_extractEffectiveDetailedPlotValues(e,t){const i=(0,vt.rangeDependentStudyInputsToTimeRange)(t),s=this.model().timeScale().timePointToIndex(i.from),r=this.model().timeScale().timePointToIndex(i.to);return e.size()>0?e.range(s||(0,h.ensureNotNull)(e.firstIndex()),r||(0,h.ensureNotNull)(e.lastIndex())):this._emptyPlotList()}_moreDetailedDataRequiredForTimeRange(e){const{from:t,to:i}=e;let s=!1;return(0,h.ensureNotNull)(this._roughDataSource).graphics().hhistsByTimePointIndex().forEach(((e,r)=>{if(s)return;const o=this.model().timeScale().indexToTimePoint(r);if(null===o||o<t||i<o)return;const n=i-t;let a=!1;this._detailedDataBuffer.forEach((e=>{if(e.lod<=n){e.value.graphics.hhistsByTimePointIndex().has(r)&&(a=!0)}})),a||(s=!0)})),s}_onStudyStatusChanged(){
this._setStatus(this._statusValueFromDataSources()),(0,h.ensureDefined)(this._statusView).update()}_onRoughOrDetailedDataCleared(){null!==this._roughDataSource&&null!==this._detailedDataSource&&(this._invalidateLastNonEmptyPlotRowCache(),this._detailedDataBuffer.clear(),this._createStudyPlots(),this._createStudyGraphics(),this.updateAllViews((0,Rt.sourceChangeEvent)({sourceId:this.id(),clearData:!0})),this.model().updateSource(this))}_onRoughOrDetailedDataUpdated(e){null!==this._roughDataSource&&null!==this._detailedDataSource&&(e.length>0&&this._createStudyPlots(),this.updateAllViews((0,Rt.sourceChangeEvent)(this.id())),this.model().updateSource(this))}}function Bt(){return void 0!==window.pro&&window.pro.hasPackage(Lt)}function Ft(e,t){const i={};for(const s of e)i[s.id]=t[s.id];return i}function Ot(e){const t=e.last_visible_bar_time-e.first_visible_bar_time;return{...e,first_visible_bar_time:e.first_visible_bar_time-t,last_visible_bar_time:e.last_visible_bar_time+t}}function Ht(e){const{from:t,to:i}=(0,vt.rangeDependentStudyInputsToTimeRange)(e);return i-t}function Wt(e){return`${e.id}-${e.version}`}var zt=i(852469),Ut=i(470720),qt=i(921341),Gt=i(501817),$t=i(486702),Yt=i(208665);const Qt=s.enabled("hide_main_series_symbol_from_indicator_legend");class jt extends o.Study{constructor(e,t,i,s){super(e,t,i,s),(0,h.ensureDefined)(this.properties().childs().styles.childs().vol_ma).childs().display.subscribe(this,(()=>this.invalidateTitleCache()))}base(){return 1}destroy(){(0,h.ensureDefined)(this.properties().childs().styles.childs().vol_ma).childs().display.listeners().unsubscribeAll(this),super.destroy()}showOnTopOnHovering(){return!1}_titleInputs(){const e={symbolsForDisplay:!0,skipHiddenInputs:!0,fakeInputsForDisplay:!0,asObject:!1,skipOptionalEmptySymbolInputs:Qt};return 0!==(0,h.ensureDefined)(this.properties().childs().styles.childs().vol_ma).childs().display.value()?this.inputs(e):this.inputs({...e,skippedInputs:["length"]})}_titleInParts(e,t,i,s){const r=super._titleInParts(e,t,i,s),o=this._getVolumeUnit();return o&&(r[0]+=` Â· ${o}`),r}_getVolumeUnit(){const e=this.symbolSource().symbolInfo();if(e){switch(e.volume_type){case"base":return e.base_currency;case"quote":return e.original_currency_code||e.currency_code;case"tick":return u.t(null,void 0,i(130973))}}}}var Zt=i(386482);function Xt(e,t="shift",i){return{studyConstructor:e,colorRotationMode:t,colorRotationComparator:i}}const Jt={study_PivotPointsStandard:Xt(Ut.study_PivotPointsStandard),study_Overlay:Xt(qt.study_Overlay,"loop"),study_Compare:Xt(Gt.StudyCompare,"loop"),study_Volume:Xt(jt),study_VbPVisible:Xt(class extends _t{alertCreationAvailable(){return new(at())(!1).readonly()}_needExtendToBarsEnding(){return!1}}),study_ScriptWithDataOffset:Xt($t.study_ScriptWithDataOffset)};{Jt.study_Earnings=Xt(Be),Jt.study_Splits=Xt(Me),Jt.study_Dividends=Xt(Ne),Jt.study_BarSetContinuousRollDates=Xt(et);const e=(e,t)=>(0,Zt.isFundamentalStudyMetaInfo)(t);Jt[Zt.fundamentalsPrefix]=Xt(tt.Fundamental,"loop",e),Jt.study_ElliottWave=Xt(it.study_ElliottWave),
Jt.study_LinearRegression=Xt(rt),Jt.study_PivotPointsHighLow=Xt(ot.study_PivotPointsHighLow),Jt.study_VbPSessions=Xt(_t),Jt.study_VbPPeriodic=Xt(ct),Jt.study_VbPSessionsRoughDetailed=Xt(Mt),Jt.study_ZigZag=Xt(zt.study_ZigZag),Jt.study_VbPAutoAnchored=Xt(ct),TradingView.StudyStrategy=Xt(n.StudyStrategy).studyConstructor}for(const e in Jt)Jt.hasOwnProperty(e)&&(TradingView[e]=Jt[e].studyConstructor);function Kt(e){return e instanceof o.Study}function ei(e){return e instanceof n.StudyStrategy}function ti(e){return e instanceof Yt.StudyStub}function ii(e){return e instanceof tt.Fundamental}function si(e){return e instanceof Be||e instanceof Me||e instanceof Ne}function ri(e){return e instanceof et}function oi(e,t,i,s,a){if(r.StudyMetaInfo.isScriptStrategy(s))return new n.StudyStrategy(e,t,i,s);const l=(0,Zt.studyNameByMetaInfo)(s),h=new(l in Jt?Jt[l].studyConstructor:o.Study)(e,t,i,s);return void 0!==a&&h.setId(a),h}function ni(e){const t=(0,Zt.studyNameByMetaInfo)(e);return t in Jt?Jt[t].colorRotationMode:void 0===e.pine||r.StudyMetaInfo.isStandardPine(e.id)?1!==e.plots.length?"shift":"loop":null}function ai(e,t){return e.id===t.id&&(s=t,((i=e).pine?i.pine.version:void 0)===(s.pine?s.pine.version:void 0));var i,s}function li(e){const t=(0,Zt.studyNameByMetaInfo)(e);if(t in Jt){const e=Jt[t].colorRotationComparator;if(void 0!==e)return e}return ai}},208665:(e,t,i)=>{"use strict";i.d(t,{StudyStub:()=>p});var s=i(397581),r=i(730293),o=i(831471),n=i(869403),a=i.n(n),l=i(40210),h=i.n(l),d=i(306963),u=i(482358);class c{getItems(){return[]}getValues(e){return[]}}const _=new(a());class p extends r.PriceDataSource{constructor(e,t,i){super(e),this._priceStep=.01,this._status={type:u.StudyStatusType.Undefined},this._statusChanged=new(a()),this._formatter=new o.PriceFormatter(100),this._origState=t,this._title=i;this._properties=new(h())({visible:!0}),this._statusView=new s.StudyStatusView(this)}barColorer(){return null}properties(){return this._properties}statusView(){return this._statusView}legendView(){return null}state(e){return this._origState}setStatus(e){this._status=e,this._statusChanged.fire()}formatter(){return this._formatter}name(){return this._title}title(){return this._title}titleInParts(){return[this._title]}isFailed(){return this._status.type===u.StudyStatusType.Error}isLoading(){return this._status.type===u.StudyStatusType.Loading}setFailed(e){this.setStatus({type:u.StudyStatusType.Error,errorDescription:{error:e}}),this._model.updateSource(this)}isSymbolInvalid(){return!1}isActualInterval(){return!0}onIsActualIntervalChange(){return _}start(){}status(){return this._status}onStatusChanged(){return this._statusChanged}firstValue(){return null}currency(){return null}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}unit(){return null}symbolSource(){return this._model.mainSeries()}barsProvider(){return this._model.mainSeries()}valuesProvider(){return new c}statusProvider(e){
return new d.StudyStubStatusProvider(this,this._model.properties().childs().scalesProperties.childs().textColor)}}},501817:(e,t,i)=>{"use strict";i.d(t,{StudyCompare:()=>W});var s=i(650151),r=i(274440),o=i(736887),n=i(373123),a=i(720444),l=i(40210),h=i.n(l),d=i(87476),u=i(530664),c=i(841404),_=i(441970),p=i(114123);const m=d.enabled("force_exchange_as_title");class y extends c.PriceAxisView{constructor(e,t){super(),this._studyCompare=e,this._data=t}_updateRendererData(e,t,i){e.visible=!1,t.visible=!1;const r=this._studyCompare.priceScale(),o=this._studyCompare.lastValueData(this._data.plotIndex,!1);if(o.noData||null===r||r.isEmpty())return;const n=this._studyCompare.model(),a=n.timeScale().visibleBarsStrictRange(),l=n.mainSeries().bars().lastIndex();if(null===a||null===l)return;if(l<=a.lastBar())i.background=(0,p.resetTransparency)(o.color),i.textColor=this.generateTextColor(i.background),i.borderColor=void 0,e.borderVisible=!1,t.borderVisible=!1;else{const r=n.backgroundColorAtYPercentFromTop(o.coordinate/(0,s.ensureNotNull)(n.paneForSource(this._studyCompare)).height());i.background=r,i.textColor=(0,p.resetTransparency)(o.color),i.borderColor=i.textColor,e.borderVisible=!0,t.borderVisible=!0}i.coordinate=o.coordinate,i.floatCoordinate=o.floatCoordinate;const h=n.properties().childs().scalesProperties.childs();h.showSeriesLastValue.value()&&(e.text=(0,_.getCurrentModePriceText)(r,o),h.seriesLastValueMode.value()!==u.PriceAxisLastValueMode.LastPriceAndPercentageValue?e.secondLine="":e.secondLine=(0,_.getOppositeModePriceText)(r,o),e.visible=!0),t.text="",h.showSymbolLabels.value()&&(t.text=this._paneText(),t.visible=t.text.length>0)}_paneText(){let e="";const t=this._studyCompare.symbolInfo();return m?e=(0,a.displayedSymbolExchange)(t):this._studyCompare.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(e=(0,a.displayedSymbolName)(t)),e}}var v=i(777754),f=i(4836),b=i(414805),g=i(480071),S=i(638456),w=i(758337),x=i(216392);class C extends x.StudyValuesProvider{constructor(e,t){super(e,t),this._emptyValues[0].title=e.guiPlotName("")}_hideValues(){return!1}}const P=S.CheckMobile.any();class I extends f.StudyDataWindowView{constructor(e,t){super(e,t),this._studyCompare=e}_hideValues(){return!1}_createValuesProvider(e,t){return new C(e,t)}_currentIndex(){const e=this._model.crossHairSource().lockedIndex;let t;return P&&(null===this._model.crossHairSource().pane&&void 0===e||(0,b.isLineToolName)(g.tool.value())||null!==this._model.lineBeingEdited())?t=this._study.data().lastIndex():(t=this._model.crossHairSource().appliedIndex(),(0,w.isNumber)(t)||(t=this._study.data().lastIndex())),t}}var T=i(232371);class D extends I{constructor(e,t){super(e,t),this._additional=null,this._showSeriesOHLC=t.properties().childs().paneProperties.childs().legendProperties.childs().showSeriesOHLC,this._showSeriesOHLC.subscribe(this,this.update)}areValuesVisible(){return this._showSeriesOHLC.value()}destroy(){this._showSeriesOHLC.unsubscribeAll(this)}additional(){return this._invalidated&&(this._updateImpl(),
this._invalidated=!1),this._additional}_updateImpl(){{const e=(0,T.getDataVendorString)(this._studyCompare.symbolInfo());this._additional=e?v.t(null,void 0,i(493345))+" "+e:null}super._updateImpl()}}var R=i(397581),L=i(927508),V=i(431235);class k extends V.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(!0,void 0,!1,!1)}text(){return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(!0,void 0,!1,!1)}}var A=i(992001),E=i(988411),N=i.n(E);const M=d.enabled("study_overlay_compare_legend_option"),B=d.enabled("force_exchange_as_title"),F=d.enabled("uppercase_instrument_names"),O=!d.enabled("hide_study_compare_legend_item"),H=d.enabled("hide_unresolved_symbols_in_legend");class W extends n.Study{constructor(e,t,i,s){super(e,function(e){return e.hasChild("currencyId")||e.addChild("currencyId",new(h())(null)),e.hasChild("unitId")||e.addChild("unitId",new(h())(null)),e.addExclusion("currencyId"),e.addExclusion("unitId"),e}(t),i,s),this._isActingAsSymbolSource=new(N())(!0),this._realignToolsLastParams=null,this.properties().childs().minTick.subscribe(null,(()=>this._recreatePriceFormattingDependencies())),this.properties().childs().minTick.subscribe(null,(()=>this._model.fullUpdate())),this.properties().childs().currencyId.subscribe(this,this._onCurrencyChanged),this.properties().childs().unitId.subscribe(this,this._onUnitChanged),this._symbolResolvingActive=new(N())(!1),this._symbolHibernated=new(N())(!1),e.mainSeries().onIntervalChanged().subscribe(this,(()=>e.realignLineTools(this)))}destroy(){this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}properties(){return this._properties}isActingAsSymbolSource(){return this._isActingAsSymbolSource.readonly()}createPriceAxisView(e){return new y(this,{plotIndex:"compare"})}setSymbolParams(e){this._setSymbolCurrencyUnitInternal(e)}symbol(){return this.properties().childs().inputs.childs().symbol.value()}setSymbol(e){this.setSymbolParams({symbol:e})}symbolInfo(){if(!this._resolvedSymbols)return null;const e=this.properties().childs().inputs.childs().symbol.value();if(!e)return null;let t;return t=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(e)]||null,this._model.isSnapshot()&&null===t&&(t=(0,r.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,e,this.currency()),null!==t&&(this._resolvedSymbols.___snapshot=t)),t}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const e=super.isVisible();return this._symbolHibernated.setValue(!e),e}symbolSameAsCurrent(e){return(0,A.symbolSameAsCurrent)(e,this.symbolInfo())}currency(){return this.properties().childs().currencyId.value()||null}setCurrency(e){this.setSymbolParams({currency:e})}isConvertedToOtherCurrency(){return(0,
a.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this.properties().childs().unitId.value()||null}setUnit(e){this.setSymbolParams({unit:e})}isConvertedToOtherUnit(){return(0,a.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return 2}setStyle(e){}interval(){return this._model.mainSeries().interval()}setInterval(e){}symbolSource(){return this}state(e,t){const i=super.state(e,t);return this._model.unitConversionEnabled()||delete i.state.unitId,e&&((0,s.ensureDefined)(i.data).symbols={___snapshot:this.symbolInfo()||void 0}),i}symbolTitle(e,t){return this.title(!0,{},!1,e)}titleInParts(e,t,i,s){const r=this._titleInParts(e,t,i,s).join(", ");return[F?r.toUpperCase():r]}tags(){const e=this.symbol();return e?[e]:[]}statusView(){return O?super.statusView():null}guiPlotName(e){return this.properties().childs().inputs.childs().symbol.value()}canOverrideMinTick(){return!0}canBeHiddenByGlobalFlag(){return!1}valuesProvider(){return new C(this,this.model())}statusProvider(e){return new k(this,this._model.properties().childs().scalesProperties.childs().textColor)}measureUnitId(){return(0,a.measureUnitId)(this.symbolInfo())}_createViews(){this._legendView||(this._legendView=new D(this,this._model)),this._dataWindowView||(this._dataWindowView=new I(this,this._model)),this._statusView||(this._statusView=new R.StudyStatusView(this)),super._createViews()}_showLastValueOnPriceScale(){return this._model.properties().childs().scalesProperties.childs().showSeriesLastValue.value()}_onUnitChanged(){"alwaysOff"!==(0,o.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(e){const t=super._getSymbolObject(e),i=this.currency();null!==i&&(t["currency-id"]=i);const s=this.unit();return this._model.unitConversionEnabled()&&null!==s&&(t["unit-id"]=s),t}_getSymbolForApi(e){return(0,a.symbolForApi)(this._resolvedSymbolsByInput[e]||null,e)}_onSymbolResolvingStart(){super._onSymbolResolvingStart(),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(e,t,i){super._onSymbolResolved(e,t,i),this._recreatePriceFormattingDependencies();const s=t===this.symbol()?(0,a.extractSymbolNameFromSymbolInfo)(i,this.symbol()):null,r=(0,a.symbolCurrency)(i),o=(0,a.symbolUnit)(i,this._model.unitConversionEnabled());this._setSymbolCurrencyUnitInternal({symbol:null!=s?s:void 0,currency:r,unit:o},i),this._symbolResolvingActive.setValue(!1)}_changeInputsImpl(e,t){super._changeInputsImpl(e,t),this._realignLineToolsIfParamsChanged()}_createStudyOnServer(){super._createStudyOnServer(),this._realignLineToolsIfParamsChanged()}_tryCreateFormatter(){var e,t;t=null===(e=null===L.customFormatters||void 0===L.customFormatters?void 0:L.customFormatters.priceFormatterFactory)||void 0===e?void 0:e.call(L.customFormatters,this.symbolInfo(),this.properties().childs().minTick.value());return(0,
a.createSeriesFormatter)(this.symbolInfo(),this.properties().childs().minTick.value())}_titleInParts(e,t,i,s){const r=this.symbolInfo();let o;if(r){const e=(0,a.getStudySymbolExchange)(r);if(B&&e)o=e;else if(o=r.name,M)switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":o=r.description;break;case"ticker-and-description":o=`${r.name}, ${r.description}`}else if(e&&!s)return[o,[e]]}else o=H?"":this.properties().childs().inputs.childs().symbol.value();return[o]}_skipHistogramBaseOnAutoScale(){return!0}_setSymbolCurrencyUnitInternal(e,t){const{symbol:i,currency:s,unit:r}=e,o=this.properties().childs(),n=o.inputs.childs().symbol.value(),l=o.currencyId.value(),h=o.unitId.value();if(void 0!==i&&i!==n&&o.inputs.childs().symbol.setValueSilently(i),void 0!==s&&s!==l&&o.currencyId.setValueSilently(s),void 0!==r&&r!==h&&o.unitId.setValueSilently(r),t)this._resolvedSymbolsByInput[this.symbol()]=t,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=t,this._realignToolsLastParams=null;else{const e=this.symbolInfo();null!==e&&(o.currencyId.setValueSilently((0,a.symbolCurrency)(e)),o.unitId.setValueSilently((0,a.symbolUnit)(e,this._model.unitConversionEnabled())))}o.inputs.childs().symbol.value()!==n&&o.inputs.childs().symbol.listeners().fire(o.inputs.childs().symbol),o.currencyId.value()!==l&&o.currencyId.listeners().fire(o.currencyId),o.unitId.value()!==h&&o.unitId.listeners().fire(o.unitId),this._realignLineToolsIfParamsChanged()}_realignLineToolsIfParamsChanged(){const e=this.symbol(),t=this.interval(),i=this.currency(),s=this.unit();null!==this._realignToolsLastParams&&this._realignToolsLastParams.symbol===e&&this._realignToolsLastParams.interval===t&&this._realignToolsLastParams.currency===i&&this._realignToolsLastParams.unit===s||(this._model.realignLineTools(this),this._realignToolsLastParams={symbol:e,interval:t,currency:i,unit:s})}}},458607:(e,t,i)=>{"use strict";i.d(t,{StudyOverlayBase:()=>pe});var s=i(650151),r=i(274440),o=i(638456),n=i(272001),a=i(373123),l=i(20651),h=i(736887),d=i(311854),u=i(720444),c=i(40210),_=i.n(c),p=i(7628),m=i(87476),y=i(341342),v=i(992001),f=(i(744315),i(991826)),b=i(884566),g=i(812363),S=i(758337),w=i(168210),x=i(988411),C=i.n(x),P=i(927508),I=(i(404822),i(397581)),T=i(130737),D=i(841404),R=i(530664),L=i(441970),V=i(114123);const k=m.enabled("force_exchange_as_title");class A extends D.PriceAxisView{constructor(e){super(),this._source=e}_updateRendererData(e,t,i){e.visible=!1,t.visible=!1;const r=this._source.lastValueData("close",!1);if(r.noData)return;const o=this._source.model(),n=this._source.priceScale();if(null===n)return;if(!o.isPriceScaleVisible(n))return;const a=o.timeScale().visibleBarsStrictRange(),l=o.mainSeries().bars().lastIndex();if(null===a||null===l)return;if(l<=a.lastBar())i.background=(0,V.resetTransparency)(r.color),i.textColor=this.generateTextColor(r.color),e.borderVisible=!1,t.borderVisible=!1;else{const n=o.backgroundColorAtYPercentFromTop(r.coordinate/(0,s.ensureNotNull)(o.paneForSource(this._source)).height())
;i.background=n,i.textColor=(0,V.resetTransparency)(r.color),i.borderColor=i.textColor,e.borderVisible=!0,t.borderVisible=!0}i.coordinate=r.coordinate,i.floatCoordinate=r.floatCoordinate;const h=this._source.model().properties().childs().scalesProperties.childs();h.showSeriesLastValue.value()&&(e.text=(0,L.getCurrentModePriceText)(n,r),h.seriesLastValueMode.value()!==R.PriceAxisLastValueMode.LastPriceAndPercentageValue?e.secondLine="":e.secondLine=(0,L.getOppositeModePriceText)(n,r),e.visible=!0),t.text="",h.showSymbolLabels.value()&&(t.text=this._paneText(),t.visible=t.text.length>0)}_paneText(){let e="";const t=this._source.symbolInfo();return k?e=(0,u.displayedSymbolExchange)(t):this._source.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(e=(0,u.displayedSymbolName)(t)),e}}var E=i(471502);class N extends E.PriceLineAxisView{constructor(e){super(),this._study=e}_value(){return this._study.lastValueData("",!0)}_priceLineColor(e){return e}_lineWidth(){return 1}_isVisible(){const e=this._study.model().properties().childs().scalesProperties.childs().showSeriesLastValue.value();return this._study.properties().childs().showPriceLine.value()&&e}}var M=i(631586),B=i(803936);class F{constructor(e){this._lineRenderer=new B.HorizontalLineRenderer,this._visible=!1,this._source=e}update(){if(this._visible=!1,!this._source.properties().childs().showPriceLine.value())return;const e=this._source.lastValueData("",!0);e.noData||(this._visible=!0,this._lineRenderer.setData({y:e.coordinate,color:e.color,linewidth:1,linestyle:M.LINESTYLE_DOTTED,visible:this._visible}))}renderer(){return this._visible?this._lineRenderer:null}}var O=i(150335),H=i(194405),W=i(414805),z=i(480071),U=i(155268);const q=o.CheckMobile.any();class G extends H.DataWindowView{constructor(e,t){super(),this._invalidated=!0,this._study=e,this._model=t,this._valueProvider=this._createValuesProvider(e,t),this._items=this._valueProvider.getItems().map((e=>new H.DataWindowItem(e.id,e.title,""))),this.update()}items(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items}update(){this._invalidated=!0}study(){return this._study}_updateImpl(){this._header=this._study.title();let e;this._showLastPriceAndChangeOnly()?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),(0,O.isNumber)(e)||(e=this._study.data().lastIndex()));const t=this._valueProvider.getValues(e);for(let e=0;e<t.length;++e){const i=t[e],s=this._items[e];s.setValue(i.value),s.setVisible(i.visible),s.setColor(i.color)}}_showLastPriceAndChangeOnly(){return q&&(null===this._model.crossHairSource().pane||(0,W.isLineToolName)(z.tool.value())||null!==this._model.lineBeingEdited())}_createValuesProvider(e,t){return new U.StudyLegendValuesProvider(e,t)}}var $=i(777754),Y=i(814606),Q=i(319981),j=i(232371);class Z extends G{constructor(e,t){super(e,t),this._additional=null,this._studyOverlay=e,this._backgroundColorSpawn=t.backgroundTopColor().spawn(),this._backgroundColorSpawn.subscribe(this.update.bind(this))
;const i=t.properties().childs().paneProperties.childs().legendProperties.childs();this._visibilityProperty=(0,Q.combineProperty)(((e,t)=>e||t),i.showBarChange,i.showSeriesOHLC),this._visibilityProperty.subscribe(this,this.update)}areValuesVisible(){return this._visibilityProperty.value()}additional(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional}destroy(){this._backgroundColorSpawn.destroy(),this._visibilityProperty.destroy()}_updateImpl(){super._updateImpl();{const e=(0,j.getDataVendorString)(this._studyOverlay.symbolInfo());this._additional=e?$.t(null,void 0,i(493345))+" "+e:null}}_createValuesProvider(e,t){return new Y.OverlayLegendValuesProvider(e,t)}}var X=i(733352),J=i(236368),K=i(963121),ee=i(29911),te=i(98253),ie=i(234052),se=i(568631),re=i(914431),oe=i(978444),ne=i(424061);const ae=o.CheckMobile.any()&&!0,le=m.enabled("uppercase_instrument_names"),he=m.enabled("study_overlay_compare_legend_option"),de=(m.enabled("secondary_series_extend_time_scale"),m.enabled("hide_unresolved_symbols_in_legend")),ue=!m.enabled("hide_study_overlay_legend_item"),ce=(0,n.getLogger)("Chart.StudyOverlay");function _e(e,t){return null==e[t]}class pe extends a.Study{constructor(e,t,i,s){super(e,function(e){return e.hasChild("currencyId")||e.addChild("currencyId",new(_())(null)),e.hasChild("unitId")||e.addChild("unitId",new(_())(null)),e.addExclusion("currencyId"),e.addExclusion("unitId"),e}(t),i,s),this._quotesProvider=new y.QuotesProvider,this._seriesSource=null,this._symbolResolvingActive=new(C())(!1),this._symbolHibernated=new(C())(!1),this._styleToRecover=null,this._isActingAsSymbolSource=new(C())(!0),this._realignToolsLastParams=null,this._precomputedBarStyles=new WeakMap,this.m_data=new b.PlotList((0,d.seriesPlotFunctionMap)(),_e),ae&&this._quotesProvider.quotesUpdate().subscribe(this,this._onQuotesUpdate);const r=this.properties().childs();r.currencyId.subscribe(this,this._onCurrencyChanged),r.unitId.subscribe(this,this._onUnitChanged),r.allowExtendTimeScale.subscribe(this,this._onAllowExtendTimeScaleChanged),this._onAllowExtendTimeScaleChanged(),this._model.mainSeries().properties().childs().dividendsAdjustment.subscribe(this,(()=>{this._tryChangeInputs()})),r.style.subscribe(this,this._onChartStyleChanged),r.lineStyle.childs().priceSource.subscribe(this,this._updateBarFunction),r.areaStyle.childs().priceSource.subscribe(this,this._updateBarFunction),r.baselineStyle.childs().priceSource.subscribe(this,this._updateBarFunction),r.columnStyle.childs().priceSource.subscribe(this,this._updateBarFunction),this._updateBarFunction(),this._formatter=null,e.mainSeries().onIntervalChanged().subscribe(this,(()=>e.realignLineTools(this)))}destroy(){this._model.mainSeries().properties().childs().dividendsAdjustment.unsubscribeAll(this),this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}isActingAsSymbolSource(){return this._isActingAsSymbolSource.readonly()}precomputedBarStyle(e){return this._precomputedBarStyles.get(e)}setPrecomputedBarStyle(e,t){
this._precomputedBarStyles.set(e,t)}properties(){return this._properties}barColorer(){return new ne.SeriesBarColorer(this)}setSymbolParams(e){this._setSymbolParamsInternal(e)}symbol(){return this.properties().childs().inputs.childs().symbol.value()}setSymbol(e){this.setSymbolParams({symbol:e})}symbolInfo(){if(!this._resolvedSymbols)return null;const e=this._properties.childs().inputs.childs().symbol.value();if(!e)return null;let t;return t=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(e)]||null,this._model.isSnapshot()&&null===t&&(t=(0,r.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,e,this.currency()),null!==t&&(this._resolvedSymbols.___snapshot=t)),t}supportsPressedChunks(){return!1}pressedChunks(e,t){throw new Error("Pressed chunks are not supported")}data(){return null===this._seriesSource?super.data():this._seriesSource.data().bars()}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const e=super.isVisible();return this._symbolHibernated.setValue(!e),e}symbolSameAsCurrent(e){return(0,v.symbolSameAsCurrent)(e,this.symbolInfo())}priceSource(){const e=this.properties().childs();switch(e.style.value()){case 2:return e.lineStyle.childs().priceSource.value();case 3:return e.areaStyle.childs().priceSource.value();case 10:return e.baselineStyle.childs().priceSource.value();case 13:return e.columnStyle.childs().priceSource.value()}return null}barFunction(){return this._barFunction}quotes(){return this._quotesProvider.quotes()}currency(){return this.properties().childs().currencyId.value()||null}setCurrency(e){this.setSymbolParams({currency:e})}isConvertedToOtherCurrency(){return(0,u.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this.properties().childs().unitId.value()||null}setUnit(e){this.setSymbolParams({unit:e})}isConvertedToOtherUnit(){return(0,u.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return this.properties().childs().style.value()}setStyle(e){this.setSymbolParams({style:e})}interval(){return this._model.mainSeries().interval()}setInterval(e){}symbolSource(){return this}barsProvider(){return this}state(e,t){const i=super.state(e,t);return this._model.unitConversionEnabled()||delete i.state.unitId,e&&((0,s.ensureDefined)(i.data).symbols={___snapshot:this.symbolInfo()||void 0}),i}symbolTitle(e,t){return this.title(!0,{},!1,e)}title(e,t,i,s){const r=this._titleInParts(e,t,i,s).join(", ");return le?r.toUpperCase():r}titleInParts(e,t,i,s){const r=this._titleInParts(e,t,i,s).join(", ");return[le?r.toUpperCase():r]}isStarted(){return null===this._seriesSource?super.isStarted():this._seriesSource.isStarted()}sourceId(){return null===this._seriesSource?super.sourceId():(0,s.ensureNotNull)(this._seriesSource.instanceId())}moveData(e){null===this._seriesSource?super.moveData(e):this._seriesSource.moveData(e)}firstValue(){const e=this._model.timeScale().visibleBarsStrictRange()
;if(null===e)return null;const t=e.firstBar();if(0===this.data().size())return this._ownFirstValue;const i=this.data().search(t,g.PlotRowSearchMode.NearestRight,1);return this._ownFirstValue=null!==i?this._barFunction(i.value,0):null,this._ownFirstValue}lastValueData(e,t,i){const s={noData:!0},r=this.priceScale();if(this._model.timeScale().isEmpty()||null===r||r.isEmpty()||this.data().isEmpty())return s;const o=this._model.timeScale().visibleBarsStrictRange();if(null===o)return s;const n=this.properties().childs();if(!n.visible.value())return s;const a=this.nearestIndex(o.lastBar(),g.PlotRowSearchMode.NearestLeft,1);if(void 0===a)return s;const l=this.firstValue();if(null===l)return s;const h=this._lastNonEmptyPlotRow(4),d=null!==h&&o.contains(h.index),u=null!==h?h.value:null,c=t||d?u:this.data().valueAt(a);if(null===c)return s;const _=this._barFunction(c,2);if(!(0,S.isNumber)(_))return s;const p=r.priceToCoordinate(_,l);let m;switch(n.style.value()){case 0:m=c[1]<=c[4]?n.barStyle.childs().upColor.value():n.barStyle.childs().downColor.value();break;case 1:case 9:m=c[1]<=c[4]?n.candleStyle.childs().upColor.value():n.candleStyle.childs().downColor.value();break;case 13:m=c[1]<=c[4]?n.columnStyle.childs().upColor.value():n.columnStyle.childs().downColor.value();break;case 2:m=n.lineStyle.childs().color.value();break;case 3:m=n.areaStyle.childs().color1.value();break;case 10:{const e=n.baselineStyle.childs();m=p<Math.round(r.height()*(Math.abs(100-e.baseLevelPercentage.value())/100))?e.topLineColor.value():e.bottomLineColor.value();break}case 12:m=n.hiloStyle.childs().color.value();break;default:throw new Error("Not supported overlay style")}const y={...r.getFormattedValues(_,l,!0),noData:!1,floatCoordinate:p,coordinate:p,color:m};return i&&(y.price=_),y}priceRange(e,t){if(!(0,S.isInteger)(e))return ce.logDebug("priceRange: incorrect startBar"),null;if(!(0,S.isInteger)(t))return ce.logDebug("priceRange: incorrect endBar"),null;if(0===this.data().size())return null;const i=this.priceSource();let s;s=null!==i?this.data().minMaxOnRangeCached(e,t,[{name:i,offset:0}]):this.data().minMaxOnRangeCached(e,t,[{name:"low",offset:0},{name:"high",offset:0}]);const r=null!==s?new w.PriceRange(s.min,s.max):null;return this._postProcessPriceRange(r)}bars(){return this.data()}open(e){return(0,s.ensureNotNull)(this.bars().valueAt(e))[1]}high(e){return(0,s.ensureNotNull)(this.bars().valueAt(e))[2]}low(e){return(0,s.ensureNotNull)(this.bars().valueAt(e))[3]}close(e){return(0,s.ensureNotNull)(this.bars().valueAt(e))[4]}hl2(e){return(this.high(e)+this.low(e))/2}hlc3(e){return(this.high(e)+this.low(e)+this.close(e))/3}ohlc4(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4}canBeHiddenByGlobalFlag(){return!1}start(e,t){var i;this._formatter=null,super.start(e,t),null===(i=this.priceScale())||void 0===i||i.updateFormatter(),ae&&this._setQuotesSymbol(this.symbol())}stop(e){super.stop(e),this._quotesProvider.setQuotesSessionSymbol(null)}formatter(){return this._formatter||this._recreateFormatter(),(0,
s.ensureNotNull)(this._formatter)}statusView(){return ue?super.statusView():null}moveItem(e,t,i){if(10===this.style()&&0===t){const t=(0,s.ensureNotNull)(this.priceScale()),i=this.properties().childs().baselineStyle,r=t.height(),o=100-e.y/r*100,n=o<0?0:Math.round(10*o)/10;i.childs().baseLevelPercentage.setValue(Math.max(Math.min(n,100),0))}}measureUnitId(){return(0,u.measureUnitId)(this.symbolInfo())}dataUpdated(){return this._dataUpdated}alertCreationAvailable(){var e;return new(C())(!(null===(e=this.priceScale())||void 0===e?void 0:e.isPercentage())&&super.alertCreationAvailable().value()).readonly()}_onPropertiesChanged(){super._onPropertiesChanged(),this._precomputedBarStyles=new WeakMap}_tryChangeInputs(){var e;super._tryChangeInputs(),this._formatter=null,null===(e=this.priceScale())||void 0===e||e.updateFormatter()}_tryCreateFormatter(){var e,t;t=null===(e=null===P.customFormatters||void 0===P.customFormatters?void 0:P.customFormatters.priceFormatterFactory)||void 0===e?void 0:e.call(P.customFormatters,this.symbolInfo(),this.properties().childs().minTick.value());return(0,u.createSeriesFormatter)(this.symbolInfo(),this.properties().childs().minTick.value())}_onUnitChanged(){"alwaysOff"!==(0,h.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(e){const t=super._getSymbolObject(e),i=this.currency();null!==i&&(t["currency-id"]=i);const s=this.unit();return this._model.unitConversionEnabled()&&null!==s&&(t["unit-id"]=s),t.adjustment=this._model.mainSeries().properties().childs().dividendsAdjustment.value()?"dividends":"splits",t}_getSymbolForApi(e){return(0,u.symbolForApi)(this._resolvedSymbolsByInput[e]||null,e)}_onSymbolResolvingStart(){super._onSymbolResolvingStart(),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(e,t,i){super._onSymbolResolved(e,t,i),this._recreatePriceFormattingDependencies();const s=t===this.symbol()?(0,u.extractSymbolNameFromSymbolInfo)(i,this.symbol()):null,r=(0,u.symbolCurrency)(i),o=(0,u.symbolUnit)(i,this._model.unitConversionEnabled());if(this._setSymbolParamsInternal({symbol:null!=s?s:void 0,currency:r,unit:o},i),ae){const e=this.getSymbolString(this._getSymbolForApi(this.symbol()));this._setQuotesSymbol(e)}this._checkStyle(),this._symbolResolvingActive.setValue(!1)}_changeInputsImpl(e,t){super._changeInputsImpl(e,t),this._realignLineToolsIfParamsChanged()}_setQuotesSymbol(e){const t=this.symbolInfo(),i=(0,u.extractSymbolNameFromSymbolInfo)(t,e),s=i&&this.getSymbolString(i);this._quotesProvider.setQuotesSessionSymbol(s)}_createViews(){this._priceAxisViews=[];const e=new A(this);this._priceAxisViewsBase=[e];const t=new N(this);this._priceLinesAxisViews=[t],this._paneViews=[],this._labelPaneViews=[];let i=null,r=null;switch(this.properties().childs().style.value()){case 0:r=new J.SeriesBarsPaneView(this,this._model);break;case 1:
r=new K.SeriesCandlesPaneView(this,this._model);break;case 9:r=new se.SeriesHollowCandlesPaneView(this,this._model);break;case 13:r=new re.SeriesColumnsPaneView(this,this._model);break;case 2:r=new ee.SeriesLinePaneView(this,this._model);break;case 3:r=new te.SeriesAreaPaneView(this,this._model);break;case 10:{r=new ie.SeriesBaselinePaneView(this,this._model);const e=this.properties().childs().baselineStyle.childs();i=new T.SeriesWaterlinePaneView({paneHeight:()=>(0,s.ensureNotNull)(this.priceScale()).height(),color:()=>e.baselineColor.value(),baseLevelPercentage:()=>e.baseLevelPercentage.value()});break}case 12:r=new oe.SeriesHiLoPaneView(this,this._model)}r&&this._paneViews.push(r),null!==i&&this._paneViews.push(i),this._paneViews.push(new F(this)),this._dataWindowView||(this._dataWindowView=new G(this,this._model)),this._legendView||(this._legendView=new Z(this,this._model)),this._statusView||(this._statusView=new I.StudyStatusView(this)),this._priceAxisViews=[...this._priceAxisViewsBase],this._labelPaneViews.push(new X.PanePriceAxisView(e,this,this._model))}_createStudyOnServer(){null===this._seriesSource?super._createStudyOnServer():this._modifyStudyOnServer((0,s.ensureDefined)(this._inputs)),this._realignLineToolsIfParamsChanged()}_modifyStudyOnServer(e){null===this._seriesSource?super._modifyStudyOnServer(e,0):(this._seriesSource.modifySeries((0,p.decodeExtendedSymbol)(e.symbol),(0,f.getServerInterval)(this._series.properties().childs().interval.value())),this._seriesSource.isStarted()||this._seriesSource.start())}_stopStudyOnServer(){null===this._seriesSource?super._stopStudyOnServer():this._seriesSource.stop()}_titleInParts(e,t,i,s){const r=this.symbolInfo();let o;if(r){if(o=r.name,he)switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":o=r.description;break;case"ticker-and-description":o=`${r.name}, ${r.description}`}const e=!s&&(0,u.getStudySymbolExchange)(r);if(e)return[o,[e]]}else o=de?"":this.properties().childs().inputs.childs().symbol.value();return[o]}_onAllowExtendTimeScaleChanged(){const e=this.isStarted();if(e&&this.stop(!0),null!==this._seriesSource){const e=this._seriesSource.dataEvents();e.seriesError().unsubscribeAll(this),e.loading().unsubscribeAll(this),e.completed().unsubscribeAll(this),e.dataUpdated().unsubscribeAll(this),this._seriesSource.destroy()}this._seriesSource=null,e&&this.start(!0)}_convertSeriesErrorToStudy(e){return{error:e.error,ctx:e.ctx,solution_id:e.solution_id}}_setSymbolParamsInternal(e,t){const{symbol:i,currency:s,unit:r,style:o}=e,n=this.properties().childs(),a=n.inputs.childs().symbol.value(),l=n.currencyId.value(),h=n.unitId.value(),d=n.style.value();if(void 0!==i&&i!==a&&n.inputs.childs().symbol.setValueSilently(i),void 0!==s&&s!==l&&n.currencyId.setValueSilently(s),void 0!==r&&r!==h&&n.unitId.setValueSilently(r),void 0!==o&&n.style.setValueSilently(o),t)this._resolvedSymbolsByInput[this.symbol()]=t,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=t,this._realignToolsLastParams=null;else{const e=this.symbolInfo()
;null!==e&&(n.currencyId.setValueSilently((0,u.symbolCurrency)(e)),n.unitId.setValueSilently((0,u.symbolUnit)(e,this._model.unitConversionEnabled())))}n.inputs.childs().symbol.value()!==a&&n.inputs.childs().symbol.listeners().fire(n.inputs.childs().symbol),n.currencyId.value()!==l&&n.currencyId.listeners().fire(n.currencyId),n.unitId.value()!==h&&n.unitId.listeners().fire(n.unitId),n.style.value()!==d&&n.style.listeners().fire(n.style),this._checkStyle(),this._realignLineToolsIfParamsChanged()}_updateBarFunction(){this._barFunction=(0,l.barFunctionByStyle)(this.style(),this.priceSource())}_onChartStyleChanged(){var e;this._updateBarFunction(),(null===(e=this._styleToRecover)||void 0===e?void 0:e.originalStyle)!==this.style()&&(this._styleToRecover=null)}_checkStyle(){const e=this.style();(0,u.isCloseBasedSymbol)(this.symbolInfo())?(0,u.isSingleValueBasedStyle)(e)||(this.setStyle(2),this._styleToRecover={correctedStyle:this.style(),originalStyle:e}):null!==this._styleToRecover&&(this.setStyle(this._styleToRecover.originalStyle),this._styleToRecover=null)}_realignLineToolsIfParamsChanged(){const e=this.symbol(),t=this.interval(),i=this.currency(),s=this.unit();null!==this._realignToolsLastParams&&this._realignToolsLastParams.symbol===e&&this._realignToolsLastParams.interval===t&&this._realignToolsLastParams.currency===i&&this._realignToolsLastParams.unit===s||(this._model.realignLineTools(this),this._realignToolsLastParams={symbol:e,interval:t,currency:i,unit:s})}}},784093:(e,t,i)=>{"use strict";i.d(t,{StudyStrategy:()=>A});var s=i(650151),r=i(988411),o=i.n(r),n=i(373123),a=i(87476),l=i(551238),h=i(86441),d=i(724377),u=i(858063),c=i(112824),_=i(741341),p=i(43329);function m(e,t,i){return i?Math.sign(e)*(Math.round(Math.abs(e))+t):Math.round(e)+t}class y{constructor(e,t){this._data=e,this._textWidths=t}draw(e,t){const i=t.pixelRatio;void 0!==this._textWidths.rendererParams&&(0,c.areEqualPaneRenderParams)(this._textWidths.rendererParams,t)||(this._textWidths.rendererParams=t,this._textWidths.width.clear());const s=this._data;e.lineJoin="miter",e.miterLimit=Math.round(2*i),e.strokeStyle=s.bgColor,e.lineWidth=Math.max(2,(0,p.ceiledEven)(2*i));for(const t of s.items){e.beginPath();const r="lower"===t.pos;e.save();const o=Math.round(s.orderArrow.vMargin*i);e.translate(0,r?o:-o),this._drawOrderArrow(e,t.orderPoint,s.orderArrow,s.exitLineWidth,r,i),e.restore(),e.save(),this._drawPriceArrow(e,t.pricePoint,s.priceArrow,!r,i),e.restore(),e.closePath(),e.stroke(),e.fillStyle=s.exitLineWidth?s.exitColor:"buy"===t.type?s.buyColor:s.sellColor,e.fill()}const r=s.text;r.visible&&(0,_.drawScaled)(e,i,(()=>{e.font=r.fontSize+"px "+r.font,e.textAlign="center",e.textBaseline="top",e.fillStyle=s.labelColor,e.strokeStyle=s.bgColor,e.lineWidth=Math.min(2,Math.floor(2*i));for(const t of s.items){const i="lower"===t.pos;e.save();const o=i?1:-1,n=s.orderArrow;e.translate(0,(n.height+n.vMargin+s.exitLineWidth)*o);const a=i?r.vMargin:-r.fontSize-r.vMargin,l=o*(r.fontSize+r.lineSpacing);if(t.label&&(e.translate(0,a),
e.strokeText(t.label,Math.ceil(t.orderPoint.x),t.orderPoint.y),e.fillText(t.label,Math.ceil(t.orderPoint.x),t.orderPoint.y),this._textWidths.width.has(t.label)||this._textWidths.width.set(t.label,e.measureText(t.label).width)),t.qty){const i=Boolean(t.label)?l:a;e.translate(0,i),e.strokeText(t.qty,Math.ceil(t.orderPoint.x),t.orderPoint.y),e.fillText(t.qty,Math.ceil(t.orderPoint.x),t.orderPoint.y),this._textWidths.width.has(t.qty)||this._textWidths.width.set(t.qty,e.measureText(t.qty).width)}e.restore()}}))}hitTest(e){const t=this._testOrderArrows(e),i=!t&&this._data.text&&this._testText(e);return t||i?new u.HitTestResult(u.HitTestResult.REGULAR):null}_drawOrderArrow(e,t,i,s,r,o){let n,a;r?(e.rotate(Math.PI),n=-t.x,a=-t.y):(n=t.x,a=t.y),a-=i.height+s;const l=Math.max(1,Math.floor(o)),h=l%2?.5:0,d=r?"floor":"ceil";n=m(n*o,h,r),a=Math.round((Math[d](a)+.5)*o),e.translate(n,a);const u=(0,p.ceiledEven)(i.width*o)/2+h,c=(0,p.ceiledEven)(i.tailWidth*o)/2+h,_=Math.round(i.tailHeight*o);if(e.moveTo(-c,0),e.lineTo(c,0),e.lineTo(c,_),e.lineTo(u,_),e.lineTo(0,Math.round(i.height*o)),s){const t=Math.floor(l/2);e.lineTo(u+t,Math.round(i.height*o)),e.lineTo(u+t,Math.round((i.height+s)*o)),e.lineTo(-u-t,Math.round((i.height+s)*o)),e.lineTo(-u-t,Math.round(i.height*o)),e.lineTo(0,Math.round(i.height*o))}e.lineTo(-u,_),e.lineTo(-c,_),e.lineTo(-c,0),e.lineTo(c,0)}_drawPriceArrow(e,t,i,s,r){let o,n;s?(e.rotate(Math.PI),o=-t.x,n=-t.y):(o=t.x,n=t.y);const a=Math.max(1,Math.floor(r)),l=a%2?.5:0;o=m(o*r,l,s)-a,n=m(n*r,l,s);const h=(0,p.ceiledEven)(2*i.width*r)/2,d=-(Math.round(i.width*r)+l);e.translate(o,n),e.moveTo(0,0),e.lineTo(d,-h),e.lineTo(d,h),e.lineTo(0,0),e.lineTo(d,-h)}_testOrderArrows(e){const t=this._data,i=t.orderArrow.width/2;for(const s of t.items){const r=s.orderPoint;if(e.x<r.x-i||e.x>r.x+i)continue;const o="lower"===s.pos;let n=t.orderArrow.height+t.exitLineWidth;o||(n=-n);const a=r.y+(o?t.orderArrow.vMargin:-t.orderArrow.vMargin),l=Math.min(a,a+n),h=Math.max(a,a+n);if(!(e.y<l||e.y>h))return!0}return!1}_testText(e){const t=this._data,i=t.text;if(!i.visible)return!1;for(const s of t.items){const r=s.orderPoint,o="lower"===s.pos;let n=t.orderArrow.vMargin+t.orderArrow.height+t.exitLineWidth;o||(n=-n);const a=r.y+n,l=(s.label?1:0)+(s.qty?1:0);let h=i.vMargin+i.fontSize*l+i.lineSpacing*Math.max(0,l-1);o||(h=-h);const d=Math.min(a,a+h),u=Math.max(a,a+h);if(e.y<d||e.y>u)continue;const c=s.label&&s.qty?o&&e.y<a+i.fontSize||!o&&e.y>a-i.fontSize?s.label:s.qty:s.label||s.qty,_=this._textWidths.width.get(c);if(!(void 0===_||e.x<r.x-_/2||e.x>r.x+_/2))return!0}return!1}}var v=i(623331),f=i(812363),b=i(28035);const g={BuyColor:l.colorsPalette["color-tv-blue-500"],SellColor:"#FF1744",ExitColor:"#D500F9",LabelDarkColor:"#B2B5BE",LabelLightColor:l.colorsPalette["color-mirage-1"]};function S(e){return!1===e.e?"exit":e.b?"entryBuy":"entrySell"}function w(e){return e.b?"buy":"sell"}function x(e,t){return t?!e.b:e.b}function C(e,t){return x(e,t)?"lower":"upper"}function P(e,t,i){let s=e[t].get(i);return void 0===s&&(s=0,e[t].set(i,s)),s}
function I(e,t,i,r){const o=(0,s.ensureDefined)(e[t].get(i));e[t].set(i,o+r)}function T(e,t){return t&&(e.c||e.id||"Untitled")||""}function D(e,t){return t&&(e.b?"+":"-")+e.q||""}function R(e,t,i){return(0,s.ensureNotNull)(e.b?i.low(t):i.high(t))}function L(e,t){return("exit"===S(e)?2:0)+t.vMargin+t.height}class V{constructor(e,t,i){this._invalidated=!0,this._textWidths={width:new Map},this._study=e,this._series=t,this._model=i,this._orderArrow={vMargin:11,width:10,height:15,tailWidth:2,tailHeight:10},this._priceArrow={width:5},this._text={vMargin:7,font:v.CHART_FONT_FAMILY,fontSize:12,lineSpacing:2,visible:!0},this._items={entryBuy:[],entrySell:[],exit:[]},this._study.properties().childs().strategy.childs().orders.subscribe(this,this.update)}update(){this._invalidated=!0}clearItems(){this._items.entryBuy=[],this._items.entrySell=[],this._items.exit=[]}renderer(e,t){const i=this._study.properties().childs();if(!i.visible.value()||!i.strategy.childs().orders.childs().visible.value())return null;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length){const e=new b.CompositeRenderer;return this._items.entryBuy.length&&e.append(this._strategyOrdersRenderer(this._items.entryBuy,!1)),this._items.entrySell.length&&e.append(this._strategyOrdersRenderer(this._items.entrySell,!1)),this._items.exit.length&&e.append(this._strategyOrdersRenderer(this._items.exit,!0)),e}return null}_strategyOrdersRenderer(e,t){const i=this._model.backgroundColor().value(),s="black"===(0,d.rgbToBlackWhiteString)((0,d.parseRgb)(i),150);return new y({items:e,buyColor:g.BuyColor,sellColor:g.SellColor,exitColor:g.ExitColor,labelColor:s?g.LabelDarkColor:g.LabelLightColor,bgColor:i,orderArrow:this._orderArrow,exitLineWidth:t?2:0,priceArrow:this._priceArrow,text:this._text},this._textWidths)}_updateImpl(){this.clearItems();const e=this._study.ordersData();if(!e||!e.length)return;const t=this._model.timeScale(),i=this._series.priceScale(),r=t.visibleBarsStrictRange();if(t.isEmpty()||i.isEmpty()||null===r)return;const o=this._study.barsIndexes(),n=this._series.nearestIndex(r.firstBar(),f.PlotRowSearchMode.NearestRight),a=this._series.nearestIndex(r.lastBar(),f.PlotRowSearchMode.NearestLeft);if(void 0===n||void 0===a)return;const[l,d]=function(e,t,i,s){const r=[],o=[];for(let n=0;n<e.length;++n){const a=s[n];a<t||a>i||(r.push(e[n]),o.push(a))}return[r,o]}(e,n,a,o),[u,c]=this._labelAndQtyVisibility(l.length),_=u||c,p=this._textHeight(u,c),m=(0,s.ensureNotNull)(this._series.firstValue()),y=i.isInverted(),v={upper:new Map,lower:new Map};for(let e=0;e<l.length;e++){const s=l[e],r=x(s,y),o=d[e],n=t.indexToCoordinate(o),a=R(s,o,this._series);let _=i.priceToCoordinate(a,m);const f=C(s,y),b=P(v,f,o);_+=r?b:-b;I(v,f,o,L(s,this._orderArrow)+p);const g=i.priceToCoordinate(s.p,m),V=S(s);this._items[V].push({orderPoint:new h.Point(n,_),pricePoint:new h.Point(n,g),label:T(s,u),qty:D(s,c),pos:f,type:w(s)})}this._text.visible=_}_labelAndQtyVisibility(e){
const t=this._model.timeScale();if(t.barSpacing()<10&&this._orderArrow.width*e*2>t.width())return[!1,!1];const i=this._study.properties().childs().strategy.childs().orders.childs();return[i.showLabels.value(),i.showQty.value()]}_textHeight(e,t){return e||t?e&&t?2*this._text.fontSize+this._text.vMargin+this._text.lineSpacing:this._text.fontSize+this._text.vMargin:0}}const k=["strategy_props"];class A extends n.Study{constructor(e,t,i,s){super(e,t,i,s),this.watchedData=new(o()),this._barsIndexes=[],this._srcBarsIndexes=[],this._reportDataBuffer=null,this._reportData=null,this._activeState=!1,t.childs().visible.subscribe(this,this._processChangeVisibility),this._processChangeVisibility()}destroy(){this.model().removeStrategySource(this,0),super.destroy()}properties(){return this._properties}hasStateForAlert(){return(0,a.enabled)("alerts")}inputsForAlertState(){const e=this.inputs();return(0,s.ensureNotNull)(this._metaInfo).inputs.forEach((t=>{const i=e[t.id];i&&t.internalID&&(i.internalID=t.internalID)})),e}onData(e){e.method&&"data_update"!==e.method&&this.watchedData.setValue({method:e.method}),super.onData(e)}reportData(){return this._reportData}ordersData(){var e,t;return null!==(t=null===(e=this._reportData)||void 0===e?void 0:e.filledOrders)&&void 0!==t?t:null}barsIndexes(){return this._barsIndexes}clearData(){super.clearData(),this._reportDataBuffer=null,this._reportData=null,this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()}strategyOrdersPaneView(){return this.isSourceHidden()?null:this._strategyOrdersPaneView}restoreData(e){super.restoreData(e);const t=e;this.model().addStrategySource(this,0),t.reportData&&t.barsIndexes&&(this._reportData=t.reportData,this._barsIndexes=t.barsIndexes,this.watchedData.setValue({method:"data_update",nonSeriesData:{indexes_replace:!1,data:{report:this._reportData}}})),t.activeState&&(this._activeState=!0)}activeState(){return this._activeState}updateAllViews(e){super.updateAllViews(e),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()}state(e,t){const i=super.state(e,t);return e&&this._reportData&&this._barsIndexes&&(i.data||(i.data={}),i.data.reportData=this._reportData,i.data.barsIndexes=this._barsIndexes,i.data.activeState=this.model().activeStrategySource().value()===this),i}isHibernationAllowed(){return!1}_onDataUpdated(e,t,i){var r,o,n;let a=t&&!t.indexes_replace&&t.data&&t.data.report;a?(t&&!t.indexes_replace&&t.isUpdate&&this._reportDataBuffer&&(a={...this._reportDataBuffer,...a}),this._reportData={...this._reportDataBuffer,...a},this._reportDataBuffer=this._reportData,this.watchedData.setValue({method:"data_update",nonSeriesData:(0,s.ensureNotNull)(t)})):this.watchedData.setValue({method:"data_update",nonSeriesData:{indexes_replace:!1,data:{report:this._reportDataBuffer}}});const l=!(!t||!t.indexes_replace)
;("nochange"!==i&&i.length>0||(null!==(n=null===(o=null===(r=this._reportData)||void 0===r?void 0:r.filledOrders)||void 0===o?void 0:o.length)&&void 0!==n?n:0)!==this._barsIndexes.length)&&(a||l)&&this._collateBarsIndexes(Array.isArray(i)?i:this._srcBarsIndexes),super._onDataUpdated(e,t,i)}_createViews(){super._createViews(),this._strategyOrdersPaneView=new V(this,this._series,this._model)}_titleInputs(e,t){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1,skippedGroups:k,noExchanges:e,skipColorInputs:!0,skipTimeInputs:!0})}_getTelemetryObjectName(){return"strategy"}_getTelemetryAdditionalData(){return{symbol:this.series().actualSymbol(),resolution:this.series().interval()}}_collateBarsIndexes(e){var t;this._srcBarsIndexes=e;const i=null===(t=this._reportData)||void 0===t?void 0:t.filledOrders;if(i&&i.length){this._barsIndexes.length=0;for(let t=0;t<i.length;t++)this._barsIndexes[t]=e[i[t].tm]}}_processChangeVisibility(){this.properties().childs().visible.value()?this.model().addStrategySource(this,0):this.model().removeStrategySource(this,0)}}},373123:(e,t,i)=>{"use strict";var s=i(869403),r=i(720444).symbolTitle,o=i(424061).StudyBarColorer,n=i(175203).telemetry,a=i(884566).PlotList,l=i(251954),h=i(519872),d=i(353469).studyPlotFunctionMap,u=i(353469).studyEmptyPlotValuePredicate,c=i(87476),_=i(800113).StudyBase,p=i(114123).colorToInteger,m=i(272001).getLogger("Chart.Study"),y=c.enabled("datasource_copypaste"),v=c.enabled("study_symbol_ticker_description"),f=c.enabled("hide_unresolved_symbols_in_legend");class b extends _{constructor(e,t,i,r){super(e,t,i,r),this._resolvedSymbols={},this._chartApi=e._chartApi,this._plotFields=[];var o=this.metaInfo().plots;if(o)for(var n=0,l=o.length;n<l;n++){var _=o[n].id;this._plotFields.push(_)}this._invalidateLastNonEmptyPlotRowCache(),this.m_data=new a(d(this._metaInfo),u),this._plotOffsetsMetaInfoOverride={},this._createViews(),this._recreatePriceFormattingDependencies(),this._properties.precision.listeners().subscribe(this,this._precisionChanged),this._showStudyArgumentsProperty.listeners().subscribe(this,this.invalidateTitleCache),this._properties.inputs.listeners().subscribe(this,this.invalidateTitleCache),c.enabled("update_study_formatter_on_symbol_resolve")&&e.mainSeries().dataEvents().symbolResolved().subscribe(this,this._recreatePriceFormattingDependencies),e.mainSeries().dataEvents().symbolResolved().subscribe(this,this.invalidateTitleCache);var p=this,m={};this._simplePlotsCount=r.plots.filter((function(e,t){if(h.isLinePlot(e))return!0;if(h.isOhlcPlot(e)){var i=p.metaInfo().plots[t].target;return!m[i]&&(m[i]=i,!0)}return!1})).length,this.hasBarColorer()&&this._properties.visible.listeners().subscribe(e.mainSeries(),e.mainSeries().invalidateBarStylesCache),this._formatterChanged=new s,this._priceStepChanged=new s,this._aboutToBeDestroyed=new s,this._definitionsViewModel=null,this._updateMaxOffsetValue()}series(){return this._series}model(){return this._model}onTagsChanged(){return this._tagsChanged}
isSavedInStudyTemplates(){for(var e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type)return!1;return!0}_prepareInputValue(e,t){var i=e.id;if(t.valuesAsIsFromProperties)return this._properties.inputs[i].value();if("symbol"===e.type){var s=t&&t.symbolsForDisplay,o=this._properties.inputs[i].value(),n=s?o:this._getSymbolForApi(o),a=this._resolvedSymbols&&this._resolvedSymbols[this._getSymbolForResolve(n)];if(""===n&&e.optional){if(t&&t.keepOptionalSymbolsEmpty)return n;n=this._model.mainSeries().symbol(),a=this._model.mainSeries().symbolInfo()}if(s)if(a)if(v){switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":n=a.description;break;case"ticker-and-description":n=`${a.name}, ${a.description}`;break;case"ticker":n=a.name}}else n=r(a,t.noExchanges);else f&&(n="");else a&&(n=a.ticker||a.full_name),!this.isPine()&&t&&t.symbolsForChartApi&&(n=this.getSymbolString(n));return n}if("bar_time"===e.type){var l=this._properties.inputs[i].value();if(l<0){var h=this._rightOffsetToUnixTime(-l);l=h&&h>=0?h:l}return l}if(this._metaInfo.isTVScript||this._metaInfo.pine){if("text"===i)return this._metaInfo.defaults.inputs.text;if("pineId"===i)return this._metaInfo.scriptIdPart;if("pineVersion"===i)return this._metaInfo.pine?this._metaInfo.pine.version:"-1";if("color"===e.type&&this._metaInfo.isRGB){var d=this._properties.inputs[i].value();return p(d)}if("price"===e.type){var u=this._properties.inputs[i].value();return t.priceInputsForDisplay?this.formatter().format(u):u}return this._properties.inputs[i].value()}return this._properties.inputs[i].value()}priceLabelText(e){var t,i=this._metaInfo.styles,s=this._metaInfo.ohlcPlots;i&&i[e]&&(t=i[e]),s&&s[e]&&(t=s[e]);var r=t.title;return 1!==this._simplePlotsCount||h.isPlotTitleDefined(r)?this._metaInfo.is_price_study&&r!==this._metaInfo.shortDescription?""===r?this._metaInfo.shortDescription:this._metaInfo.shortDescription+":"+r:r:this._metaInfo.shortDescription}data(){return this.m_data}graphics(){return this._graphics}moveData(e){this._ongoingDataUpdate=this._ongoingDataUpdate.then(function(){this._invalidateLastNonEmptyPlotRowCache(),this.data().move(e)}.bind(this))}replaceData(e,t,i){this._invalidateLastNonEmptyPlotRowCache(),this.data().remove(e+1),this.data().addTail(i,t)}static offset(e,t){var i=0;return e._plotOffsets&&void 0!==e._plotOffsets[t]&&(i+=e._plotOffsets[t]),e.properties().offsets&&void 0!==e.properties().offsets[t]&&(i+=e.properties().offsets[t].val.value()),e.properties().offset&&(i+=e.properties().offset.val.value()),i}offset(e){return b.offset(this,e)}_showLastValueOnPriceScale(){return this._model.properties().scalesProperties.showStudyLastValue.value()}barColorer(){const e=this._metaInfo.plots;let t=null;for(let i=0;i<e.length;++i)if(h.isBarColorerPlot(e[i])){const e=new o(this,i);null==t?t=e:t.pushBackBarColorer(e)}if(null==t)throw new Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return t}base(){return 0}_onSourceFormatterChanged(){
null===this._formatter&&(null!==this.priceScale()&&this.priceScale().updateFormatter(),this._formatterChanged.fire())}_onSourcePriceStepChanged(){null===this._priceStep&&this._priceStepChanged.fire()}_precisionChanged(){this._recreatePriceFormattingDependencies()}setOwnerSource(e){super.setOwnerSource(e),this._recreatePriceFormattingDependencies()}nearestIndex(e,t,i){if(TradingView.isInteger(e)){var s=this.data().search(e,t,i);return null!==s?s.index:void 0}m.logDebug("nearestIndex: incorrect logicalPoint")}tags(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]}onExtendedHoursChanged(){this.restart(!0)}hasSymbolInputs(){for(var e=this._metaInfo.inputs.length;e--;)if("symbol"===this._metaInfo.inputs[e].type)return!0;return!1}canOverrideMinTick(){return!1}_subscribeExtendedHours(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.onExtendedHoursChanged().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)}removeByRemoveAllStudies(){return!0}getPlotFields(){return this._plotFields}_getPropertyDefinitionsViewModelClass(){return Promise.resolve(null)}getPropertyDefinitionsViewModel(){if(null===this._definitionsViewModel){var e=this;return e._getPropertyDefinitionsViewModelClass().then((function(t){return null===t||e._isDestroyed?null:(null===e._definitionsViewModel&&(e._definitionsViewModel=new t(e._model.undoModel(),e)),e._definitionsViewModel)}))}return Promise.resolve(this._definitionsViewModel)}_getTelemetryAdditionalData(){var e="";return this._metaInfo.pine&&this._metaInfo.pine.version&&this._metaInfo.shortId.indexOf("USER")>=0&&(e="_v"+this._metaInfo.pine.version),{symbol:this.series().actualSymbol(),resolution:this.series().interval(),study:this._metaInfo.shortId+e}}_sendTelemetryReport(e,t,i){void 0===i&&(i=this._getTelemetryAdditionalData());var s=Object.assign(t,{additional:i});n.sendChartReport(e,s)}_sendTelemetryCounter(e,t){this._sendTelemetryReport(e,{count:1},t)}onAboutToBeDestroyed(){return this._aboutToBeDestroyed}destroy(){this._aboutToBeDestroyed.fire(),this._isDestroyed=!0,null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),this._properties.precision.listeners().unsubscribe(this,this._precisionChanged),this._showStudyArgumentsProperty.listeners().unsubscribe(this,this.invalidateTitleCache),this._model.mainSeries().dataEvents().symbolResolved().unsubscribeAll(this),this.hasBarColorer()&&this._properties.visible.listeners().unsubscribe(this._model.mainSeries(),this._model.mainSeries().invalidateBarStylesCache),this._model.mainSeries().dataEvents().symbolResolved().unsubscribe(this,this._recreatePriceFormattingDependencies),void 0!==this._properties.offsets&&this._properties.offsets.listeners().unsubscribe(this,this._updateMaxOffsetValue),
void 0!==this._properties.offset&&this._properties.offset.listeners().unsubscribe(this,this._updateMaxOffsetValue),super.destroy()}desiredPriceScalePosition(){return this.metaInfo().isTVScriptStub?"overlay":this.metaInfo().linkedToSeries?"as-series":void 0===this.metaInfo().priceScale?null:["right","left","overlay"][this.metaInfo().priceScale]}formatterChanged(){return this._formatterChanged}copiable(){return y&&!this.isChildStudy()}setPriceScale(e){super.setPriceScale(e),l.emit("study_event",this.id(),"price_scale_changed")}}TradingView.Study=b,t.Study=b},720841:(e,t,i)=>{"use strict";var s=i(650151).ensureNotNull,r=i(86441).Point,o=i(544445).TextRenderer,n=i(348406).NonSeriesStudy,a=i(296266).TrendLineRenderer,l=i(858063).HitTestResult,h=i(28035).CompositeRenderer,d=i(114123),u=i(739665).LineEnd,c=i(623331).CHART_FONT_FAMILY;const{LINESTYLE_SOLID:_,LINESTYLE_DASHED:p}=i(631586);class m{constructor(e,t){this._model=e,this._source=t,this._waves=[],this._highlights=[],this._retracements=[],this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._waves=[],this._highlights=[],this._retracements=[],this._source.customData()&&this._source.properties().visible.value()){var e=this._source.customData().waves,t=this._source._indexes,i=this._model.timeScale(),o=this._source.priceScale(),n=this._model.mainSeries(),a=n.firstBar();if(o&&!o.isEmpty()&&!i.isEmpty()&&a&&e){for(var l=i.visibleBarsStrictRange(),h=l.lastBar(),d=l.firstBar(),u=["m0StartIndex","startIndex","endIndex","m2EndIndex","m3EndIndex"],c=n.firstValue(),y=0;y<e.length;y++)if(e[y]){for(var v=[],f=0;f<5;f++){var b=t[e[y][u[f]]];if(!isFinite(b))break;v.push(b)}if(0!==v.length&&!(v[0]>h||v[v.length-1]<d)){var g=+e[y].size;if(isFinite(g)){var S="level"+g,w=this._source.properties()[S];if(w.visible.value()){var x=parseInt(e[y].direction,10),C=[];C.dir=x,C.prices=[],C.orig_prices=[];for(var P=0;P<v.length;P++){if(void 0!==v[P]){var I={};if((A=v[P])<(a=s(n.bars().first())).index)continue;if(I.x=i.indexToCoordinate(A),null===(k=n.bars().valueAt(A))){C.push(void 0),C.prices.push(void 0),C.orig_prices.push(void 0),x=-x;continue}var T,D=1===x?k[TradingView.HIGH_PLOT]:k[TradingView.LOW_PLOT];if(C.orig_prices.push(D),C.prices.push(D),I.y=o.priceToCoordinate(D,c),I.label=m._wave5Labels[g][P],I.align=-1===x?"top":"bottom",I.color=w.color.value(),delete I.backgroundColor,C.id="wave_"+y,this._source===this._model.hoveredSource())(T=this._model.lastHittestData())&&T.wave&&T.wave.id===C.id&&(I.color="#FFFFFF",I.backgroundColor=w.color.value());I.fontsize=m._fontSizes[g],I._textCache={widths:[]},I.wave=C,C.push(I)}else C.push(void 0),C.prices.push(void 0);x=-x}C.inds=v,C.dir=x,C.color=w.color.value(),this._waves.push(C)}}}}if(this._source===this._model.hoveredSource())if(T=this._model.lastHittestData()){v=T.wave.inds,x=-T.wave.dir;var R=T.backgroundColor?T.backgroundColor:T.color,L=T.wave.orig_prices,V=null;for(P=0;P<v.length;P++){if(void 0!==v[P]){var k,A=v[P],E=i.indexToCoordinate(A);if(null===(k=n.bars().valueAt(A))){x=-x;continue}D=L[P]
;var N=o.priceToCoordinate(D,c),M=new r(E,N);V&&this._highlights.push({points:[V,M],color:R}),V=M}x=-x}if(void 0!==L[1]&&void 0!==L[2]){var B=L[1],F=L[2],O=L[3],H=L[0];this._retracements.push({y:o.priceToCoordinate(B,c),x:0,extendLeft:!0,extendRight:!0,color:R,text:"",style:_}),this._retracements.push({y:o.priceToCoordinate(B,c),x:0,extendLeft:!0,extendRight:!0,color:R,text:"",style:_});x=F-B;if(void 0!==L[0]){D=B+(W=(H-B)/x)*x,E=i.indexToCoordinate(v[0]);this._retracements.push({y:o.priceToCoordinate(D,c),x:E,extendLeft:!1,extendRight:!0,color:R,text:""+W.toFixed(3),style:p})}if(void 0!==O){var W;D=F-(W=(F-O)/x)*x,E=i.indexToCoordinate(v[3]);this._retracements.push({y:o.priceToCoordinate(D,c),x:E,extendLeft:!0,extendRight:!1,color:R,text:""+W.toFixed(3),style:p})}}}}}}renderer(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);for(var e=new h,t=this.CIRCLE_SIZE,i={},s=0;s<this._waves.length;s++)for(var n=this._waves[s],p=0;p<n.length;p++){var m=n[p];if(void 0!==m){var y,v;"top"===m.align?(y=m.y+4,i["top_"+m.x]?(y+=i["top_"+m.x]*t,i["top_"+m.x]=i["top_"+m.x]+1):i["top_"+m.x]=1,v=y+t):(y=m.y-t-4,i["bottom_"+m.x]?(y-=i["bottom_"+m.x]*t,i["bottom_"+m.x]=i["bottom_"+m.x]+1):i["bottom_"+m.x]=1,v=y+t);var f={};f.points=[new r(m.x,(y+v)/2)],f.text=m.label,f.color=m.color,f.backgroundColor=m.backgroundColor,f.font="Verdana",f.bold=!0,f.offsetX=0,f.offsetY=0,f.vertAlign="middle",f.horzAlign="center",f.fontsize=m.fontsize;var b=new l(l.REGULAR,m);e.append(new o(f,b))}}for(s=0;s<this._highlights.length;s++){var g=this._highlights[s],S={points:g.points,width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:d.generateColor(g.color,50),linewidth:3,linestyle:_,extendleft:!1,extendright:!1,leftend:u.Circle,rightend:u.Circle};(w=new a).setData(S),e.append(w)}for(s=0;s<this._retracements.length;s++){var w,x=this._retracements[s];S={points:[new r(x.x+1,x.y),new r(x.x,x.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:d.generateColor(x.color,50),linewidth:1,linestyle:x.style,extendleft:x.extendLeft,extendright:x.extendRight,leftend:u.Normal,rightend:u.Normal};(w=new a).setData(S),e.append(w);var C={points:[new r(x.x,x.y)],text:this._retracements[s].text,backgroundColor:"#606060",color:"#FFFFFF",vertAlign:"middle",horzAlign:"center",font:c,offsetX:x.extendRight?-50:50,offsetY:2,fontsize:12};e.append(new o(C))}return e}}m.prototype.CIRCLE_SIZE=16,m._wave5Labels=[["i","ii","iii","iv","v"],["(i)","(ii)","(iii)","(iv)","(v)"],["((i))","((ii))","((iii))","((iv))","((v))"],["1","2","3","4","5"],["(1)","(2)","(3)","(4)","(5)"],["((1))","((2))","((3))","((4))","((5))"],["I","II","III","IV","V"],["(I)","(II)","(III)","(IV)","(V)"],["((I))","((II))","((III))","((IV))","((V))"]],m._wave3Labels=[["a","b","c"],["A","B","C"]],m._fontSizes=[10,10,10,11,11,11,12,12,12];t.study_ElliottWave=class extends n{margins(){return[.1,.1]}isVisible(){if(!this.properties().visible.value()||!this.isActualInterval())return!1
;for(var e=0;e<=8;e++)if(this.properties()["level"+e].visible.value())return!0;return!1}_createViews(){super._createViews(),this._setPaneViews([new m(this.model(),this)])}}},921341:(e,t,i)=>{"use strict";var s=i(814606).OverlayLegendValuesProvider,r=i(215328).OverlayStatusProvider,o=i(458607).StudyOverlayBase;t.study_Overlay=class extends o{constructor(e,t,i,s){super(e,t,i,s),this._paneView=null;var r=this;this.properties().minTick.listeners().subscribe(null,(function(){r._recreatePriceFormattingDependencies(),r.updateAllViews(),r._model.fullUpdate()}))}_showLastValueOnPriceScale(){return this._model.properties().scalesProperties.showSeriesLastValue.value()}_onQuotesUpdate(e,t){!this._legendView||void 0===t.values.change&&void 0===t.values.change_percent||(this._legendView.update(),this._model.updateSource(this))}destroy(){this._quotesProvider.quotesUpdate().unsubscribeAll(this),this._quotesProvider.destroy(),super.destroy()}tags(){var e=[],t=this.symbolInfo();return t?e.push(t.name):this._properties.inputs.symbol.value()&&e.push(this._properties.inputs.symbol.value()),e}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([i.e(88601),i.e(3623),i.e(53465),i.e(44728),i.e(68833),i.e(5588),i.e(60607)]).then(i.bind(i,190615))).StudyOverlayDefinitionsViewModel}defaultPlotIdForAlert(){return""}valuesProvider(){return new s(this,this.model())}statusProvider(e){return new r(this,this.model())}}},827094:(e,t,i)=>{"use strict";var s=i(348406).NonSeriesStudy,r=i(858063).HitTestResult,o=i(28035).CompositeRenderer,n=i(904244).MediaCoordinatesPaneRenderer,a=i(623331);class l extends n{constructor(e,t){super(),this._data=e,this._textCache=t}_drawImpl(e){var t=e.context;t.textBaseline="bottom",t.font=(this._data.bold?"bold ":"normal ")+this._data.fontsize+"px "+this._data.font;var i=Math.round(t.measureText(this._data.text).width+4);this._textCache.width=i,t.translate(this._data.x+.5,this._data.y),t.strokeStyle=this._data.borderColor,t.fillStyle=this._data.backColor,t.beginPath(),t.moveTo(0,0),1===this._data.type?(t.lineTo(5,-5),t.lineTo(i/2,-5),t.lineTo(i/2,-5-this._data.fontsize),t.lineTo(-i/2,-5-this._data.fontsize),t.lineTo(-i/2,-5),t.lineTo(-5,-5),t.lineTo(0,0)):(t.lineTo(5,5),t.lineTo(i/2,5),t.lineTo(i/2,5+this._data.fontsize),t.lineTo(-i/2,5+this._data.fontsize),t.lineTo(-i/2,5),t.lineTo(-5,5),t.lineTo(0,0)),t.fill(),t.stroke(),t.fillStyle=this._data.textColor,t.textAlign="center",t.textBaseline="middle",1===this._data.type?t.fillText(this._data.text,0,-5-this._data.fontsize/2):t.fillText(this._data.text,0,5+this._data.fontsize/2)}hitTest(e){var t=this._textCache.width,i=this._data.fontsize+15,s=this._data.x-t/2,o=this._data.y;return 1===this._data.type&&(o-=i),e.x>=s&&e.x<=s+t&&e.y>=o&&e.y<=o+i?new r(r.REGULAR):null}}class h{constructor(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()){
var e=this._source.customData().pivots,t=this._source._indexes,i=this._model.timeScale(),s=this._source.priceScale(),r=this._model.mainSeries(),o=r.firstValue();if(s&&!s.isEmpty()&&!i.isEmpty()&&o)for(var n=i.visibleBarsStrictRange(),a=n.firstBar(),l=n.lastBar(),h=0;h<e.length;h++)if(e[h]){var d=t[e[h].index];if(!(d<a||d>l)){var u=e[h].type,c=r.bars().valueAt(d);if(null!==c){var _=1===u?c[TradingView.HIGH_PLOT]:c[TradingView.LOW_PLOT],p=Math.round(i.indexToCoordinate(d)),m=s.priceToCoordinate(_,o);1===u?m-=i.barSpacing()/6:m+=i.barSpacing()/6+1,m=Math.round(m),this._pivots.push({x:p,y:m,price:s.formatPrice(_,o),type:u})}}}}}_pixelMargins(){return this._source.properties().fontsize.value()+15}topPixelMargin(){return this._pixelMargins()}bottomPixelMargin(){return this._pixelMargins()}renderer(){if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),0!==this._pivots.length){for(var e=a.CHART_FONT_FAMILY,t=this._source.properties().fontsize.value(),i=this._source.properties().borderColor.value(),s=this._source.properties().backColor.value(),r=this._source.properties().textColor.value(),n=new o,h=0;h<this._pivots.length;h++){var d=this._pivots[h],u={x:d.x,y:d.y,type:d.type,text:d.price,font:e,fontsize:t,borderColor:i,backColor:s,textColor:r},c=h;this._textCache[c]||(this._textCache[c]={}),n.append(new l(u,this._textCache[c]))}return n}}}t.study_PivotPointsHighLow=class extends s{isVisible(){return this.properties().visible.value()&&this.isActualInterval()}_createViews(){super._createViews(),this._setPaneViews([new h(this.model(),this)])}autoScaleInfo(e,t){return{range:this._series.priceRange(e,t),topPixelMargin:this._paneViews.length>0?this._paneViews[0].topPixelMargin():0,bottomPixelMargin:this._paneViews.length>0?this._paneViews[0].bottomPixelMargin():0}}}},486702:(e,t,i)=>{"use strict";var s=i(650151).assert,r=i(758337).clone,o=i(373123).Study,n=i(884566).PlotList,a=i(353469).studyPlotFunctionMap,l=i(353469).studyEmptyPlotValuePredicate;class h{constructor(e,t,i){this._strategyPlotIndex=e,this._targetPlotIndex=t,this._startIndex=i}rebuildData(e){var t=this._targetPlotIndex+1,i=this._strategyPlotIndex+1,s=null,r=null;e.range(this._startIndex||e.firstIndex(),e.lastIndex()).each((function(o,n){var a=n[t],l=n[i]?Math.round(n[i]):null;if(n[t]=null,n[i]=null,!l||l>0)return!1;var h=o+l,d={pointIndex:h,value:a};if(r){if(r.pointIndex!==d.pointIndex){h>=0&&(e.valueAt(h)[t]=a);var u=!1;s&&(u=s.value<=r.value&&r.value<=a||s.value>=r.value&&r.value>=a),u?r.pointIndex>=0&&(e.valueAt(r.pointIndex)[t]=null):s=r,r=d}}else r=d;return!1}))}}t.study_ScriptWithDataOffset=class extends o{constructor(e,t,i,s){super(e,t,i,s),this._underlyingData=new n(a(s),l)}clearData(){super.clearData(),this._underlyingData.clear()}_mergeData(e){this._invalidateLastNonEmptyPlotRowCache();var t=this._underlyingData.firstIndex();this._underlyingData.merge(e),t!==this._underlyingData.firstIndex()&&(this.m_data=new n(a(this._metaInfo),l));var i=this.m_data.lastIndex();this._underlyingData.range(i,this._underlyingData.lastIndex()).each(function(e,t){
return this.m_data.add(e,r(t)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach((function(e){new h(e.strategyIndex,e.targetIndex,i).rebuildData(this.m_data)}),this)}_plotsForStrategyProcessing(){var e=[];return this._metaInfo.plots.forEach((function(t,i){if("dataoffset"===t.type){var r=this._metaInfo.plots.findIndex((function(e){return e.id===t.target}));s(r>=0,"target plot not found for strategy plot "+t.id);var o={strategyIndex:i,targetIndex:r};e.push(o)}}),this),e}}},852469:(e,t,i)=>{"use strict";var s=i(86441).Point,r=i(348406).NonSeriesStudy,o=i(296266).TrendLineRenderer,n=i(858063).HitTestResult,a=i(28035).CompositeRenderer,l=i(739665).LineEnd;const{LINESTYLE_SOLID:h}=i(631586);class d{constructor(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}update(){this._invalidated=!0}updateImpl(){if(this._pivots=[],this._source.customData()&&this._source.customData().zigzag&&this._source.properties().visible.value()){var e=this._source.customData().zigzag,t=this._source._indexes,i=this._model.timeScale(),s=this._source.priceScale(),r=this._model.mainSeries(),o=r.firstValue();if(s&&!s.isEmpty()&&!i.isEmpty()&&o)for(var n=0;n<e.length;n++)if(e[n]){var a=t[e[n].index],l=e[n].type,h=r.bars().valueAt(a);if(null!==h){var d=1===l?h[TradingView.HIGH_PLOT]:h[TradingView.LOW_PLOT],u=Math.round(i.indexToCoordinate(a)),c=s.priceToCoordinate(d,o);this._pivots.push({x:u,y:c})}}}}renderer(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);for(var e=new a,t=this._source.properties().color.value(),i=this._source.properties().linewidth.value(),r=1;r<this._pivots.length;r++){var d=this._pivots[r],u=this._pivots[r-1],c={points:[new s(u.x,u.y),new s(d.x,d.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t,linewidth:i,linestyle:h,extendleft:!1,extendright:!1,leftend:l.Normal,rightend:l.Normal},_=new o;_.setData(c),_.setHitTest(new n(n.REGULAR)),e.append(_)}return e}}t.study_ZigZag=class extends r{isVisible(){return this.properties().visible.value()&&this.isActualInterval()}_createViews(){super._createViews(),this._setPaneViews([new d(this.model(),this)])}}},499791:(e,t,i)=>{"use strict";function s(e){return e.charAt(0).toUpperCase()+e.substring(1)}i.d(t,{capitalizeFirstLetter:()=>s})},788600:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25"><circle fill="none" stroke="currentColor" stroke-width="1.5" cx="12.5" cy="12.5" r="11.75"/><path fill="currentColor" d="M11.16 18H8.78V7.28c1.52-.06 2.47-.08 2.86-.08a5 5 0 0 1 3.72 1.37 4.9 4.9 0 0 1 1.37 3.64c0 3.86-1.85 5.79-5.57 5.79zm-.48-9.06v7.32c.31.03.64.05 1 .05a2.7 2.7 0 0 0 2.26-1.05c.54-.7.82-1.67.82-2.93 0-2.3-1.07-3.44-3.2-3.44-.21 0-.5.02-.88.05z"/></svg>'},261820:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><rect width="21.5" height="21.5" fill="none" stroke="currentColor" stroke-width="1.5" rx="1.25" x=".75" y=".75"/><path fill="currentColor" d="M10.23 7.96v2.51h3.55v1.62h-3.55v3.22h4.87V17H8.33V6.27h6.85v1.7h-4.95z"/></svg>'},777566:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 25" width="24" height="25"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M10.85 23.72c.4.25.9.25 1.3 0l9.5-5.82c.37-.22.6-.63.6-1.06V2c0-.69-.56-1.25-1.25-1.25H2C1.31.75.75 1.31.75 2v14.84c0 .43.23.84.6 1.06l9.5 5.82z"/><path fill="currentColor" d="M10.23 7.96v2.51h3.55v1.62h-3.55v3.22h4.87V17H8.33V6.27h6.85v1.7h-4.95z"/></svg>'},385442:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 25" width="24" height="25"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M10.87 1.23c.39-.22.87-.22 1.26 0l9.5 5.52c.38.23.62.64.62 1.08V23c0 .69-.56 1.25-1.25 1.25H2c-.69 0-1.25-.56-1.25-1.25V7.83c0-.44.24-.85.62-1.08l9.5-5.52z"/><path fill="currentColor" d="M10.23 9.96v2.51h3.55v1.62h-3.55v3.22h4.87V19H8.33V8.27h6.85v1.7h-4.95z"/></svg>'},717090:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25" fill="none"><circle stroke="currentColor" stroke-width="1.5" cx="12.5" cy="12.5" r="11.75"/><path fill="currentColor" d="m19.27 13.25.53-.53-.53-.53-3.5-3.5-1.06 1.06 2.22 2.22h-5.38L7.27 7.7 6.2 8.75l4.5 4.5.22.22h6L14.7 15.7l1.06 1.06 3.5-3.5Zm-10.56.44-3 3 1.06 1.06 3-3L8.7 13.7Z"/></svg>'},274469:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" width="25" height="25"><circle fill="none" stroke="currentColor" stroke-width="1.5" cx="12.5" cy="12.5" r="11.75"/><path fill="currentColor" d="M9.25 17.4l.7-1.7c.75.53 1.5.8 2.22.8 1.12 0 1.68-.4 1.68-1.18 0-.37-.13-.72-.4-1.05-.26-.33-.8-.7-1.63-1.11a8.18 8.18 0 0 1-1.66-1.02 2.82 2.82 0 0 1-.89-2.17c0-.83.3-1.52.9-2.06.62-.55 1.4-.82 2.35-.82 1.24 0 2.15.23 2.73.7l-.57 1.63a3.58 3.58 0 0 0-2.12-.71c-.44 0-.78.11-1.03.35a1.2 1.2 0 0 0-.36.9c0 .61.69 1.25 2.05 1.92.72.35 1.23.67 1.55.97.32.3.56.64.73 1.03.16.4.24.83.24 1.31 0 .87-.34 1.59-1.03 2.15a4.2 4.2 0 0 1-2.75.84c-1 0-1.9-.26-2.71-.77z"/></svg>'},627086:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},323373:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);