(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[52024],{856433:e=>{e.exports={actionButton:"actionButton-NwOkSfvs",small:"small-NwOkSfvs",hiddenTitle:"hiddenTitle-NwOkSfvs"}},760365:e=>{e.exports={label:"label-veVJ4P41"}},806730:e=>{e.exports={popupDialog:"popupDialog-MQCwyEL_",wrap:"wrap-MQCwyEL_",main:"main-MQCwyEL_",small:"small-MQCwyEL_",title:"title-MQCwyEL_",content:"content-MQCwyEL_",html:"html-MQCwyEL_",footer:"footer-MQCwyEL_",close:"close-MQCwyEL_",marginWithoutCloseButton:"marginWithoutCloseButton-MQCwyEL_"}},185383:e=>{e.exports={autocomplete:"autocomplete-P_1Nqk_V",caret:"caret-P_1Nqk_V",icon:"icon-P_1Nqk_V",suggestions:"suggestions-P_1Nqk_V",suggestion:"suggestion-P_1Nqk_V",noResults:"noResults-P_1Nqk_V",selected:"selected-P_1Nqk_V",opened:"opened-P_1Nqk_V"}},536612:e=>{e.exports={dialog:"dialog-nnDbXk_L",rounded:"rounded-nnDbXk_L",shadowed:"shadowed-nnDbXk_L",fullscreen:"fullscreen-nnDbXk_L",darker:"darker-nnDbXk_L",backdrop:"backdrop-nnDbXk_L"}},419283:e=>{e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","tooltip-offset":"20px",dialog:"dialog-UExGRfA_",dragging:"dragging-UExGRfA_",dialogAnimatedAppearance:"dialogAnimatedAppearance-UExGRfA_",dialogAnimation:"dialogAnimation-UExGRfA_",dialogTooltip:"dialogTooltip-UExGRfA_"}},190948:e=>{e.exports={icon:"icon-XIHzWm6B",dropped:"dropped-XIHzWm6B"}},655072:(e,t,n)=>{"use strict";n.d(t,{Confirm:()=>l});var s=n(50959),i=n(777754),o=n(927582),a=n(623895);function l(e){const{title:t,onClose:l=(()=>{}),mainButtonText:r,mainButtonIntent:c,cancelButtonText:u,closeOnOutsideClick:h,onConfirm:d,onCancel:p}=e,g=(0,a.getContent)(e);return s.createElement(o.SimpleDialog,{...g,title:t||i.t(null,void 0,n(994443)),onClose:l,actions:[{name:"yes",title:r||i.t(null,void 0,n(879831)),intent:c||"success",handler:d},{name:"no",title:u||i.t(null,void 0,n(606255)),appearance:"stroke",intent:"default",handler:e=>{p?p(e):e.dialogClose()}}],dataName:"confirm-dialog",closeOnOutsideClick:h})}},741408:(e,t,n)=>{"use strict";n.d(t,{Rename:()=>C});var s=n(50959),i=n(777754),o=n(927582),a=n(303616),l=n(497754),r=n(416293),c=n(514420),u=n(521040),h=n(157490),d=n(733410),p=n(707533),g=n(185383);function m(e,t){return""===e||-1!==t.toLowerCase().indexOf(e.toLowerCase())}class _ extends s.PureComponent{constructor(e){if(super(e),this._containerInputElement=null,this._raf=null,this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleMeasure=()=>{if(this.state.isMeasureValid||!this.props.suggestionsInPortal||!this._containerInputElement)return;const{bottom:e,left:t,width:n}=this._containerInputElement.getBoundingClientRect();this.setState({appearingWidth:n,appearingPosition:{x:t,y:e},isMeasureValid:!0})},this._setInputRef=e=>{e&&(this._inputElement=e,this.props.setupHTMLInput&&this.props.setupHTMLInput(e),this._inputElement.addEventListener("keyup",this._handleKeyUpEnter))},this._setContainerInputRef=e=>{
this._containerInputElement=e},this._handleCaretClick=()=>{this.state.isOpened?this.props.preventOnFocusOpen&&this._focus():this.props.preventOnFocusOpen?this._open():this._focus()},this._handleOutsideClick=()=>{const{allowUserDefinedValues:e,value:t,onChange:n}=this.props,{queryValue:s}=this.state;e?n&&s!==t&&n(s):this.setState(this._valueToQuery(t)),this._close()},this._handleFocus=e=>{this.props.preventOnFocusOpen||this._open(),this.props.onFocus&&this.props.onFocus(e)},this._handleChange=e=>{const{preventSearchOnEmptyQuery:t,allowUserDefinedValues:n,onChange:s,onSuggestionsOpen:i,onSuggestionsClose:o}=this.props,a=e.currentTarget.value;if(t&&""===a)this.setState({queryValue:a,isOpened:!1,active:void 0}),o&&o();else{const e=this._suggestions(a),t=Object.keys(e).length>0;this.setState({queryValue:a,isOpened:t,active:n?void 0:this._getActiveKeyByValue(a)}),t&&i&&i()}n&&s&&s(a)},this._handleItemClick=e=>{const t=e.currentTarget.id;this.setState({queryValue:f(this.props.source)[t]}),this.props.onChange&&this.props.onChange(t),this._close()},this._handleKeyDown=e=>{if(-1===[d.KeyCode.DownArrow,d.KeyCode.UpArrow,d.KeyCode.Enter,d.KeyCode.Escape].indexOf(e.which))return;const{allowUserDefinedValues:t,value:n,onChange:s,onSuggestionsOpen:i}=this.props,{active:o,isOpened:a,queryValue:l}=this.state;a&&(e.preventDefault(),e.stopPropagation());const r=this._suggestions(l);switch(e.which){case d.KeyCode.DownArrow:case d.KeyCode.UpArrow:const c=Object.keys(r);if(!a&&c.length&&e.which===d.KeyCode.DownArrow){this.setState({isOpened:!0,active:c[0]}),i&&i();break}let u;if(void 0===o){if(e.which===d.KeyCode.UpArrow){this._close();break}u=0}else u=c.indexOf(o)+(e.which===d.KeyCode.UpArrow?-1:1);u<0&&(u=0),u>c.length-1&&(u=c.length-1);const h=c[u];this.setState({active:h});const p=document.getElementById(h);p&&this._scrollIfNotVisible(p,this._suggestionsElement);break;case d.KeyCode.Escape:this._close(),a||this._blur();break;case d.KeyCode.Enter:let g=o;t&&(a&&g?this.setState(this._valueToQuery(g)):g=l),void 0!==g&&(this._close(),a||this._blur(),g!==n?s&&s(g):this.setState(this._valueToQuery(g)))}},this._setSuggestionsRef=e=>{e&&(this._suggestionsElement=e)},this._scrollIfNotVisible=(e,t)=>{const n=t.scrollTop,s=t.scrollTop+t.clientHeight,i=e.offsetTop,o=i+e.clientHeight;i<=n?e.scrollIntoView(!0):o>=s&&e.scrollIntoView(!1)},!(e=>Array.isArray(e.source)||!e.allowUserDefinedValues)(e))throw new Error("allowUserDefinedProps === true cay only be used if source is array");this.state={valueFromProps:e.value,isOpened:!1,active:e.value,queryValue:f(e.source)[e.value]||(e.allowUserDefinedValues?e.value:"")}}componentDidMount(){this.props.suggestionsInPortal&&window.addEventListener("resize",this._resize)}componentDidUpdate(){this.state.isOpened&&this._handleMeasure()}componentWillUnmount(){this._inputElement&&this._inputElement.removeEventListener("keyup",this._handleKeyUpEnter),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),window.removeEventListener("resize",this._resize)}render(){return s.createElement(h.OutsideEvent,{
handler:this._handleOutsideClick,click:!0},(e=>s.createElement("div",{className:l(g.autocomplete,"js-dialog-skip-escape"),ref:e},s.createElement(u.InputControl,{id:this.props.id,name:this.props.name,endSlot:Object.keys(this._suggestions(this.state.queryValue)).length?s.createElement(c.EndSlot,null,s.createElement("span",{className:g.caret,onClick:this._handleCaretClick},s.createElement(r.ToolWidgetCaret,{className:g.icon,dropped:this.state.isOpened}))):void 0,maxLength:this.props.maxLength,reference:this._setInputRef,containerReference:this._setContainerInputRef,stretch:!0,placeholder:this.props.placeholder,value:this.state.queryValue,intent:this.props.error?"danger":void 0,onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this.props.onBlur,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onKeyDown:this._handleKeyDown,autoComplete:"off",size:this.props.size}),this._renderSuggestions())))}static getDerivedStateFromProps(e,t){const{allowUserDefinedValues:n,value:s,source:i}=e;if(s===t.valueFromProps&&t.isOpened)return null;const o=n?s:""===s?"":f(i)[s]||t.queryValue;return{...t,valueFromProps:s,active:s,queryValue:o}}_renderSuggestions(){return this.props.suggestionsInPortal?this.state.isOpened?this._renderPortalSuggestions():null:this._renderSuggestionsItems()}_renderPortalSuggestions(){return s.createElement(p.Portal,null,this._renderSuggestionsItems())}_focus(){this._inputElement.focus()}_blur(){this._inputElement.blur()}_open(){const{onSuggestionsOpen:e}=this.props;this._focus(),this.setState({isOpened:!0,active:this.props.value}),e&&e()}_close(){const{onSuggestionsClose:e}=this.props;this.setState({isOpened:!1,active:void 0}),e&&e()}_suggestions(e){const{filter:t=m}=this.props,n=f(this.props.source),s={};return Object.keys(n).filter((s=>t(e,n[s]))).forEach((e=>s[e]=n[e])),s}_renderSuggestionsItems(){const e=this._suggestions(this.state.queryValue),t=Object.keys(e).map((t=>{const n=l(g.suggestion,this.state.active===t&&g.selected);return s.createElement("li",{id:t,key:t,className:n,onClick:this._handleItemClick},e[t])})),o=s.createElement("li",{className:g.noResults},i.t(null,void 0,n(356614)));if(!t.length&&this.props.noEmptyText)return null;const{appearingPosition:a,appearingWidth:r}=this.state;return s.createElement("ul",{className:l(g.suggestions,this.state.isOpened&&g.opened),ref:this._setSuggestionsRef,style:{left:a&&a.x,top:a&&a.y,width:r&&r}},t.length?t:o)}_handleKeyUpEnter(e){e.which===d.KeyCode.Enter&&e.stopImmediatePropagation()}_getActiveKeyByValue(e){const{filter:t=m}=this.props,n=this._suggestions(e),s=Object.keys(n);for(const i of s)if(t(e,n[i]))return i;return s[0]}_valueToQuery(e){return{queryValue:f(this.props.source)[e]||""}}}function f(e){let t={};return Array.isArray(e)?e.forEach((e=>{t[e]=e})):t=e,t}var v=n(760365);function E(e){const{maxLength:t,value:n,placeholder:i,onValueChange:o,nameInputRef:l,source:r=[],autocompleteFilter:c}=e,{isSmallTablet:u}=(0,s.useContext)(a.SimpleDialogContext),h=s.useRef(null);return(0,s.useLayoutEffect)((()=>{
h.current&&h.current.select()}),[]),s.createElement(s.Fragment,null,function(){if("content"in e)return s.createElement("div",{className:v.label},e.content);if("html"in e)return s.createElement("div",{className:v.label,dangerouslySetInnerHTML:{__html:e.html}});return null}(),s.createElement(_,{maxLength:t,value:n,onChange:function(e){o(e)},allowUserDefinedValues:!0,preventOnFocusOpen:!0,noEmptyText:!0,source:r,preventSearchOnEmptyQuery:!0,filter:c,setupHTMLInput:function(e){h.current=e,l&&(l.current=e)},size:u?"large":void 0,placeholder:i,suggestionsInPortal:!0}))}var y=n(623895);function C(e){const{title:t,maxLength:a,initValue:l,placeholder:r,onClose:c=(()=>{}),mainButtonText:u,mainButtonIntent:h,cancelButtonText:d,validator:p=D,onRename:g,source:m,autocompleteFilter:_}=e,f=(0,s.useRef)(null),[v,C]=(0,s.useState)(l||""),[S,w]=(0,s.useState)((()=>p(v))),x=(0,y.getContent)(e);return s.createElement(o.SimpleDialog,{title:t||i.t(null,void 0,n(435038)),content:s.createElement(E,{...x,nameInputRef:f,maxLength:a,placeholder:r,value:v,onValueChange:function(e){C(e),w(p(e))},source:m,autocompleteFilter:_}),onClose:c,actions:[{disabled:!S,name:"save",title:u||i.t(null,void 0,n(185520)),intent:h||"primary",handler:({dialogClose:e,innerManager:t})=>g({newValue:v,focusInput:T,dialogClose:e,innerManager:t})},{name:"cancel",title:d||i.t(null,void 0,n(620036)),appearance:"stroke",intent:"default",handler:({dialogClose:e})=>{e()}}],dataName:"rename-dialog"});function T(){f.current&&f.current.focus()}}function D(e){return Boolean(e.trim())}},623895:(e,t,n)=>{"use strict";function s(e){return"html"in e?{html:e.html}:{content:e.text}}n.d(t,{getContent:()=>s})},246093:(e,t,n)=>{"use strict";n.d(t,{Warning:()=>l});var s=n(50959),i=n(777754),o=n(927582),a=n(623895);function l(e){const{title:t,closeOnOutsideClick:l,onClose:c=(()=>{})}=e,u=(0,a.getContent)(e);return s.createElement(o.SimpleDialog,{...u,title:t||i.t(null,void 0,n(533603)),onClose:c,actions:r(e),dataName:"warning-dialog",closeOnOutsideClick:l})}function r(e){const{buttonText:t,intentButton:s,actions:o}=e,a=[{name:"ok",title:t||i.t(null,void 0,n(468988)),intent:s,handler:({dialogClose:e})=>{e()}}];return o&&o.forEach((e=>a.push(e))),a}},264006:(e,t,n)=>{"use strict";n.d(t,{showSimpleDialogInstance:()=>r});var s=n(50959),i=n(500962),o=n(650151),a=n(670797);const l=new(n(322654).DialogsOpenerManager);function r(e,t,n){const{title:r}=e,c=`${r}_${"text"in e?e.text:e.html}`;if(l.isOpened(c))return(0,o.ensureDefined)(l.getDialogPayload(c)).closeHandler;const u=document.createElement("div"),h=()=>{var t;null===(t=e.onClose)||void 0===t||t.call(e),i.unmountComponentAtNode(u),l.setAsClosed(c)};return i.render(s.createElement(a.SlotContext.Provider,{value:n||null},s.createElement(t,{...e,onClose:h})),u),l.setAsOpened(c,{closeHandler:h}),h}},303616:(e,t,n)=>{"use strict";n.d(t,{SimpleDialogContext:()=>s});const s=n(50959).createContext({isSmallTablet:!1,dialogCloseHandler:()=>{}})},927582:(e,t,n)=>{"use strict";n.d(t,{SimpleDialog:()=>S})
;var s=n(50959),i=n(497754),o=n(83436),a=n(251954),l=n(992697),r=n(470316),c=n(18182),u=n(332450),h=n(642709),d=n(150881),p=n(938886),g=n(612247),m=n(650151),_=n(640027),f=n(670797),v=n(303616),E=n(856433);function y(e){const{disabled:t,name:n,title:o,appearance:a,intent:l,handler:r,reference:c}=e,{isSmallTablet:u,dialogCloseHandler:h}=(0,s.useContext)(v.SimpleDialogContext),d=(0,m.ensureNotNull)((0,s.useContext)(f.SlotContext)),y=(0,_.useIsMounted)(),[C,D]=(0,s.useState)(!1);return s.createElement(p.Button,{disabled:t,reference:c,className:i(E.actionButton,u&&E.small),name:n,size:u?"l":void 0,appearance:a,intent:l,onClick:function(){if(C)return;const e=r({dialogClose:h,innerManager:d});e&&(D(!0),e.then((()=>{y.current&&D(!1)})))}},s.createElement("span",{className:i(C&&E.hiddenTitle)},o),C&&s.createElement(g.Loader,{color:"white"}))}var C=n(507720),D=n(806730);function S(e){const{title:t,onClose:n,actions:p,dataName:g,popupDialogClassName:m,contentClassName:_,wrapperClassName:f,backdrop:E,closeOnOutsideClick:S=!0,showCloseButton:w=!0,closeOnEscapePress:x=!0}=e;(0,s.useEffect)((()=>(a.subscribe(u.CLOSE_POPUPS_AND_DIALOGS_COMMAND,n,null),()=>{a.unsubscribe(u.CLOSE_POPUPS_AND_DIALOGS_COMMAND,n,null)})),[n]);const[T,k]=(0,s.useState)(!0),M=(0,s.useRef)(null);return s.createElement(c.MatchMedia,{rule:h.DialogBreakpoints.TabletSmall},(a=>s.createElement(v.SimpleDialogContext.Provider,{value:{isSmallTablet:a,dialogCloseHandler:n}},s.createElement(l.PopupDialog,{className:i(D.popupDialog,m),isOpened:T,backdrop:E,onClickBackdrop:O,onClickOutside:S?O:void 0,onKeyDown:b,autofocus:!0,fixedBody:!0},s.createElement("div",{className:i(D.wrap,f),"data-name":g},s.createElement("div",{className:i(D.main,!w&&D.marginWithoutCloseButton,a&&D.small)},t&&s.createElement("div",{className:i(D.title,a&&D.small)},t),function(t){if("html"in e)return s.createElement(d.TouchScrollContainer,{className:i(D.content,t&&D.small,D.html,_),dangerouslySetInnerHTML:{__html:e.html}});if("content"in e)return s.createElement(d.TouchScrollContainer,{className:i(D.content,t&&D.small,_)},e.content);return null}(a),p&&p.length>0&&s.createElement("div",{className:i(D.footer,a&&D.small)},p.map(((e,t)=>s.createElement(y,{...e,key:e.name,reference:0===t?M:void 0}))))),w&&s.createElement(o.Icon,{className:i(D.close,a&&D.small),icon:C,onClick:O,"data-name":"close","data-role":"button"}))))));function b(e){switch((0,r.hashFromEvent)(e)){case 27:T&&x&&(e.preventDefault(),n());break;case 13:if(T&&p&&p.length){e.preventDefault();const t=M.current;t&&t.click()}}}function O(){k(!1),n()}}},697989:(e,t,n)=>{"use strict";n.d(t,{Dialog:()=>c});var s=n(50959),i=n(497754),o=n(670797),a=n(829725),l=n(8626),r=n(536612);class c extends s.PureComponent{constructor(){super(...arguments),this._manager=new a.OverlapManager,this._handleSlot=e=>{this._manager.setContainer(e)}}render(){const{rounded:e=!0,shadowed:t=!0,fullscreen:n=!1,darker:a=!1,className:c,backdrop:u,containerTabIndex:h=-1}=this.props,d=i(c,r.dialog,e&&r.rounded,t&&r.shadowed,n&&r.fullscreen,a&&r.darker),p=(0,
l.filterDataProps)(this.props),g=this.props.style?{...this._createStyles(),...this.props.style}:this._createStyles();return s.createElement(s.Fragment,null,s.createElement(o.SlotContext.Provider,{value:this._manager},u&&s.createElement("div",{onClick:this.props.onClickBackdrop,className:r.backdrop}),s.createElement("div",{...p,className:d,style:g,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:h,"aria-label":this.props.containerAriaLabel},this.props.children)),s.createElement(o.Slot,{reference:this._handleSlot}))}_createStyles(){const{bottom:e,left:t,width:n,right:s,top:i,zIndex:o,height:a}=this.props;return{bottom:e,left:t,right:s,top:i,zIndex:o,maxWidth:n,height:a}}}},8629:(e,t,n)=>{"use strict";n.d(t,{PopupContext:()=>s});const s=n(50959).createContext(null)},992697:(e,t,n)=>{"use strict";n.d(t,{PopupDialog:()=>y});var s=n(50959),i=n(497754),o=n(650151),a=n(697989),l=n(368337),r=n(157490),c=n(686668);class u{constructor(e,t,n={boundByScreen:!0}){this._drag=null,this._canBeTouchClick=!1,this._frame=null,this._onMouseDragStart=e=>{if(0!==e.button||this._isTargetNoDraggable(e))return;e.preventDefault(),document.addEventListener("mousemove",this._onMouseDragMove),document.addEventListener("mouseup",this._onMouseDragEnd);const t=(0,c.clampPosition)((0,c.positionFromMouseEvent)(e));this._dragStart(t)},this._onTouchDragStart=e=>{if(this._isTargetNoDraggable(e))return;this._canBeTouchClick=!0,e.preventDefault(),this._header.addEventListener("touchmove",this._onTouchDragMove,{passive:!1});const t=(0,c.clampPosition)((0,c.positionFromTouchEvent)(e));this._dragStart(t)},this._onMouseDragEnd=e=>{e.target instanceof Node&&this._header.contains(e.target)&&e.preventDefault(),document.removeEventListener("mousemove",this._onMouseDragMove),document.removeEventListener("mouseup",this._onMouseDragEnd),this._onDragStop()},this._onTouchDragEnd=e=>{this._header.removeEventListener("touchmove",this._onTouchDragMove),this._onDragStop(),this._canBeTouchClick&&(this._canBeTouchClick=!1,(0,c.simulateClick)(e.target))},this._onMouseDragMove=e=>{const t=(0,c.clampPosition)((0,c.positionFromMouseEvent)(e));this._dragMove(t)},this._onTouchDragMove=e=>{this._canBeTouchClick=!1,e.preventDefault();const t=(0,c.clampPosition)((0,c.positionFromTouchEvent)(e));this._dragMove(t)},this._onDragStop=()=>{this._drag=null,this._header.classList.remove("dragging"),this._options.onDragEnd&&this._options.onDragEnd()},this._dialog=e,this._header=t,this._options=n,this._header.addEventListener("mousedown",this._onMouseDragStart),this._header.addEventListener("touchstart",this._onTouchDragStart),this._header.addEventListener("touchend",this._onTouchDragEnd)}destroy(){null!==this._frame&&cancelAnimationFrame(this._frame),this._header.removeEventListener("mousedown",this._onMouseDragStart),document.removeEventListener("mouseup",this._onMouseDragEnd),this._header.removeEventListener("touchstart",this._onTouchDragStart),
this._header.removeEventListener("touchend",this._onTouchDragEnd),document.removeEventListener("mouseleave",this._onMouseDragEnd)}updateOptions(e){this._options=e}_dragStart(e){const t=this._dialog.getBoundingClientRect();this._drag={startX:e.x,startY:e.y,finishX:e.x,finishY:e.y,dialogX:t.left,dialogY:t.top};const n=Math.round(t.left),s=Math.round(t.top);this._dialog.style.transform=`translate(${n}px, ${s}px)`,this._header.classList.add("dragging"),this._options.onDragStart&&this._options.onDragStart()}_dragMove(e){if(this._drag){if(this._drag.finishX=e.x,this._drag.finishY=e.y,null!==this._frame)return;this._frame=requestAnimationFrame((()=>{if(this._drag){const t=e.x-this._drag.startX,n=e.y-this._drag.startY;this._moveDialog(this._drag.dialogX+t,this._drag.dialogY+n)}this._frame=null}))}}_moveDialog(e,t){const n=this._dialog.getBoundingClientRect(),{boundByScreen:s}=this._options,i=(0,c.clampSegment)(e,n.width,s?0:-1/0,s?window.innerWidth:1/0),o=(0,c.clampSegment)(t,n.height,s?0:-1/0,s?window.innerHeight:1/0);this._dialog.style.transform=`translate(${Math.round(i)}px, ${Math.round(o)}px)`}_isTargetNoDraggable(e){return e.target instanceof Element&&null!==e.target.closest("[data-disable-drag]")}}const h={vertical:0};class d{constructor(e,t){this._frame=null,this._isFullscreen=!1,this._handleResize=()=>{null===this._frame&&(this._frame=requestAnimationFrame((()=>{this.recalculateBounds(),this._frame=null})))},this._dialog=e,this._guard=t.guard||h,this._calculateDialogPosition=t.calculateDialogPosition,this._initialHeight=e.style.height,window.addEventListener("resize",this._handleResize)}updateOptions(e){this._guard=e.guard||h,this._calculateDialogPosition=e.calculateDialogPosition}setFullscreen(e){this._isFullscreen!==e&&(this._isFullscreen=e,this.recalculateBounds())}centerAndFit(){const{x:e,y:t}=this.getDialogsTopLeftCoordinates(),n=this._calcAvailableHeight(),s=this._calcDialogHeight();if(n===s)if(this._calculateDialogPosition){const{left:e,top:t}=this._calculateDialogPosition(this._dialog,document.documentElement,this._guard);this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else this._dialog.style.height=s+"px";this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${e}px, ${t}px)`}getDialogsTopLeftCoordinates(){const{clientHeight:e,clientWidth:t}=document.documentElement,n=this._calcDialogHeight(),s=t/2-this._dialog.clientWidth/2,i=e/2-n/2;return{x:Math.round(s),y:Math.round(i)}}recalculateBounds(){const{clientHeight:e,clientWidth:t}=document.documentElement;if(this._isFullscreen)this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.width="100%",this._dialog.style.height="100%",this._dialog.style.transform="none";else{const{vertical:n}=this._guard;if(this._calculateDialogPosition){const s=this._calculateDialogPosition(this._dialog,{clientWidth:t,clientHeight:e},{vertical:n}),{left:i,top:o}=s;this._dialog.style.transform=`translate(${Math.round(i)}px, ${Math.round(o)}px)`}else{this._dialog.style.width="",
this._dialog.style.height="";const s=this._dialog.getBoundingClientRect(),i=e-2*n,o=(0,c.clampSegment)(s.left,s.width,0,t),a=(0,c.clampSegment)(s.top,s.height,n,e);this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${Math.round(o)}px, ${Math.round(a)}px)`,this._dialog.style.height=i<s.height?i+"px":this._initialHeight}}}destroy(){window.removeEventListener("resize",this._handleResize),null!==this._frame&&(cancelAnimationFrame(this._frame),this._frame=null)}_calcDialogHeight(){const e=this._calcAvailableHeight();return e<this._dialog.clientHeight?e:this._dialog.clientHeight}_calcAvailableHeight(){return document.documentElement.clientHeight-2*this._guard.vertical}}var p=n(707533),g=n(8629),m=n(575658),_=n(12173),f=n(419283);const v=f["tooltip-offset"];class E extends s.PureComponent{constructor(e){super(e),this._dialog=null,this._cleanUpFunctions=[],this._prevActiveElement=null,this._handleDialogRef=e=>{const{reference:t}=this.props;this._dialog=e,"function"==typeof t&&t(e)},this._handleFocus=e=>{this._moveToTop()},this._handleMouseDown=e=>{this._moveToTop()},this._handleTouchStart=e=>{this._moveToTop()},this.state={canFitTooltip:!1}}render(){return s.createElement(g.PopupContext.Provider,{value:this},s.createElement(r.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this.props.onClickOutside},(e=>s.createElement("div",{ref:e,"data-outside-boundary-for":this.props.name,onFocus:this._handleFocus,onMouseDown:this._handleMouseDown,onTouchStart:this._handleTouchStart,"data-dialog-name":this.props["data-dialog-name"]},s.createElement(a.Dialog,{style:this._applyAnimationCSSVariables(),...this.props,reference:this._handleDialogRef,className:i(f.dialog,this.props.className)},this.props.dialogTooltip&&this.state.canFitTooltip&&s.createElement(_.TooltipWidget,{className:f.dialogTooltip},this.props.dialogTooltip),this.props.children)))))}componentDidMount(){const{draggable:e,boundByScreen:t,onDragStart:n}=this.props,s=(0,o.ensureNotNull)(this._dialog);if(e){const e=s.querySelector("[data-dragg-area]");if(e&&e instanceof HTMLElement){const i=new u(s,e,{boundByScreen:Boolean(t),onDragStart:n});this._cleanUpFunctions.push((()=>i.destroy())),this._drag=i}}this._prevActiveElement=document.activeElement,this.props.autofocus&&!s.contains(document.activeElement)&&s.focus(),(this._isFullScreen()||this.props.fixedBody)&&(0,m.setFixedBodyState)(!0);const{guard:i,calculateDialogPosition:a}=this.props;if(this.props.resizeHandler)this._resize=this.props.resizeHandler;else{const e=new d(s,{guard:i,calculateDialogPosition:a});this._cleanUpFunctions.push((()=>e.destroy())),this._resize=e}this.props.isAnimationEnabled&&this.props.growPoint&&this._applyAppearanceAnimation(this.props.growPoint),this.props.centeredOnMount&&this._resize.centerAndFit(),this._resize.setFullscreen(this._isFullScreen()),this.props.dialogTooltip&&this._handleTooltipFit(),this.props.shouldForceFocus&&s.focus()}componentDidUpdate(){if(this._resize){const{guard:e,calculateDialogPosition:t}=this.props
;this._resize.updateOptions({guard:e,calculateDialogPosition:t}),this._resize.setFullscreen(this._isFullScreen())}this._drag&&this._drag.updateOptions({boundByScreen:Boolean(this.props.boundByScreen),onDragStart:this.props.onDragStart})}componentWillUnmount(){var e;if(this._prevActiveElement&&document.body.contains(this._prevActiveElement)&&(null===document.activeElement||document.activeElement===document.body||(null===(e=this._dialog)||void 0===e?void 0:e.contains(document.activeElement))))try{this._prevActiveElement.focus({preventScroll:!0})}catch(e){}for(const e of this._cleanUpFunctions)e();(this._isFullScreen()||this.props.fixedBody)&&(0,m.setFixedBodyState)(!1)}focus(){this._dialog&&this._dialog.focus()}centerAndFit(){this._resize&&this._resize.centerAndFit()}recalculateBounds(){this._resize&&this._resize.recalculateBounds()}_moveToTop(){null!==this.context&&this.context.moveToTop()}_applyAnimationCSSVariables(){return{"--animationTranslateStartX":null,"--animationTranslateStartY":null,"--animationTranslateEndX":null,"--animationTranslateEndY":null}}_applyAppearanceAnimation(e){if(this._resize&&this._dialog){const{x:t,y:n}=e,{x:s,y:i}=this._resize.getDialogsTopLeftCoordinates();this._dialog.style.setProperty("--animationTranslateStartX",`${t}px`),this._dialog.style.setProperty("--animationTranslateStartY",`${n}px`),this._dialog.style.setProperty("--animationTranslateEndX",`${s}px`),this._dialog.style.setProperty("--animationTranslateEndY",`${i}px`),this._dialog.classList.add(f.dialogAnimatedAppearance)}}_handleTooltipFit(){if(this._resize){const e=this._resize.getDialogsTopLeftCoordinates().y-parseInt(v)>=0;this.setState({canFitTooltip:e})}}_isFullScreen(){return Boolean(this.props.fullscreen)}}E.contextType=p.PortalContext,E.defaultProps={boundByScreen:!0,draggable:!0,centeredOnMount:!0};const y=(0,l.makeOverlapable)(E)},686668:(e,t,n)=>{"use strict";n.d(t,{clampSegment:()=>i,clampPosition:()=>o,simulateClick:()=>a,positionFromMouseEvent:()=>l,positionFromTouchEvent:()=>r});var s=n(43329);function i(e,t,n,s){return e+t>s&&(e=s-t),e<n&&(e=n),e}function o(e){return{x:(0,s.clamp)(e.x,20,document.documentElement.clientWidth-20),y:(0,s.clamp)(e.y,20,window.innerHeight-20)}}function a(e){if(e instanceof SVGElement){const t=document.createEvent("SVGEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}e instanceof HTMLElement&&e.click()}function l(e){return{x:e.clientX,y:e.clientY}}function r(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}}},416293:(e,t,n)=>{"use strict";n.d(t,{ToolWidgetCaret:()=>r});var s=n(50959),i=n(497754),o=n(83436),a=n(190948),l=n(100578);function r(e){const{dropped:t,className:n}=e;return s.createElement(o.Icon,{className:i(n,a.icon,{[a.dropped]:t}),icon:l})}},100578:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},507720:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="currentColor"><path d="m.58 1.42.82-.82 15 15-.82.82z"/><path d="m.58 15.58 15-15 .82.82-15 15z"/></svg>'}}]);