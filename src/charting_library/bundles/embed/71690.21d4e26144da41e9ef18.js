"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[71690],{747342:(t,e,s)=>{var r=s(414879),i=s(137989).tzData;let n;function o(t){this._name=t;var e=i[t];if(e||(e={time:[],offset:[]},this._invalid=!0),e.time.length!==e.offset.length&&(e={time:[],offset:[]},this._invalid=!0),!e.time_utc){for(var s=e.time,r=e.offset,n=s.length,o=new Array(n),a=0;a<n;a++)s[a]*=1e3,r[a]*=1e3,o[a]=s[a]-r[a];e.time_utc=o}this.tz=e}function a(t,e){var s=t.length;if(0===s)return-1;if(isNaN(e))throw Error("Key is NaN");for(var r=0,i=s-1,n=u((r+i)/2);;){if(t[n]>e){if((i=n-1)<r)return n}else if(i<(r=n+1))return n<s-1?n+1:-1;n=u((r+i)/2)}}o.prototype.offset_utc=function(t){return o._offset(this.tz.time_utc,this.tz.offset,t)},o.prototype.offset_loc=function(t){return o._offset(this.tz.time,this.tz.offset,t)},o.prototype.name=function(){return this._name},o.prototype.correction_loc=function(t){var e=this.tz.time,s=this.tz.offset,r=a(e,t);if(r<1)return 0;var i=s[r]-s[r-1];if(i>0&&t-e[r-1]<=i)return i;return 0},o.prototype.is_valid=function(){return!this._invalid},o._offset=function(t,e,s){var r=a(t,s);return-1===r?0:e[r]};var u=function(t){return 0|t},l=function(t){return 60*t*1e3},d=function(t,e){return c(t)-c(e)},c=function(t){return t<0?u(t/1e3)-(t%1e3!=0?1:0):u(t/1e3)};function p(t){return t%4==0&&(t%100!=0||t%400==0)}var h={0:0,1:31,2:59,3:90,4:120,5:151,6:181,7:212,8:243,9:273,10:304,11:334},_={...r.WeekDays,...r.Months,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,millisecondsPerDay:l(1440),get_minutes_from_hhmm:function(t){return-1!==t.indexOf(":")&&(t=t.split(":").join("")),t%100+60*u(t/100)},get_year:function(t){return t.getUTCFullYear()},get_month:function(t){return t.getUTCMonth()},get_hours:function(t){return t.getUTCHours()},get_minutes:function(t){return t.getUTCMinutes()},get_seconds:function(t){return t.getUTCSeconds()},get_day_of_month:function(t){return t.getUTCDate()},get_day_of_week:function(t){return t.getUTCDay()+1},get_day_of_year:function(t){var e=t.getUTCMonth(),s=h[e];return e>_.JANUARY+1&&p(t.getUTCFullYear())&&(s+=1),s+t.getUTCDate()},get_week_of_year:function(t){var e=new Date(Date.UTC(t.getUTCFullYear(),0,1)).getUTCDay(),s=0===e?1:8-e,r=_.get_day_of_year(t)-s;return Math.ceil(r/7)+1},get_minutes_from_midnight:function(t){return 60*_.get_hours(t)+_.get_minutes(t)},set_hms:function(t,e,s,r,i,n){t.setUTCHours(e),t.setUTCMinutes(s),t.setUTCSeconds(r),t.setUTCMilliseconds(i),void 0!==n&&_.correct_time(t,n)},correct_time:function(t,e){var s=t.getTime(),r=e.correction_loc(s);t.setTime(s+r)},add_days_considering_dst:function(t,e,s){var r=t.offset_utc(e),i=this.clone(e);this.add_date(i,s);var n=t.offset_utc(i);return i.setTime(i.getTime()+r-n),i},add_date:function(t,e){t.setTime(t.getTime()+e*_.millisecondsPerDay)},add_minutes:function(t,e){t.setTime(t.getTime()+l(e))},clone:function(t){return new Date(t.getTime())},get_days_per_year:function(t){var e=t.getUTCFullYear();return this.days_per_year(e)},
days_per_year:function(t){return p(t)?366:365},get_days_in_month:function(t,e){let s;switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:s=31;break;case 1:s=28,p(e)&&s++;break;default:s=30}return s},get_part:function(t,e){switch(e){case _.YEAR:return _.get_year(t);case _.MONTH:return _.get_month(t);case _.DAY_OF_MONTH:return _.get_day_of_month(t);case _.WEEK_OF_YEAR:return _.get_week_of_year(t);case _.DAY_OF_WEEK:return _.get_day_of_week(t);case _.HOUR_OF_DAY:return _.get_hours(t);case _.MINUTE:return _.get_minutes(t);case _.DAY_OF_YEAR:return _.get_day_of_year(t);case _.SECOND:return _.get_seconds(t);default:return t.getTime()}},time_minutes:l,time_seconds:function(t){return 1e3*t},time_minutes_diff:function(t,e){return u(d(t,e)/60)},time_seconds_diff:d,utc_to_cal:function(t,e){return new Date(_.utc_to_cal_ts(t,e))},utc_to_cal_ts:function(t,e){return e+t.offset_utc(e)},get_cal:function(t,e,s,r,i,n,o){var a=new Date(Date.UTC(e,s,r,i||0,n||0,o||0)),u=t.offset_utc(+a);return new Date(a.valueOf()-u)},get_cal_from_unix_timestamp_ms:function(t,e){return new Date(e+t.offset_utc(e))},get_cal_utc:function(t,e,s){return new Date(Date.UTC(t,e,s))},cal_to_utc:function(t,e){var s=e.getTime();return s-t.offset_loc(s)},get_timezone:function(t){return new o(t)},shift_day:function(t,e){var s=t-1;return(s+=e)>6?s%=7:s<0&&(s=(7+s%7)%7),s+1},setCustomTimezones:function(t){n=t}};t.exports=_},726322:(t,e,s)=>{s.d(e,{SessionInfo:()=>o,BarBuilderBase:()=>a});var r=s(747342),i=s(119460),n=s(155925);class o{constructor(t,e,s,r){this.init(t,e,s,r),this._state={timezone:t,spec:e,holidays:s,corrections:r}}init(t,e,s,i){this.timezone=r.get_timezone(t),this.spec=new n.SessionSpec(t,e,s,i)}state(){return this._state}static fromState(t){return new o(t.timezone,t.spec,t.holidays,t.corrections)}}class a{alignTime(t){if(isNaN(t))return NaN;let e=this.indexOfBar(t);return e===i.SessionStage.POST_SESSION&&(this.moveTo(t),e=this.indexOfBar(t)),e<0?NaN:this.startOfBar(e)}}},406786:(t,e,s)=>{s.d(e,{LineToolAnchoredVWAP:()=>U});var r=s(650151),i=s(108184),n=s(758337),o=s(988411),a=s.n(o),u=s(87476),l=s(212110),d=s(765477),c=s(933024),p=s(40210),h=s.n(p),_=s(619276),y=s(800113),m=s(168210),f=s(812363),S=s(659914),g=s(241056),P=s(841404),I=s(114123);class v extends P.PriceAxisView{constructor(t){super(),this._model=t.model(),this._source=t}_updateRendererData(t,e,s){t.visible=!1,e.visible=!1;const r=this._source.model(),i=this._source.priceScale();if(null===i)return;if(!r.isPriceScaleVisible(i))return;const n=this._source.lastValueData("",!1);n.noData||(s.background=(0,I.resetTransparency)(n.color),s.textColor=this.generateTextColor(n.color),s.coordinate=n.coordinate,s.floatCoordinate=n.floatCoordinate,this._showAxisLabel()&&(t.text=n.text,t.visible=!0))}_showAxisLabel(){return this._source.properties().childs().axisLabelVisible.value()}}var w=s(86441),b=s(823757),T=s(627425),A=s(831699);class x extends T.StudyPlotPaneView{constructor(t,e,s,r){super(t,e,s,r),this._line=t}_updateImplFull(){if(super._updateImplFull(!0),
window.TradingView.printing||!this._line.hasAlert.value()||this._model.readOnly()||this._model.isInReplay())return!1;const t=this._items;if(!this._renderer.isEmpty()&&t.length>0){const e=t[t.length-1],s=this._model.timeScale().width();if(e.x<0||t[0].x>s)return!1;const r=Math.min(s-5,e.x);let i=e.y;if(e.x>r){let s=t.length-2;for(;s>=0;){const n=t[s];if(n.x<=r){const t=(r-n.x)/(e.x-n.x);i=n.y+(e.y-n.y)*t;break}s-=1}}const n=new w.Point(r,i);return this._renderer.append(new A.PaneRendererClockIcon({points:[n],color:this._line.getAlertIsActive()?this._lineColor:b.Constants.DrawingIconColor,horzMargin:-16})),!0}return!1}_updateImplLight(){this._updateImplFull()}}var D=s(272001),C=s(87225),M=s(925622),V=s(224186),L=s(809350),F=s(404822);const R=(0,D.getLogger)("Chart.AnchoredVWAP"),N=(0,_.studyIdString)("AnchoredVWAP","tv-basicstudies");function B(t,e,s,i){return"calculate_stDev"in(0,r.ensureDefined)(t.inputs)||void 0===i.inputs.find((t=>"calculate_stDev"===t.id))||((0,r.ensureDefined)(e.inputs).calculate_stDev=!1),e.styles&&(E(e.styles.VWAP),E(e.styles.UpperBand),E(e.styles.LowerBand),E(e.styles.UpperBand_2),E(e.styles.LowerBand_2),E(e.styles.UpperBand_3),E(e.styles.LowerBand_3)),e}function E(t){void 0!==t&&void 0!==t.visible&&(t.display=t.visible?15:0,delete t.visible)}class U extends S.StudyLineDataSource{constructor(t,e,s,i,n){s=s||(0,r.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:N}));const o=null!=e?e:U.createProperties(t);super(t,s,"anchoredvwap",o,i,n);const[a,u,l,d,c,p,h]=this.metaInfo().plots,_=t.mainSeries(),y=[new x(this,_,t,a.id)];u&&l&&(y.push(new T.StudyPlotPaneView(this,_,t,u.id)),y.push(new T.StudyPlotPaneView(this,_,t,l.id))),d&&c&&p&&h&&(y.push(new T.StudyPlotPaneView(this,_,t,d.id)),y.push(new T.StudyPlotPaneView(this,_,t,c.id)),y.push(new T.StudyPlotPaneView(this,_,t,p.id)),y.push(new T.StudyPlotPaneView(this,_,t,h.id))),this._properties.childs().areaBackground&&y.splice(0,0,new V.AreaBackgroundPaneView(this,t)),this._lastValuePriceAxisView=new v(this),this._anchorPriceCalculated=!1,this._onInputsReadyCallbacks=[],this._setPaneViews(y),t.properties().childs().scalesProperties.childs().showStudyLastValue.subscribe(this,this._onShowStudyLastValueChanged),o.onRestoreFactoryDefaults().subscribe(this,this._onRestoreFactoryDefaults)}destroy(){this.properties().onRestoreFactoryDefaults().unsubscribeAll(this),this.model().properties().childs().scalesProperties.childs().showStudyLastValue.unsubscribeAll(this),this._onInputsReadyCallbacks=[],super.destroy()}canHasAlert(){return!0}pointsCount(){return 1}priceAxisViews(t,e){if(e!==this.priceScale()||this.isSourceHidden())return null;const s=super.priceAxisViews(t,e);return null===s?[this._lastValuePriceAxisView]:[...s,this._lastValuePriceAxisView]}updateAllViews(t){super.updateAllViews(t),this._lastValuePriceAxisView.update(t)}offset(t){return 0}firstValue(){return this._model.mainSeries().firstValue()}getMinFirstBarIndexForPlot(){return-1/0}priceRange(t,e){if(!this._isReady()||this.isSourceHidden())return null
;const s=this.plots().minMaxOnRangeCached(t,e,[{name:this.metaInfo().plots[0].id,offset:0}]);if(null===s)return null;const i=(0,r.ensureNotNull)(this.priceScale());return i.isLog()?new m.PriceRange(i.priceToLogical(s.min),i.priceToLogical(s.max)):new m.PriceRange(s.min,s.max)}isIncludedInAutoScale(){return!0}lastValueData(t,e,s){const i={noData:!0},o=this.priceScale();if(this._model.timeScale().isEmpty()||null===this.priceScale()||null===o||o.isEmpty()||this.plots().isEmpty())return i;const a=this._model.timeScale().visibleBarsStrictRange();if(null===a)return i;if(!this.properties().childs().visible.value())return i;const u=this.plots().search(a.lastBar(),f.PlotRowSearchMode.NearestLeft,1);if(null===u)return i;const l=a.contains(u.index),d=!e&&l?u:(0,r.ensureNotNull)(this.plots().last());if(!d||!(0,n.isNumber)(d.value[1]))return i;const c=d.value[1],p=this.properties().childs().styles.childs().VWAP,h=(0,r.ensureNotNull)(this.firstValue()),_=o.priceToCoordinate(c,h);return{...o.getFormattedValues(c,h),noData:!1,price:c,color:p.childs().color.value(),coordinate:_,floatCoordinate:_,index:d.index}}restoreData(t){super.restoreData(t),void 0!==t.data&&(this._anchorPriceCalculated=!0)}properties(){return super.properties()}sourceId(){return this._studyId()}hasStateForAlert(){return u.enabled("alerts")&&null!==this._inputs}alertCreationAvailable(){return new(a())(!this.hasAlert.value()&&this.hasStateForAlert()).readonly()}stateForAlert(){const t=this.metaInfo(),e=(0,c.plotsForAlert)(t,this.offset.bind(this),["VWAP"]),s=(0,c.collectDepsForAlert)([this],this.id()),r=s.idForAlert,i=s.studyDependencies,n=s.inputsForAlert,o=(this.priceScale()||this.model().mainSeries().priceScale()).formatter(),a=o?d.FormattersSerializer.serialize(o):null;return{id:r,uniqueId:r,type:M.StateForAlertType.StudyLineTool,title:(0,L.clean)(this.translatedType(),!0),shortTitle:(0,L.clean)(this.translatedType(),!0),shortDescription:(0,L.clean)(t.shortDescription||"Study",!0),interval:this._model.mainSeries().interval(),fullId:t.fullId,isTVScript:Boolean(t.isTVScript),isTVScriptStrategy:Boolean(t.isTVScriptStrategy),isTVLibrary:Boolean(t.isTVLibrary),hasAlertFunction:Boolean(t.hasAlertFunction),plots:e,inputs:n,alerts:t.alerts,scriptIdPart:t.scriptIdPart,scriptVersion:t.pine?t.pine.version:"-1",callStudyDependencies:(0,l.formatCallstudyArg)((0,c.dependenciesForAlerts)([],this._model.studyMetaInfoRepository())),studyDependencies:i,formatter:a}}inputsForAlertState(){null===this._inputs&&R.logError("Could not get inputsForAlertState if VWAP has no inputs");const{start_time:t,source:e}=this.inputs();return{start_time:t,source:e}}inputs(){return(0,r.ensureNotNull)(this._inputs)}idForAlert(){return(0,c.collectDepsForAlert)([this],this.id()).idForAlert}defaultPlotIdForAlert(){return this.metaInfo().plots[0].id}isPlotVisibleAt(t,e){return(this.properties().childs().styles.childs()[t].childs().display.value()&e)===e}static createProperties(t,e){const s=i.StudyMetaInfo.getStudyPropertyRootNameById(N),o=(0,r.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({
type:"java",studyId:N})),a=(0,C.createDefaultsState)(!0,s,[],t.studyVersioning());return this.createPropertiesFromStudyMetaInfoAndState(o,o,(0,n.merge)((0,n.clone)(a),null!=e?e:{}),t.studyVersioning())}static studyId(){return N}static createPropertiesFromStudyMetaInfoAndState(t,e,s,r){const i=(0,y.prepareStudyPropertiesForLoadChart)(t,e,s,r,B);return this._configureProperties(i),i}_onPointsetUpdated(t){super._onPointsetUpdated(t),this._onStudyInputsMayChange()}_studyInputs(t){(0,r.assert)(1===t.length,"all the line tool points should be defined");const e=t[0],s=this._getPointTime(e,!1);return null===s?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(["start_time"]),start_time:1e3*s}}_isReady(){return super._isReady()&&(null!==this._inputs||this._anchorPriceCalculated)&&this.model().lineBeingEdited()!==this}_onDataCleared(){super._onDataCleared(),this._anchorPriceCalculated=!1}_onInputsChanged(){if(super._onInputsChanged(),null!==this._inputs){for(const t of this._onInputsReadyCallbacks)try{t(this._inputs)}catch(t){R.logError(t.stack||t.message)}this._onInputsReadyCallbacks=[]}}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([s.e(53465),s.e(9430),s.e(58724),s.e(44728),s.e(5588),s.e(18537)]).then(s.bind(s,509985))).AnchoredVWAPDefinitionsViewModel}_updateAnchorsPrice(t){if(!t&&(this._anchorPriceCalculated||!this.isActualSymbol()))return;const e=this.firstValue(),s=this.points();if(null===e||0===s.length)return;const r=s[0].index,i=this.plots().valueAt(r);if(null===i)return;const n=i[1];null!=n&&(this._points[0].price=n,this._timePoint[0].price=n,this._anchorPriceCalculated=!0)}_synchronizeAlert(t){this._onInputsReady((()=>super._synchronizeAlert(t)))}static _configureProperties(t){super._configureProperties(t),t.hasChild("axisLabelVisible")||t.addChild("axisLabelVisible",new(h())(true));const e=t.childs().styles.childs().VWAP.childs().linewidth,s=t.childs().styles.childs().VWAP.childs().color;t.addChild("linesWidths",new g.LineToolWidthsProperty([e])),t.addChild("linesColors",new g.LineToolColorsProperty([s]))}_onInputsReady(t){null!==this._inputs?t(this._inputs):this._onInputsReadyCallbacks.push(t)}_onShowStudyLastValueChanged(){this._lastValuePriceAxisView.update((0,F.sourceChangeEvent)(this.id())),this.model().updateSource(this)}_onRestoreFactoryDefaults(){this.properties().childs().axisLabelVisible.setValue(true)}}},201194:(t,e,s)=>{s.d(e,{LineToolFixedRangeVolumeProfile:()=>p});var r=s(650151),i=s(401596),n=s(108184),o=s(659914),a=s(619276),u=s(87225),l=s(758337),d=s(800113);const c=(0,a.studyIdString)("VbPFixed","tv-basicstudies");class p extends i.LineToolVbPFixed{constructor(t,e,s,r,i){const n=s||t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:c});super(t,e,n,r,i)}calcIsActualSymbol(){o.StudyLineDataSource.prototype.calcIsActualSymbol.apply(this)}boundToSymbol(){return!0}isSynchronizable(){return this.priceScale()===this._model.mainSeries().priceScale()}static studyId(){return c}static createProperties(t,e){
const s=n.StudyMetaInfo.getStudyPropertyRootNameById(c),i=(0,r.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:c})),o=(0,u.createDefaultsState)(!0,s,[],t.studyVersioning());return this.createPropertiesFromStudyMetaInfoAndState(i,i,(0,l.merge)((0,l.clone)(o),null!=e?e:{}),t.studyVersioning())}static createPropertiesFromStudyMetaInfoAndState(t,e,s,r){const i=(0,d.prepareStudyPropertiesForLoadChart)(t,e,s,r);return this._configureProperties(i),i}}},724973:(t,e,s)=>{s.d(e,{LineToolStudyStatusView:()=>i});var r=s(337720);class i extends r.StatusView{constructor(t){super(t.statusProvider({}))}getSplitTitle(){return this._statusProvider.getSplitTitle()}}},681529:(t,e,s)=>{s.r(e),s.d(e,{LineStudyMtpAnalysis:()=>p,LineStudyMtpDecisionPoint:()=>_,LineStudyMtpDownWave1OrA:()=>A,LineStudyMtpDownWave2OrB:()=>D,LineStudyMtpDownWave3:()=>M,LineStudyMtpDownWave4:()=>L,LineStudyMtpDownWave5:()=>R,LineStudyMtpDownWaveC:()=>B,LineStudyMtpElliotWaveMain:()=>g,LineStudyMtpElliotWaveMajor:()=>I,LineStudyMtpElliotWaveMinor:()=>w,LineStudyMtpRiskReward:()=>m,LineStudyMtpUpWave1OrA:()=>U,LineStudyMtpUpWave2OrB:()=>O,LineStudyMtpUpWave3:()=>k,LineStudyMtpUpWave4:()=>H,LineStudyMtpUpWave5:()=>j,LineStudyMtpUpWaveC:()=>G});var r=s(650151),i=s(619276),n=s(915062),o=s(659914),a=s(738023),u=s(800113);function l(t){return(0,i.studyIdString)(t,"mtp-mtpredictor")}class d extends o.StudyLineDataSource{constructor(t,e,s,r,i,o){const u=l(r),c=s||t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:u}),p=e||d._createPropertiesFromStudyMetaInfo(c,t.studyVersioning());super(t,c,r,p,i,o),this._formatter=new a.VolumeFormatter,(0,n.createGraphicsPaneViews)(this,t).then(this._setPaneViews.bind(this))}formatter(){return this._formatter}static _createPropertiesFromMtpStudyShortIdAndState(t,e){return super._createPropertiesFromStudyIdAndState(l(t),e)}static _createPropertiesFromStudyMetaInfo(t,e){const s=(0,u.prepareStudyProperties)(t,{},null,e,[]);return super._configureProperties(s),s}}const c="mtp_tsanalysis";class p extends d{constructor(t,e,s,r,i){super(t,e,s,c,r,i)}pointsCount(){return 1}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(c,t)}static studyId(){return l(c)}_studyInputs(t){(0,r.assert)(1===t.length,"all the line tool points should be defined");const e=this._getPointTime(t[0],!0);return null===e?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(),bar:1e3*e}}}const h="mtp_decisionpoint";class _ extends d{constructor(t,e,s,r,i){super(t,e,s,h,r,i),this._symbolIntervalChanged=!1,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this._onSymbolIntervalChanged)}destroy(){this._model.mainSeries().onSymbolIntervalChanged().unsubscribeAll(this),super.destroy()}pointsCount(){return 1}onData(t){super.onData(t),this._symbolIntervalChanged=!1}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(h,t)}static studyId(){return l(h)}_studyInputs(t){(0,
r.assert)(1===t.length,"all the line tool points should be defined");const e=this._getPointTime(t[0],!0);return null===e?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(),symbolIntervalChanged:this._symbolIntervalChanged,bar:1e3*e}}_onSymbolIntervalChanged(){this._symbolIntervalChanged=!0}}const y="mtp_riskreward";class m extends d{constructor(t,e,s,r,i){super(t,e,s,y,r,i)}pointsCount(){return 3}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(y,t)}static getTooltipText(t){return t&&0!==t._points.length?1===t._points.length?"Select Stop Bar":2===t._points.length?"Select Target Point":null:"Select Entry Setup Bar"}static studyId(){return l(y)}_studyInputs(t){(0,r.assert)(3===t.length,"all the line tool points should be defined");const e=this._getPointTime(t[0],!0),s=this._getPointTime(t[1],!0),i=this._getPointTime(t[2],!0);return null===e||null===s||null===i?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(),entry_bar:1e3*e,stop_bar:1e3*s,target_bar:1e3*i,target_price:t[2].price}}}class f extends d{pointsCount(){return 1}_studyInputs(t){(0,r.assert)(1===t.length,"all the line tool points should be defined");const e=this._getPointTime(t[0],!0);return null===e?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(),bar:1e3*e}}}const S="mtp_ew_main";class g extends f{constructor(t,e,s,r,i){super(t,e,s,S,r,i)}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(S,t)}static studyId(){return l(S)}}const P="mtp_ew_major";class I extends f{constructor(t,e,s,r,i){super(t,e,s,P,r,i)}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(P,t)}static studyId(){return l(P)}}const v="mtp_ew_minor";class w extends f{constructor(t,e,s,r,i){super(t,e,s,v,r,i)}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(v,t)}static studyId(){return l(v)}}class b extends d{_studyInputs(t){(0,r.assert)(t.length===this.pointsCount(),"all the line tool points should be defined");const e={...this.properties().childs().inputs.state()};for(let s=0;s<this.pointsCount();++s){const r=this._getPointTime(t[s],!0);if(null===r)return this._subscribeApplyInputsOnSeriesCompleted(),null;e[`bar${s}`]=1e3*r}return e}}const T="mtp_wpt_down1ora";class A extends b{constructor(t,e,s,r,i){super(t,e,s,T,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(T,t)}static getTooltipText(t){return`Down Wave 1 or A: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(T)}}const x="mtp_wpt_down2orb";class D extends b{constructor(t,e,s,r,i){super(t,e,s,x,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(x,t)}static getTooltipText(t){return`Down Wave 2 or B: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(x)}}const C="mtp_wpt_down3";class M extends b{
constructor(t,e,s,r,i){super(t,e,s,C,r,i)}pointsCount(){return 3}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(C,t)}static getTooltipText(t){return`Down Wave 3: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(C)}}const V="mtp_wpt_down4";class L extends b{constructor(t,e,s,r,i){super(t,e,s,V,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(V,t)}static getTooltipText(t){return`Down Wave 4: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(V)}}const F="mtp_wpt_down5";class R extends b{constructor(t,e,s,r,i){super(t,e,s,F,r,i)}pointsCount(){return 5}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(F,t)}static getTooltipText(t){return`Down Wave 5: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(F)}}const N="mtp_wpt_downc";class B extends b{constructor(t,e,s,r,i){super(t,e,s,N,r,i)}pointsCount(){return 3}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(N,t)}static getTooltipText(t){return`Down Wave C: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(N)}}const E="mtp_wpt_up1ora";class U extends b{constructor(t,e,s,r,i){super(t,e,s,E,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(E,t)}static getTooltipText(t){return`Up Wave 1 or A: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(E)}}const W="mtp_wpt_up2orb";class O extends b{constructor(t,e,s,r,i){super(t,e,s,W,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(W,t)}static getTooltipText(t){return`Up Wave 2 or B: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(W)}}const z="mtp_wpt_up3";class k extends b{constructor(t,e,s,r,i){super(t,e,s,z,r,i)}pointsCount(){return 3}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(z,t)}static getTooltipText(t){return`Up Wave 3: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(z)}}const Y="mtp_wpt_up4";class H extends b{constructor(t,e,s,r,i){super(t,e,s,Y,r,i)}pointsCount(){return 2}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(Y,t)}static getTooltipText(t){return`Up Wave 4: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l(Y)}}const $="mtp_wpt_up5";class j extends b{constructor(t,e,s,r,i){super(t,e,s,$,r,i)}pointsCount(){return 5}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState($,t)}static getTooltipText(t){return`Up Wave 5: Select Point ${(t?t._points.length:0)+1}`}static studyId(){return l($)}}const K="mtp_wpt_upc";class G extends b{constructor(t,e,s,r,i){super(t,e,s,K,r,i)}pointsCount(){return 3}static createProperties(t){return super._createPropertiesFromMtpStudyShortIdAndState(K,t)}static getTooltipText(t){return`Up Wave C: Select Point ${(t?t._points.length:0)+1}`}
static studyId(){return l(K)}}},197667:(t,e,s)=>{s.d(e,{LineToolRegressionTrend:()=>m});var r=s(650151),i=s(149590),n=s(619276),o=s(108184),a=s(659914),u=s(800113),l=s(241056),d=s(758337),c=s(87225);const p=(0,n.studyIdString)("RegressionTrend","tv-basicstudies");function h(t){return void 0!==t.startPrice&&void 0!==t.endPrice}function _(t,e,s,r){return e.styles&&(y(e.styles.baseLine),y(e.styles.downLine),y(e.styles.upLine)),e}function y(t){void 0!==t&&void 0!==t.visible&&(t.display=t.visible?15:0,delete t.visible)}class m extends a.StudyLineDataSource{constructor(t,e,i,n,o){i=null!=i?i:(0,r.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:p}));super(t,i,"linreg_",null!=e?e:m.createProperties(t),n,o),this.version=2,this._trendData=null,Promise.all([s.e(37989),s.e(81679),s.e(51583)]).then(s.bind(s,955345)).then((t=>{this._setPaneViews([new t.RegressionTrendPaneView(this,this._model)])}))}formatter(){throw new Error("This method should never be called")}pointsCount(){return 2}clearData(){this._trendData=null,super.clearData()}state(t){var e;const s=super.state(t);return t?{...s,nonseriesdata:null!==(e=this._trendData)&&void 0!==e?e:void 0}:s}restoreData(t){var e;super.restoreData(t),this._trendData=null!==(e=t.nonseriesdata)&&void 0!==e?e:null}startIndex(){if(null===this._trendData||null===this._indexes)return null;const t=this._indexes[this._trendData.startIndex];return t!==i.INVALID_TIME_POINT_INDEX?t:null}endIndex(){if(null===this._trendData||null===this._indexes)return null;const t=this._indexes[this._trendData.endIndex];return t!==i.INVALID_TIME_POINT_INDEX?t:null}baseLine(){return null===this._trendData?null:this._trendData.baseLine}downLine(){return null===this._trendData?null:this._trendData.downLine}upLine(){return null===this._trendData?null:this._trendData.upLine}pearsons(){return null===this._trendData?null:this._trendData.pearsons}recalcStudyIfNeeded(){this._onStudyInputsMayChange()}cloneable(){return!1}static createProperties(t,e){const s=o.StudyMetaInfo.getStudyPropertyRootNameById(p),i=(0,r.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:p})),n=(0,c.createDefaultsState)(!0,s,[],t.studyVersioning());return this.createRegressionTrendPropertiesFromStudyMetaInfoAndState(i,i,(0,d.merge)((0,d.clone)(n),null!=e?e:{}),t.studyVersioning())}static createRegressionTrendPropertiesFromStudyMetaInfoAndState(t,e,s,r){const i=(0,u.prepareStudyPropertiesForLoadChart)(t,e,s,r,_);return this._configureProperties(i),i}static studyId(){return p}_studyInputs(t){(0,r.assert)(2===t.length,"all the line tool points should be defined");const[e,s]=t;if(e.index===s.index)return null;const i=this._getPointTime(e.index<=s.index?e:s,!0),n=this._getPointTime(s.index>=e.index?s:e,!0);return null===i||null===n?(this._subscribeApplyInputsOnSeriesCompleted(),null):{...this.properties().childs().inputs.state(),"first bar time":1e3*i,"last bar time":1e3*n}}_onDataUpdated(t,e,s){null!==e&&(e.indexes_replace||(this._trendData=e.data),"nochange"!==s&&(this._indexes=s),
super._onDataUpdated(t,e,s))}_isReady(){return null!==this._trendData&&void 0!==this._trendData.startIndex&&void 0!==this._trendData.endIndex&&h(this._trendData.upLine)&&h(this._trendData.baseLine)&&h(this._trendData.downLine)}_updateAnchorsPrice(){if(!this._trendData||(0,d.isNaN)(this._trendData.baseLine.startPrice)||(0,d.isNaN)(this._trendData.baseLine.endPrice))return;const{startPrice:t,endPrice:e}=this._trendData.baseLine;2===this._points.length&&(this._points[0].price=(0,r.ensureDefined)(t),this._points[1].price=(0,r.ensureDefined)(e),this._timePoint[0].price=(0,r.ensureDefined)(t),this._timePoint[1].price=(0,r.ensureDefined)(e))}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([s.e(88601),s.e(3623),s.e(53465),s.e(44728),s.e(68833),s.e(5588),s.e(60607)]).then(s.bind(s,590837))).RegressionTrendDefinitionsViewModel}static _configureProperties(t){super._configureProperties(t);const e=t.childs().styles.childs(),s=[e.upLine.childs().linewidth,e.downLine.childs().linewidth,e.baseLine.childs().linewidth];t.addChild("linesWidths",new l.LineToolWidthsProperty(s))}}},401596:(t,e,s)=>{s.d(e,{LineToolVbPFixed:()=>f});var r=s(277973),i=s(650151),n=s(619276),o=s(108184),a=s(659914),u=s(915062),l=s(627425),d=s(404822),c=s(758337),p=s(87225),h=s(800113);const _=(0,n.studyIdString)("VbPFixed","tv-volumebyprice");function y(t,e,s,r){return e.styles&&(m(e.styles.developingPoc),m(e.styles.developingVAHigh),m(e.styles.developingVALow)),e}function m(t){void 0!==t&&void 0!==t.visible&&(t.display=t.visible?15:0,delete t.visible)}class f extends a.StudyLineDataSource{constructor(t,e,s,r,i){const n=s||t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:_});super(t,n,"vbpfixed_",null!=e?e:f.createProperties(t),r,i),this._createPaneViews().then((t=>{this._setPaneViews(t)})),this.clearData()}pointsCount(){return 2}boundToSymbol(){return!1}offset(t){return 0}getMinFirstBarIndexForPlot(){return-1/0}calcIsActualSymbol(){this._isActualSymbol=!0,this._isActualCurrency=!0,this._isActualUnit=!0,this.calcIsActualInterval()}cloneable(){return!1}isSynchronizable(){return!1}isPlotVisibleAt(t,e){return(this.properties().childs().styles.childs()[t].childs().display.value()&e)===e}static createProperties(t,e){const s=o.StudyMetaInfo.getStudyPropertyRootNameById(_),r=(0,i.ensureNotNull)(t.studyMetaInfoRepository().findByIdSync({type:"java",studyId:_})),n=(0,p.createDefaultsState)(!0,s,[],t.studyVersioning());return this.createPropertiesFromStudyMetaInfoAndState(r,r,(0,c.merge)((0,c.clone)(n),null!=e?e:{}),t.studyVersioning())}static createPropertiesFromStudyMetaInfoAndState(t,e,s,r){const i=(0,h.prepareStudyPropertiesForLoadChart)(t,e,s,r,y);return this._configureProperties(i),i}static studyId(){return _}_studyInputs(t){(0,i.assert)(2===t.length,"all the line tool points should be defined");const[e,s]=t,r=Math.max(e.index,s.index),n=this._model.mainSeries().bars().lastIndex(),o=this._getPointTime(e.index<=s.index?e:s,!0),a=this._getPointTime(s.index>=e.index?s:e,!0)
;if(null===o||null===a)return this._subscribeApplyInputsOnSeriesCompleted(),null;return{...this.properties().childs().inputs.state(),first_bar_time:1e3*o,last_bar_time:1e3*a,subscribeRealtime:n===r,mapRightBoundaryToBarStartTime:!!this._needExtendToBarsEnding()||void 0}}_isReady(){return!(0,u.isStudyGraphicsEmpty)(this.graphics())}async _getPropertyDefinitionsViewModelClass(){return(await Promise.all([s.e(88601),s.e(3623),s.e(53465),s.e(44728),s.e(68833),s.e(5588),s.e(60607)]).then(s.bind(s,995961))).StudyLineDataSourceDefinitionsViewModel}_onDataUpdated(){this._updateAnchors(),this.updateAllViews((0,d.sourceChangeEvent)(this.id())),this._model.updateSource(this)}_updateAnchors(){const t=this._calculateAnchors();if(!t)return;const[{index:e,price:s},{index:r,price:i}]=t;if(this._timePoint.length&&(this._timePoint[0].price=s,this._timePoint[1].price=i),this._points.length){const t=this.model().timeScale(),n=t.indexToTimePoint(e),o=t.indexToTimePoint(e);this._points[0]={index:e,price:s,time:(0,c.isNumber)(n)?new Date(1e3*n):void 0},this._points[1]={index:r,price:i,time:(0,c.isNumber)(o)?new Date(1e3*o):void 0}}}_calculateAnchors(){let t=null,e=null,s=null,i=null;if(this.graphics().hhists().forEach((r=>{r.forEach((r=>{const{priceLow:n,priceHigh:o,firstBarTime:a,lastBarTime:u}=r;(!t||n<t)&&(t=n),(!e||o>e)&&(e=o),(!s||a<s)&&(s=a),(!i||u>i)&&(i=u)}))})),!((0,r.default)(t)||(0,r.default)(e)||(0,r.default)(i)||(0,r.default)(s)))return[{price:e,index:s},{price:t,index:i}]}_updateAnchorsPrice(){const t=this._calculateAnchors();if(!t)return;const[{price:e},{price:s}]=t;this._timePoint.length&&(this._timePoint[0].price=e,this._timePoint[1].price=s),this._points.length&&(this._points[0].price=e,this._points[1].price=s)}async _createPaneViews(){var t;const e=this._metaInfo,r=e.graphics,i=[],n=this._needExtendToBarsEnding();if(r.hhists){const{HHistPaneView:e}=await Promise.all([s.e(81679),s.e(20507)]).then(s.bind(s,327514)),r=null===(t=this.properties().childs().graphics.childs().polygons)||void 0===t?void 0:t.childs();i.push(new e(this,this._model,void 0,null==r?void 0:r.histBoxBg,n))}if(r.horizlines){const{HorizLinePaneView:t}=await Promise.all([s.e(81679),s.e(20507)]).then(s.bind(s,491810));i.push(new t(this,this._model,void 0,n))}return e.plots.length>0&&i.push(this._createStudyPlotPaneView(e.plots[0].id,n)),e.plots.length>1&&i.push(this._createStudyPlotPaneView(e.plots[1].id,n)),e.plots.length>2&&i.push(this._createStudyPlotPaneView(e.plots[2].id,n)),i}_createStudyPlotPaneView(t,e){return new l.StudyPlotPaneView(this,this._model.mainSeries(),this._model,t,e)}_needExtendToBarsEnding(){var t;return void 0!==(null===(t=this.metaInfo().defaults.inputs)||void 0===t?void 0:t.mapRightBoundaryToBarStartTime)}}},831699:(t,e,s)=>{s.d(e,{PaneRendererClockIcon:()=>o});var r=s(858063),i=s(904244);const n=Math.sqrt(3);class o extends i.MediaCoordinatesPaneRenderer{constructor(t){super(),this.update(t)}update(t){var e;const s=t.points[0],r=null!==(e=t.points[1])&&void 0!==e?e:t.points[0],i=s.x-r.x,o=s.y-r.y;let a=t.horzMargin
;void 0===a&&(a=i>0?10:-25),this._x=s.x+a,this._y=s.y+(0!==o&&Math.abs(i)*n<=Math.abs(o)?-7:o>0?-25:11),this._color=t.color}hitTest(t){return t.x<this._x||t.x>this._x+16||t.y<this._y||t.y>this._y+16?null:new r.HitTestResult(r.HitTestResult.REGULAR)}_drawImpl(t){const e=t.context;e.translate(this._x-.5,this._y-.5),e.beginPath(),e.arc(8,9,6,0,2*Math.PI,!0),e.closePath(),e.moveTo(8,9),e.arc(8.5,5.5,.5,Math.PI,0),e.lineTo(9,10),e.arc(5.5,9.5,.5,.5*Math.PI,1.5*Math.PI),e.closePath(),e.moveTo(1.71,5.93),e.bezierCurveTo(-.61,2.83,3.86,-.76,6.39,2.18),e.bezierCurveTo(4.35,2.67,2.63,4.04,1.71,5.93),e.closePath(),e.moveTo(14.29,5.93),e.bezierCurveTo(16.61,2.83,12.14,-.76,9.61,2.18),e.bezierCurveTo(11.65,2.67,13.37,4.04,14.29,5.93),e.fillStyle=this._color,e.fill()}}},823757:(t,e,s)=>{var r;s.d(e,{Constants:()=>r}),function(t){t.DrawingIconColor="rgba( 170, 170, 170, 1)",t[t.NameLengthLimit=300]="NameLengthLimit"}(r||(r={}))}}]);